window.hzmr = window.hzmr || [];
/************* Start viewSpace.js for locale en-US **************/
try {function imageTag(){}function ImageTags(){this.imageTags=null,this.imageTagsDiv=null,this.spaceId=-1,this.width=0,this.height=0,this.scale=1,this.displayState=!0,this.init=function(a,b,c,d){this.imageTags=new Array,this.imageTagsDiv=document.getElementById("imageTagsDiv"),this.spaceId=a,this.width=b,this.height=c,this.scale=d},this.getImageTag=function(a){return this.imageTags[a]},this.getImageTagByProductSpaceId=function(a){for(var b=0;b<this.imageTags.length;b++)if(this.imageTags[b].targetSpaceId==a)return this.imageTags[b];return null},this.addImageTag=function(a,b,c,d,e,f,g,h,i,j){var k=new imageTag;k.imageTagId=a,k.vendorName=b,k.link=c,k.comments=d,k.x=e,k.y=f,k.type=g,k.targetSpaceId=h,k.canEdit=i,k.canDelete=j;var l=this.imageTags.length;return this.imageTags.push(k),l},this.findImageTag=function(a){var b;for(b=0;b<this.imageTags.length;b++)if(this.imageTags[b].imageTagId==a)return b},this.updateImageTag=function(a,b,c,d,e,f,g,h){var i=this.findImageTag(a),j=this.imageTags[i];j.vendorName=b,j.link=c,j.comments=d,j.x=e,j.y=f,j.type=g,j.targetSpaceId=h,this.clearImageTags(),this.showImageTags()},this.deleteImageTag=function(a){var b=this.findImageTag(a);this.imageTags.splice(b,1),this.clearImageTags(),this.showImageTags()},this.addImageTagHTML=function(a){var b=this.imageTags[a];if(null!=this.imageTagsDiv){var c=this.scale*b.x-6,d=this.scale*b.y-3;this.imageTagsDiv.innerHTML+="<div id='imageTag"+a+"' class='imageTag' style='left:"+c+"px;top:"+d+"px'onmouseover='imageTagOnMouseOver("+a+")'></div>",this.imageTagsDiv.style.display="block"}},this.hasTags=function(){return null!=this.imageTagsDiv?""==this.imageTagsDiv.innerHTML?!1:!0:!1},this.clearImageTags=function(){null!=this.imageTagsDiv&&(this.imageTagsDiv.innerHTML="",this.imageTagsDiv.style.display="none")},this.showImageTags=function(a){if(0!=this.displayState){if(0==this.hasTags()){var b;for(this.clearImageTags(),b=0;b<this.imageTags.length;b++)this.addImageTagHTML(b)}null!=this.imageTagsDiv&&(this.imageTagsDiv.style.display="block"),null!=this.hideTimeout&&clearTimeout(this.hideTimeout),this.hideTimeout=null!=a?setTimeout("imageTagsObj.hideImageTags()",a):null}},this.hideImageTags=function(){null!=this.imageTagsDiv&&(this.imageTagsDiv.style.display="none"),null!=this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null)},this.enableImageTags=function(){this.displayState=!0,this.showImageTags()},this.disableImageTags=function(){this.displayState=!1,this.hideImageTags()}}function enableImageTags(){null!=imageTagsObj&&imageTagsObj.enableImageTags(),ImageTagsUI.enableTagsUI();var a=document.getElementById("imageTagPopup");a.style.display="none";var b=document.getElementById("mainImage");$(".addImageTagGuide").length&&(b.style.cursor="crosshair")}function disableImageTags(){null!=imageTagsObj&&imageTagsObj.disableImageTags(),ImageTagsUI.disableTagsUI();var a=document.getElementById("mainImage");a.style.cursor="default"}function imageTagOnMouseOver(a){if(!ImageTagsUI.isEditing()){var b=imageTagsObj.getImageTag(a);ImageTagsUI.setCurrentImageTag(b),ImageTagsUI.setScreen("view"),ImageTagsUI.show()}}function imageTagPopupOnMouseOver(){}function imageTagPopupOnMouseOut(a){ImageTagsUI.isEditing()||0!=isMouseReallyOut(a,"imageTagPopup")&&ImageTagsUI.dismiss()}function onImageClick(a,b){if(!ImageTagsUI.isEditing()&&0!=ImageTagsUI.displayState){b=b||window.event,imageBorderWidth=1;var c;b.target?c=b.target:b.srcElement&&(c=b.srcElement),3==c.nodeType&&(c=targ.parentNode);var c=document.getElementById("mainImage"),d=getEventPosition(b),e=getElementPosition(c),f=Math.round((d.x-e.x-imageBorderWidth)/ImageTagsUI.scale),g=Math.round((d.y-e.y-imageBorderWidth)/ImageTagsUI.scale);ImageTagsUI.initNewImageTag(f,g),ImageTagsUI.setScreen(defaultEditScreenName),ImageTagsUI.show()}}function onImageMouseOver(a){0==tagMode?(a.className="viewImageOn",null!=imageTagsObj&&imageTagsObj.showImageTags()):1==tagMode&&(a.className="viewImageTaggingOn",null!=imageTagsObj&&imageTagsObj.showImageTags())}function onImageMouseOut(a,b){0!=isMouseReallyOut(b,a.name)&&(a.className="viewImage",window.imageTagsObj&&imageTagsObj.hideImageTags())}function initImageTags(a,b,c,d){imageTagsObj=new ImageTags,imageTagsObj.init(a,b,c,d)}function onShowEmailForm(a){1==a?(tagMode=-1,null!=imageTagsObj&&imageTagsObj.hideImageTags()):tagMode=0}function toggleHouseDescriptionDiv(){var a=document.getElementById("houseDescriptionDiv");a.style.display="none"==a.style.display?"block":"none"}function highlightProductImageTag(a,b){if(void 0!=imageTagsObj&&!ImageTagsUI.isEditing())if(b){var c=imageTagsObj.getImageTagByProductSpaceId(a);ImageTagsUI.setCurrentImageTag(c),ImageTagsUI.setScreen("highlightProduct"),ImageTagsUI.show()}else ImageTagsUI.dismiss()}var tagMode=0,imageTagsObj;HZ.ns("HZ.viewSpace"),HZ.viewSpace.ViewSpaceRenderer=new function(){function a(a,b,c){var d=$(c.target);this.setMainImage(a,b,function(){d.addClass("loaded")})}var b;this.handleThumbClicked=function(c){var d,e,f,g=$(c.target);g.attr("i")&&(d=g.attr("i"),e=b.iids[d],f=HZ.data.Images.get(e),a.call(HZ.viewSpace.ViewSpaceRenderer,f,d,c),$(".altImagesDiv").find(".selected").removeClass("selected"),g.addClass("selected"))},this.updateView=function(a){var c,d=$(".altImagesDiv");if(b=HZ.data.Spaces.get(a),d.empty(),b.prod&&b.iids.length>1){for(var e=0;e<b.iids.length;e++)c=HZ.data.Images.get(b.iids[e]),c=$("<img />"),c.attr("i",e).attr("width",64).attr("height",64).attr("src",HZ.utils.Links.getSpaceImageUrl(a,64,64,c.bg,c.ts,e)),d.append(c);$(".altImagesDiv").find("img:first-child").addClass("selected")}},this.setMainImage=function(a,c,d){var e,f,g=$("#mainImage"),h="0px ";f={w:a.w,h:a.h},e=HZ.ui.Utils.getBoundRect(f,{w:640,h:640}),h+=(640-e.w)/2+"px",g.attr("src",HZ.utils.Links.getSpaceImageUrl(b.id,e.w,e.h,a.bg,a.ts,c)).load(function(){g.attr("width",e.w).attr("height",e.h).css("padding",h),d&&d.call()})}},HZ.ns("HZ.productVariation"),HZ.productVariation.ViewSpaceRenderer=new function(){function a(a,b){var c,h,i,j;i="";var k,l,m,n,o,p=$("#hzProductInfo dl.hzAttributes");if(p.empty(),b&&b.manu&&p.append(HZ.utils.Html.template(g,{VALUE:b.manu})),b&&b.vid&&HZ.data.Users.get(b.vid)){var q=b.vid;j=HZ.data.Users.get(q).d,browseLink=HZ.utils.Links.getMarketplaceVendorBrowseProductLink(q),b.dv||p.append(HZ.utils.Html.template(e,{VALUE1:browseLink,VALUE2:j}))}else j=p.find(".vendorName").html(),b.dv||p.append(HZ.utils.Html.template(f,{VALUE:j}));for(var r=0;r<HZ.ajaz.Services.Attributes.PRODUCT_ATTRIBUTES.length;r++)k=HZ.ajaz.Services.Attributes.PRODUCT_ATTRIBUTES[r],m=k.label,l=k.key,n=b[l],null!=n&&(n+=k.unit?b[k.unit]:"",o=HZ.utils.Html.template(d,{LABEL:m,VALUE:n}),p.append(o));h=HZ.utils.Styles.getStyleName(a.s),c=HZ.data.Categories.getCategoryById(a.cat),c&&4!=c.categoryId&&p.append(HZ.utils.Html.template(d,{LABEL:"Category",VALUE:UIHelper.ucwords(c.name)})),h&&p.append(HZ.utils.Html.template(d,{LABEL:"Style",VALUE:UIHelper.ucwords(h)})),a.ma&&p.append(HZ.utils.Html.template(d,{LABEL:"Location",VALUE:UIHelper.ucwords(a.ma)}))}var b=10,c=40,d='<dt class="key">%LABEL%</dt><dd class="value">%VALUE%</dd>',e='<dt class="key">'+_hgt("Sold By")+'</dt><dd class="value"><span class="vendorName"><a target="_blank" href="%VALUE1%" class="colorLink">%VALUE2%</a>&nbsp;</span></dd>',f='<dt class="key">'+_hgt("Sold By")+'</dt><dd class="value"><span class="vendorName">%VALUE%</span></dd>',g='<dt class="key">'+_hgt("Manufactured By")+'</dt><dd class="value"><span class="productManufacturer">%VALUE%</span></dd>',h='<option value="%QTY%">%QTY%</option>';this.updateView=function(d){var e=HZ.data.Spaces.get(d),f=HZ.data.ProductsInfo.get(d),g=$("#mpAddToCartBtn"),i=e.iids[0],j=HZ.data.Images.get(i);$("#hzProductInfo h1").html(e.t),g.attr("vlId",f.lid).attr("hid",d);var k=$(".mpQtyBox");if((f.pending||f.buyable)&&f.avail){k.addClass("inStock"),f.buyable?(g.removeClass("secondary").addClass("primary"),g.html("<i class='cartIcon'></i> "+_hgt("Add to Cart")),g.attr("disabled",!1)):(g.removeClass("primary").addClass("secondary"),g.html("<i class='cartIcon'></i> "+_hgt("Out of Stock")),g.attr("disabled",!0)),f.q<b?k.find(".qtyAlert").html(_hgt("Only {remainingStockQuantity} left!",{remainingStockQuantity:f.q})):k.find(".qtyAlert").empty();var l=c,m=$("#qtySelector").empty();f.q<c&&(l=f.q);for(var n=1;l>=n;n++)m.append($(HZ.utils.Html.template(h,{QTY:n})))}else f.buyable?k.removeClass("nonBuyableParent"):k.addClass("nonBuyableParent"),k.removeClass("inStock"),g.removeClass("primary").addClass("secondary"),g.html("<i class='cartIcon'></i> "+_hgt("Out of Stock")),g.attr("disabled",!0);$("#vlPrices").show(),$("#vlPrice.price").html(f.p),f.msrpstr?$("#vlPrices .price2").removeClass("hide").find(".msrp").html(f.msrpstr):$("#vlPrices .price2").addClass("hide");var o=f.fs?_hgt("Free Shipping!"):"";$("#vlShippingCost").html(o),f&&f.manu?($(".productManufacturer").html(f.manu),$(".productManufacturer").show()):$(".productManufacturer").hide();var p=e.c;if(!p){var f=HZ.data.ProductsInfo.get(e.id);f&&(p=f.desc)}if(p||(p=e.desc),$("#hzProductInfo .description").peekable("setContent",p),f.ltime?$("#hzProductInfo .leadTime").html(f.ltime).show():$("#hzProductInfo .leadTime").hide(),e.c&&f.desc?($("#hzProductInfo .vendorDesc").show(),$("#hzProductInfo .descContent").peekable("setContent",f.desc)):($("#hzProductInfo .descContent").peekable("setContent",""),$("#hzProductInfo .vendorDesc").hide()),$("#hzProductInfo .returnPolicyLink").attr("hid",e.id),a(e,f),HZ.viewSpace.ViewSpaceRenderer.updateView(e.id),HZ.viewSpace.ViewSpaceRenderer.setMainImage(j,0),HZ.data.CurrentSessionUser){$("#addToIdeabookBtn").unbind("click").bind("click",function(){showAddToMyGalleryForm(d)}),$("#askQuestionBtn").unbind("click").bind("click",function(){var a=1;showPostToForumForm(d,a)});{HZ.utils.Links.getEditSpaceLink(d)}if(HZ.houseUtils.Permissions.hasPermission(e,HZ.houseUtils.Permissions.CAN_BURY_HOUSE)||HZ.houseUtils.Permissions.hasPermission(e,HZ.houseUtils.Permissions.CAN_FEATURE_HOUSE)){var q=$("#burySpaceLink, #unburySpaceLink, #featureSpaceLink, #unfeatureSpaceLink");q.length>0&&q.remove(),$(".admin-controls").empty();var r=$("#refreshSpaceLink");if(0==r.length){var s='<a id="refreshSpaceLink" class="colorLink viewSpaceLinkBtn" href="">Refresh to bury/feature</a>';r=$(s)}$(".admin-controls").append(r),r.attr("href",HZ.utils.Links.getSpaceLink(d))}}}},$(document).ready(function(){function a(){$(".recommendedItem").each(function(){var a=$(this).find(".recommendedSpace").height();280>a&&(a=280),$(this).find(".recommendedDetails").height(a)})}var b=null;if($("#moreKeywords").peekable(),HZ.message.Bus.subscribe(HZ.message.Messages.LIGHTBOX_UNLOAD,"viewSpaceLBEdit",function(){return b?window.location.href=HZ.utils.Links.getSpaceLink(b):HZ.productVariation.Manager.setRenderer(HZ.productVariation.ViewSpaceRenderer),!1}),HZ.message.Bus.subscribe(HZ.message.Messages.PHOTO_UPDATED,"viewSpaceLBEdit",function(a,c){b=c.spaceId}),HZ.message.Bus.subscribe(HZ.message.Messages.PHOTO_REMOVED,"viewSpaceLBEdit",function(a,c){b=c.spaceId}),$(".recommendedItems").length){a();var c;$(window).resize(function(){clearTimeout(c),c=setTimeout(a,100)})}$(".spaces-grid").each(function(a,b){$(b).find(".space-meta").equalizeHeights()}),HZ.ns("HZ.reviews"),HZ.reviews.ProductReviewsUIManager&&HZ.reviews.ProductReviewsUIManager.getInstance().initFocusReviews()});

window.hzmr.push("viewSpace:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End viewSpace.js  **************/
