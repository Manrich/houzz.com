window.hzmr = window.hzmr || [];
/************* Start scrollToTop.js for locale en-US **************/
try {HZ.ns("HZ.modules.ScrollToTop"),HZ.modules.ScrollToTop=function(){var a=!1,b=0,c=$('<a id="ScrollToTopContainer" class="hide" href="javascript:;"><span><span class="hzi-font hzi-Arrow-U"></span></span></a>'),d=$(document.body);c.click(function(){a=!0,$("body,html").animate({scrollTop:0},500,"swing",function(){a=!1}),c.addClass("hide")}),d.append(c);var e=!1,f=function(){var c=$(window).scrollTop();a||(c>b?g():h(),b=c)},g=function(){var a=$(window).scrollTop();a>=10&&c.removeClass("hide")},h=function(){var a=$(window).scrollTop();60>a&&c.addClass("hide")},i=document.body.clientHeight,j=document.body.scrollHeight;j&&j/i>1.5&&(setInterval(function(){e&&(f(),e=!1)},250),$(window).scroll(function(){e=!0}))}();

window.hzmr.push("scrollToTop:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End scrollToTop.js  **************/
/************* Start cartActions.js for locale en-US **************/
try {HZ.ns("HZ.cart"),HZ.cart.Actions=new function(){function a(a){if(a&&"true"==a.success){var e={hasaccount:HZ.data.CurrentSessionUser?"y":"n"};if(a.hid&&a.qty&&HZ.data.Spaces.get(a.hid)){var f=HZ.data.Spaces.get(a.hid);e.ecomm_prodid="HZ_"+a.hid,f.amt&&(e.ecomm_pvalue=Math.round(f.amt*a.qty*100)/100,e.ecomm_currency=HZ.data.Currencies.get(f.cuid)),e.ecomm_category=f.cat}if(HZ.utils.Gtm.pushData("cart_add","cart",e),a.cartHeaderHTML){if(d)return _gaq.push(["_trackEvent","MPFlow","cart_add"]),void(window.location.href=HZ.utils.Config.viewShoppingCartUrl);HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.confirm("","This item has been added to your cart.","Check Out Now",function(){window.location.href=HZ.utils.Config.checkoutLaunchUrl},"Keep Shopping"),c.broadcastCartUpdate(a),_gaq.push(["_trackEvent","MPFlow","cart_add"])}else b("Add item to cart","This item is not available.  Please try again later.")}else b("Add item to cart","This item is not available.  Please try again later.")}function b(a,b){HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(a,b)}var c=this,d=!1;this.addItem=function(b,c,e,f){d=void 0===f?!1:f,HZ.ui.yamdi.Common.loading("Adding item to cart"),HZ.ajaz.Services.Cart.addItem(b,c,e,a)},this.subscribeCartUpdate=function(a){$(window).bind("Cart.Update",a)},this.broadcastCartUpdate=function(a){$(window).trigger("Cart.Update",[a])}};

window.hzmr.push("cartActions:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End cartActions.js  **************/
/************* Start jquery.history.js for locale en-US **************/
try {try{!function(a,b){"use strict";var c=a.History=a.History||{},d=a.jQuery;if("undefined"!=typeof c.Adapter)throw new Error("History.js Adapter has already been loaded...");c.Adapter={bind:function(a,b,c){d(a).bind(b,c)},trigger:function(a,b,c){d(a).trigger(b,c)},extractEventData:function(a,c,d){var e=c&&c.originalEvent&&c.originalEvent[a]||d&&d[a]||b;return e},onDomLoad:function(a){d(a)}},"undefined"!=typeof c.init&&c.init()}(window),function(a,b){"use strict";var c=a.console||b,d=a.document,e=a.navigator,f=a.sessionStorage||!1,g=a.setTimeout,h=a.clearTimeout,i=a.setInterval,j=a.clearInterval,k=a.JSON,l=a.alert,m=a.History=a.History||{},n=a.history;if(k.stringify=k.stringify||k.encode,k.parse=k.parse||k.decode,"undefined"!=typeof m.init)throw new Error("History.js Core has already been loaded...");m.init=function(){return"undefined"==typeof m.Adapter?!1:("undefined"!=typeof m.initCore&&m.initCore(),"undefined"!=typeof m.initHtml4&&m.initHtml4(),!0)},m.initCore=function(){if("undefined"!=typeof m.initCore.initialized)return!1;if(m.initCore.initialized=!0,m.options=m.options||{},m.options.hashChangeInterval=m.options.hashChangeInterval||100,m.options.safariPollInterval=m.options.safariPollInterval||500,m.options.doubleCheckInterval=m.options.doubleCheckInterval||500,m.options.storeInterval=m.options.storeInterval||1e3,m.options.busyDelay=m.options.busyDelay||250,m.options.debug=m.options.debug||!1,m.options.initialTitle=m.options.initialTitle||d.title,m.intervalList=[],m.clearAllIntervals=function(){var a,b=m.intervalList;if("undefined"!=typeof b&&null!==b){for(a=0;a<b.length;a++)j(b[a]);m.intervalList=null}},m.debug=function(){(m.options.debug||!1)&&m.log.apply(m,arguments)},m.log=function(){var a,b,e,f,g,h="undefined"!=typeof c&&"undefined"!=typeof c.log&&"undefined"!=typeof c.log.apply,i=d.getElementById("log");for(h?(f=Array.prototype.slice.call(arguments),a=f.shift(),"undefined"!=typeof c.debug?c.debug.apply(c,[a,f]):c.log.apply(c,[a,f])):a="\n"+arguments[0]+"\n",b=1,e=arguments.length;e>b;++b){if(g=arguments[b],"object"==typeof g&&"undefined"!=typeof k)try{g=k.stringify(g)}catch(j){}a+="\n"+g+"\n"}return i?(i.value+=a+"\n-----\n",i.scrollTop=i.scrollHeight-i.clientHeight):h||l(a),!0},m.getInternetExplorerMajorVersion=function(){var a=m.getInternetExplorerMajorVersion.cached="undefined"!=typeof m.getInternetExplorerMajorVersion.cached?m.getInternetExplorerMajorVersion.cached:function(){for(var a=3,b=d.createElement("div"),c=b.getElementsByTagName("i");(b.innerHTML="<!--[if gt IE "+ ++a+"]><i></i><![endif]-->")&&c[0];);return a>4?a:!1}();return a},m.isInternetExplorer=function(){var a=m.isInternetExplorer.cached="undefined"!=typeof m.isInternetExplorer.cached?m.isInternetExplorer.cached:Boolean(m.getInternetExplorerMajorVersion());return a},m.emulated={pushState:!Boolean(a.history&&a.history.pushState&&a.history.replaceState&&!/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(e.userAgent)&&!/AppleWebKit\/5([0-2]|3[0-2])/i.test(e.userAgent)),hashChange:Boolean(!("onhashchange"in a||"onhashchange"in d)||m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8)},m.enabled=!m.emulated.pushState,m.bugs={setHash:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),safariPoll:Boolean(!m.emulated.pushState&&"Apple Computer, Inc."===e.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(e.userAgent)),ieDoubleCheck:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(m.isInternetExplorer()&&m.getInternetExplorerMajorVersion()<7)},m.isEmptyObject=function(a){for(var b in a)return!1;return!0},m.cloneObject=function(a){var b,c;return a?(b=k.stringify(a),c=k.parse(b)):c={},c},m.getRootUrl=function(){var a=d.location.protocol+"//"+(d.location.hostname||d.location.host);return d.location.port&&(a+=":"+d.location.port),a+="/"},m.getBaseHref=function(){var a=d.getElementsByTagName("base"),b=null,c="";return 1===a.length&&(b=a[0],c=b.href.replace(/[^\/]+$/,"")),c=c.replace(/\/+$/,""),c&&(c+="/"),c},m.getBaseUrl=function(){var a=m.getBaseHref()||m.getBasePageUrl()||m.getRootUrl();return a},m.getPageUrl=function(){var a,b=m.getState(!1,!1),c=(b||{}).url||d.location.href;return a=c.replace(/\/+$/,"").replace(/[^\/]+$/,function(a){return/\./.test(a)?a:a+"/"})},m.getBasePageUrl=function(){var a=d.location.href.replace(/[#\?].*/,"").replace(/[^\/]+$/,function(a){return/[^\/]$/.test(a)?"":a}).replace(/\/+$/,"")+"/";return a},m.getFullUrl=function(a,b){var c=a,d=a.substring(0,1);return b="undefined"==typeof b?!0:b,/[a-z]+\:\/\//.test(a)||(c="/"===d?m.getRootUrl()+a.replace(/^\/+/,""):"#"===d?m.getPageUrl().replace(/#.*/,"")+a:"?"===d?m.getPageUrl().replace(/[\?#].*/,"")+a:b?m.getBaseUrl()+a.replace(/^(\.\/)+/,""):m.getBasePageUrl()+a.replace(/^(\.\/)+/,"")),c.replace(/\#$/,"")},m.getShortUrl=function(a){var b=a,c=m.getBaseUrl(),d=m.getRootUrl();return m.emulated.pushState&&(b=b.replace(c,"")),b=b.replace(d,"/"),m.isTraditionalAnchor(b)&&(b="./"+b),b=b.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},m.store={},m.idToState=m.idToState||{},m.stateToId=m.stateToId||{},m.urlToId=m.urlToId||{},m.storedStates=m.storedStates||[],m.savedStates=m.savedStates||[],m.normalizeStore=function(){m.store.idToState=m.store.idToState||{},m.store.urlToId=m.store.urlToId||{},m.store.stateToId=m.store.stateToId||{}},m.getState=function(a,b){"undefined"==typeof a&&(a=!0),"undefined"==typeof b&&(b=!0);var c=m.getLastSavedState();return!c&&b&&(c=m.createStateObject()),a&&(c=m.cloneObject(c),c.url=c.cleanUrl||c.url),c},m.getIdByState=function(a){var b,c=m.extractId(a.url);if(!c)if(b=m.getStateString(a),"undefined"!=typeof m.stateToId[b])c=m.stateToId[b];else if("undefined"!=typeof m.store.stateToId[b])c=m.store.stateToId[b];else{for(;c=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof m.idToState[c]||"undefined"!=typeof m.store.idToState[c];);m.stateToId[b]=c,m.idToState[c]=a}return c},m.normalizeState=function(a){var b,c;return a&&"object"==typeof a||(a={}),"undefined"!=typeof a.normalized?a:(a.data&&"object"==typeof a.data||(a.data={}),b={},b.normalized=!0,b.title=a.title||"",b.url=m.getFullUrl(m.unescapeString(a.url||d.location.href)),b.hash=m.getShortUrl(b.url),b.data=m.cloneObject(a.data),b.id=m.getIdByState(b),b.cleanUrl=b.url.replace(/\??\&_suid.*/,""),b.url=b.cleanUrl,c=!m.isEmptyObject(b.data),(b.title||c)&&(b.hash=m.getShortUrl(b.url).replace(/\??\&_suid.*/,""),/\?/.test(b.hash)||(b.hash+="?"),b.hash+="&_suid="+b.id),b.hashedUrl=m.getFullUrl(b.hash),(m.emulated.pushState||m.bugs.safariPoll)&&m.hasUrlDuplicate(b)&&(b.url=b.hashedUrl),b)},m.createStateObject=function(a,b,c){var d={data:a,title:b,url:c};return d=m.normalizeState(d)},m.getStateById=function(a){a=String(a);var c=m.idToState[a]||m.store.idToState[a]||b;return c},m.getStateString=function(a){var b,c,d;return b=m.normalizeState(a),c={data:b.data,title:a.title,url:a.url},d=k.stringify(c)},m.getStateId=function(a){var b,c;return b=m.normalizeState(a),c=b.id},m.getHashByState=function(a){var b,c;return b=m.normalizeState(a),c=b.hash},m.extractId=function(a){var b,c,d;return c=/(.*)\&_suid=([0-9]+)$/.exec(a),d=c?c[1]||a:a,b=c?String(c[2]||""):"",b||!1},m.isTraditionalAnchor=function(a){var b=!/[\/\?\.]/.test(a);return b},m.extractState=function(a,b){var c,d,e=null;return b=b||!1,c=m.extractId(a),c&&(e=m.getStateById(c)),e||(d=m.getFullUrl(a),c=m.getIdByUrl(d)||!1,c&&(e=m.getStateById(c)),!e&&b&&!m.isTraditionalAnchor(a)&&(e=m.createStateObject(null,null,d))),e},m.getIdByUrl=function(a){var c=m.urlToId[a]||m.store.urlToId[a]||b;return c},m.getLastSavedState=function(){return m.savedStates[m.savedStates.length-1]||b},m.getLastStoredState=function(){return m.storedStates[m.storedStates.length-1]||b},m.hasUrlDuplicate=function(a){var b,c=!1;return b=m.extractState(a.url),c=b&&b.id!==a.id},m.storeState=function(a){return m.urlToId[a.url]=a.id,m.storedStates.push(m.cloneObject(a)),a},m.isLastSavedState=function(a){var b,c,d,e=!1;return m.savedStates.length&&(b=a.id,c=m.getLastSavedState(),d=c.id,e=b===d),e},m.saveState=function(a){return m.isLastSavedState(a)?!1:(m.savedStates.push(m.cloneObject(a)),!0)},m.getStateByIndex=function(a){var b=null;return b="undefined"==typeof a?m.savedStates[m.savedStates.length-1]:0>a?m.savedStates[m.savedStates.length+a]:m.savedStates[a]},m.getHash=function(){var a=m.unescapeHash(d.location.hash);return a},m.unescapeString=function(b){for(var c,d=b;c=a.unescape(d),c!==d;)d=c;return d},m.unescapeHash=function(a){var b=m.normalizeHash(a);return b=m.unescapeString(b)},m.normalizeHash=function(a){var b=a.replace(/[^#]*#/,"").replace(/#.*/,"");return b},m.setHash=function(a,b){var c,e,f;return b!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.setHash,args:arguments,queue:b}),!1):(c=m.escapeHash(a),m.busy(!0),e=m.extractState(a,!0),e&&!m.emulated.pushState?m.pushState(e.data,e.title,e.url,!1):d.location.hash!==c&&(m.bugs.setHash?(f=m.getPageUrl(),m.pushState(null,null,f+"#"+c,!1)):d.location.hash=c),m)},m.escapeHash=function(b){var c=m.normalizeHash(b);return c=a.escape(c),m.bugs.hashEscape||(c=c.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),c},m.getHashByUrl=function(a){var b=String(a).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return b=m.unescapeHash(b)},m.setTitle=function(a){var b,c=a.title;c||(b=m.getStateByIndex(0),b&&b.url===a.url&&(c=b.title||m.options.initialTitle));try{d.getElementsByTagName("title")[0].innerHTML=c.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(e){}return d.title=c,m},m.queues=[],m.busy=function(a){if("undefined"!=typeof a?m.busy.flag=a:"undefined"==typeof m.busy.flag&&(m.busy.flag=!1),!m.busy.flag){h(m.busy.timeout);var b=function(){var a,c,d;if(!m.busy.flag)for(a=m.queues.length-1;a>=0;--a)c=m.queues[a],0!==c.length&&(d=c.shift(),m.fireQueueItem(d),m.busy.timeout=g(b,m.options.busyDelay))};m.busy.timeout=g(b,m.options.busyDelay)}return m.busy.flag},m.busy.flag=!1,m.fireQueueItem=function(a){return a.callback.apply(a.scope||m,a.args||[])},m.pushQueue=function(a){return m.queues[a.queue||0]=m.queues[a.queue||0]||[],m.queues[a.queue||0].push(a),m},m.queue=function(a,b){return"function"==typeof a&&(a={callback:a}),"undefined"!=typeof b&&(a.queue=b),m.busy()?m.pushQueue(a):m.fireQueueItem(a),m},m.clearQueue=function(){return m.busy.flag=!1,m.queues=[],m},m.stateChanged=!1,m.doubleChecker=!1,m.doubleCheckComplete=function(){return m.stateChanged=!0,m.doubleCheckClear(),m},m.doubleCheckClear=function(){return m.doubleChecker&&(h(m.doubleChecker),m.doubleChecker=!1),m},m.doubleCheck=function(a){return m.stateChanged=!1,m.doubleCheckClear(),m.bugs.ieDoubleCheck&&(m.doubleChecker=g(function(){return m.doubleCheckClear(),m.stateChanged||a(),!0},m.options.doubleCheckInterval)),m},m.safariStatePoll=function(){var b,c=m.extractState(d.location.href);if(!m.isLastSavedState(c))return b=c,b||(b=m.createStateObject()),m.Adapter.trigger(a,"popstate"),m},m.back=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.back,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.back(!1)}),n.go(-1),!0)},m.forward=function(a){return a!==!1&&m.busy()?(m.pushQueue({scope:m,callback:m.forward,args:arguments,queue:a}),!1):(m.busy(!0),m.doubleCheck(function(){m.forward(!1)}),n.go(1),!0)},m.go=function(a,b){var c;if(a>0)for(c=1;a>=c;++c)m.forward(b);else{if(!(0>a))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(c=-1;c>=a;--c)m.back(b)}return m},m.emulated.pushState){var o=function(){};m.pushState=m.pushState||o,m.replaceState=m.replaceState||o}else m.onPopState=function(b,c){var e,f,g=!1,h=!1;return m.doubleCheckComplete(),e=m.getHash(),e?(f=m.extractState(e||d.location.href,!0),f?m.replaceState(f.data,f.title,f.url,!1):(m.Adapter.trigger(a,"anchorchange"),m.busy(!1)),m.expectedStateId=!1,!1):(g=m.Adapter.extractEventData("state",b,c)||!1,h=g?m.getStateById(g):m.expectedStateId?m.getStateById(m.expectedStateId):m.extractState(d.location.href),h||(h=m.createStateObject(null,null,d.location.href)),m.expectedStateId=!1,m.isLastSavedState(h)?(m.busy(!1),!1):(m.storeState(h),m.saveState(h),m.setTitle(h),m.Adapter.trigger(a,"statechange"),m.busy(!1),!0))},m.Adapter.bind(a,"popstate",m.onPopState),m.pushState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.pushState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.pushState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0},m.replaceState=function(b,c,d,e){if(m.getHashByUrl(d)&&m.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(e!==!1&&m.busy())return m.pushQueue({scope:m,callback:m.replaceState,args:arguments,queue:e}),!1;m.busy(!0);var f=m.createStateObject(b,c,d);return m.isLastSavedState(f)?m.busy(!1):(m.storeState(f),m.expectedStateId=f.id,n.replaceState(f.id,f.title,f.url),m.Adapter.trigger(a,"popstate")),!0};if(f){try{m.store=k.parse(f.getItem("History.store"))||{}}catch(p){m.store={}}m.normalizeStore()}else m.store={},m.normalizeStore();m.Adapter.bind(a,"beforeunload",m.clearAllIntervals),m.Adapter.bind(a,"unload",m.clearAllIntervals),m.saveState(m.storeState(m.extractState(d.location.href,!0))),f&&(m.onUnload=function(){var a,b;try{a=k.parse(f.getItem("History.store"))||{}}catch(c){a={}}a.idToState=a.idToState||{},a.urlToId=a.urlToId||{},a.stateToId=a.stateToId||{};for(b in m.idToState)m.idToState.hasOwnProperty(b)&&(a.idToState[b]=m.idToState[b]);for(b in m.urlToId)m.urlToId.hasOwnProperty(b)&&(a.urlToId[b]=m.urlToId[b]);for(b in m.stateToId)m.stateToId.hasOwnProperty(b)&&(a.stateToId[b]=m.stateToId[b]);m.store=a,m.normalizeStore(),f.setItem("History.store",k.stringify(a))},m.intervalList.push(i(m.onUnload,m.options.storeInterval)),m.Adapter.bind(a,"beforeunload",m.onUnload),m.Adapter.bind(a,"unload",m.onUnload)),m.emulated.pushState||(m.bugs.safariPoll&&m.intervalList.push(i(m.safariStatePoll,m.options.safariPollInterval)),("Apple Computer, Inc."===e.vendor||"Mozilla"===(e.appCodeName||""))&&(m.Adapter.bind(a,"hashchange",function(){m.Adapter.trigger(a,"popstate")}),m.getHash()&&m.Adapter.onDomLoad(function(){m.Adapter.trigger(a,"hashchange")})))},m.init()}(window)}catch(err){}

window.hzmr.push("jquery.history:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jquery.history.js  **************/
/************* Start jquery-ui-1.10.3.custom.widget-only.js for locale en-US **************/
try {!function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(f){}e(b)},a.widget=function(c,d,e){var f,g,h,i,j={},k=c.split(".")[0];c=c.split(".")[1],f=k+"-"+c,e||(e=d,d=a.Widget),a.expr[":"][f.toLowerCase()]=function(b){return!!a.data(b,f)},a[k]=a[k]||{},g=a[k][c],h=a[k][c]=function(a,c){return this._createWidget?(arguments.length&&this._createWidget(a,c),b):new h(a,c)},a.extend(h,g,{version:e.version,_proto:a.extend({},e),_childConstructors:[]}),i=new d,i.options=a.widget.extend({},i.options),a.each(e,function(c,e){return a.isFunction(e)?(j[c]=function(){var a=function(){return d.prototype[c].apply(this,arguments)},b=function(a){return d.prototype[c].apply(this,a)};return function(){var c,d=this._super,f=this._superApply;return this._super=a,this._superApply=b,c=e.apply(this,arguments),this._super=d,this._superApply=f,c}}(),b):(j[c]=e,b)}),h.prototype=a.widget.extend(i,{widgetEventPrefix:g?i.widgetEventPrefix:c},j,{constructor:h,namespace:k,widgetName:c,widgetFullName:f}),g?(a.each(g._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,h,c._proto)}),delete g._childConstructors):d._childConstructors.push(h),a.widget.bridge(c,h)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;i>h;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(c[e]=a.isPlainObject(f)?a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,this.each(h?function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):b):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}:function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;e.length-1>g;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),d===b)return f[c]===b?null:f[c];f[c]=d}else{if(d===b)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(c,d,e){var f,g=this;"boolean"!=typeof c&&(e=d,d=c,c=!1),e?(d=f=a(d),this.bindings=this.bindings.add(d)):(e=d,d=this.element,f=this.widget()),a.each(e,function(e,h){function i(){return c||g.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled")?("string"==typeof h?g[h]:h).apply(g,arguments):b}"string"!=typeof h&&(i.guid=h.guid=h.guid||i.guid||a.guid++);var j=e.match(/^(\w+)\s*(.*)$/),k=j[1]+g.eventNamespace,l=j[2];l?f.delegate(l,k,i):d.bind(k,i)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery);

window.hzmr.push("jquery-ui-1.10.3.custom.widget-only:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jquery-ui-1.10.3.custom.widget-only.js  **************/
/************* Start feedComments.js for locale en-US **************/
try {!function(a){a.widget("hz.feedComments",{objectId:null,objectType:null,commentCount:null,fbShareable:null,clearRecentCommentsOnFirstLoad:!1,isProductQuestion:!1,options:{source:null,dataName:"hz",loaderClass:"loader",loaderHideClass:"loaderHide",commentsToggleClass:"commentsToggle",editCommentSelector:".editCommentDiv",commentBodyInput:"textarea.commentBody",slideDuration:400,selectors:{commentable:".feedComments",comment:".comment",moreComments:".moreComments",loadedCount:".moreComments .loadedCount",remainingCount:".moreComments .remainingCount",commentCount:".moreComments .commentCount",addCommentForm:".addComment form",lastCommentInput:".addComment form input[name='lastCommentId']",bodyInput:".addComment form textarea[name='body']",seeMoreComments:"a.seeMoreComments",commentsContainer:".commentsContainer",addComment:".addComment",submitButton:".addComment form .submitAddComment",addCommentExtra:".addComment .addCommentExtra",fileInputs:".fileInputs",errorMessage:".addComment .commentError"}},_findObject:function(a){var b=this.element.find(a);return b.length>0?b:null},_initElements:function(){this.elements=new Object;for(var a in this.options.selectors){var b=this.options.selectors[a];this.elements[a]=this._findObject(b)}},_create:function(){this.objectId=null,this.objectType=null,this.topCommentId=null,this.lastCommentId=0,this.commentCount=null,this.numCommentsLoaded=null,this.executing=!1;var a=this._getAndValidateData(this.element,this.options.dataName,["id","type","cc","crc","ipq"]);this.objectId=a.id,this.objectType=a.type,this.commentCount=a.cc,this.fbShareable=a.fbs,this.clearRecentCommentsOnFirstLoad=a.crc,this.isProductQuestion=a.ipq,this._initElements(),null!=this.elements.bodyInput&&(this.elements.bodyInput.css("resize","none").css("height","1em").autosize(),"undefined"!=typeof HZ.modules&&"undefined"!=typeof HZ.modules.SpacePreview&&HZ.modules.SpacePreview.init(this.elements.bodyInput)),this._updateCommentsEvent()},_showLoader:function(b){this.$loadRestoreElement=a(b),this.$loadRestoreElement.addClass(this.options.loaderHideClass).after(a("<div class='"+this.options.loaderClass+"'></div>"))},_hideLoader:function(){this.$loadRestoreElement.siblings("."+this.options.loaderClass).hide().remove(),this.$loadRestoreElement.removeClass(this.options.loaderHideClass)},_initCommentsToggle:function(){this.elements.seeMoreComments.addClass(this.options.commentsToggleClass).text(_hgt("Hide comments"))},_updateCommentsEvent:function(a){if("undefined"!=typeof a&&null!=a&&(this.commentCount=a),"undefined"==typeof this.elements&&this._initElements(),this.elements.comments=this._findObject(this.options.selectors.comment),this.numCommentsLoaded=null!=this.elements.comments?this.elements.comments.length:0,this.numCommentsRemaining=this.commentCount-this.numCommentsLoaded,this.numCommentsLoaded>0){var b=this.elements.comments.first(),c=this._getAndValidateData(b,this.options.dataName,["id"]);this.topCommentId=c.id;var d=this.elements.comments.last();c=this._getAndValidateData(d,this.options.dataName,["id"]),this.lastCommentId=c.id}null!=this.elements.moreComments&&this.numCommentsLoaded>=this.commentCount&&this._initCommentsToggle(),null!=this.elements.loadedCount&&this.elements.loadedCount.html(this.numCommentsLoaded),null!=this.elements.remainingCount&&this.elements.remainingCount.text(this.numCommentsRemaining)},_getAndValidateData:function(a,b,c){var d=a.data(b);if(void 0===d)throw"incompatible element, no data";for(var e in c)if(c.hasOwnProperty(e)){var f=c[e];if(f instanceof Array){var g=!1;for(var h in f)if("undefined"!=typeof d[f[h]]){g=!0;break}if(!g)throw"incompatible element, required attribute not found"}else if("undefined"==typeof d[f])throw"incompatible element, required attribute not found: "+f}return d},deleteClick:function(b){HZ.ui.yamdi.Common.confirm(_hgt("Delete a comment"),_hgt("Are you sure you want to delete this comment?"),_hgt("Delete Comment"),a.proxy(function(){if(!this.executing){this.executing=!0,this.$commentToDelete=a(b.target).closest(this.options.selectors.comment);var c=this.$commentToDelete.data("hz").id;HZ.ajaz.Services.deleteComment(this.objectType,this.objectId,c,a.proxy(this._deleteAjaxHandler,this))}},this),null,null,function(){a(document).trigger("keyboardHandlerRequired",{source:this,event:b})},function(){a(document).trigger("keyboardHandlerReleased",{source:this,event:b})})},_deleteAjaxHandler:function(b){"true"==b.success&&this.$commentToDelete.slideUp(this.options.slideDuration,a.proxy(function(){var a=b.commentCount;this.$commentToDelete.remove(),this._updateCommentsEvent(a)},this)),HZ.ui.yamdi.Common.hideAllDialogs(),this.executing=!1,this._notifyObservers()},editClick:function(b){var c=a(b.target).closest(this.options.selectors.comment).find(this.options.editCommentSelector).first(),d=c.clone();this.$commentToUpdate=a(b.target).closest(this.options.selectors.comment),HZ.ui.yamdi.Common.confirm(_hgt("Edit comment"),d,_hgt("Submit"),a.proxy(function(){if(!this.executing){this.executing=!0;var b=d.find("form [name='objectType']").val(),c=d.find("form [name='objectId']").val(),e=d.find("form [name='commentId']").val(),f=a.trim(d.find("form [name='body']").val()),g=d.find("form [name='privacy']"),h=a(g).prop("checked")?a(g).val():null;d.find(this.options.commentBodyInput).attr("disabled","true"),HZ.ajaz.Services.updateComment(b,c,e,f,h,this.options.source,a.proxy(this._editCommentAjaxHandler,this))}},this),null,null,function(){a(document).trigger("keyboardHandlerRequired",{source:this,event:b})},function(){a(document).trigger("keyboardHandlerReleased",{source:this,event:b})})},flagClick:function(b){{var c,d,e,f=a(b.currentTarget),g=f.closest(this.options.selectors.comment),h=f.closest(this.options.selectors.commentable),d=g.data("hz").id,i=h.data("hz").type;h.data("hz").ipq}c=i===HZ.ajaz.ContentFlag.COMMENTABLE_GALLERY?HZ.ajaz.ContentFlag.COMMENT:HZ.ajaz.ContentFlag.ANSWER;var j=this;if(g.hasClass("flaggedComment"))this._showLoader(f.parents(".flag-message")),HZ.ajaz.ContentFlag.removeFlag(c,d,function(a){if("true"==a.success){var b=function(){g.removeClass("flaggedComment"),j._hideLoader()};if(UIHelper.isIE8||UIHelper.isIE7||UIHelper.isIE6?(g.css({"max-height":"10000px"}),b()):g.animate({"max-height":"10000px"},"slow",b),"undefined"!=typeof a.as){var c=a.as,d=g.find(".admin-controls"),e=g.find(".hz-spam-control");0===c?(g.removeClass("isolated rejected"),d.removeClass("active"),e.text("")):1===c?(g.removeClass("rejected").addClass("isolated"),d.addClass("active"),e.text("("+_hgt("Pending")+")")):2===c?(g.removeClass("isolated rejected"),d.removeClass("active"),e.text("")):4===c&&(g.addClass("isolated rejected"),d.addClass("active"),e.text("("+_hgt("Rejected")+")"))}}else j._hideLoader()});else{var k=function(a,b){HZ.ajaz.ContentFlag.addFlag(c,d,b,e,function(a){if(HZ.ui.AjaxThrobber.setInCall(!1),"true"===a.success){HZ.ui.yamdi.Common.hideAllDialogs();var b=function(){g.addClass("flaggedComment")};UIHelper.isIE8||UIHelper.isIE7||UIHelper.isIE6?(g.css({"max-height":"19px"}),b()):g.animate({"max-height":"19px"},"fast",b)}else HZ.flag.flagDialogInstance.showStatus(a.error)})};HZ.flag.ShowFlagDialog({okCallback:k,isComment:!0})}},replyToClick:function(b){var c=a(b.target).closest(this.options.selectors.comment),d=c.data("hz").id;this.elements.bodyInput.val("@"+d)},_editCommentAjaxHandler:function(b){if("true"==b.success&&b.comments){var c=a(b.comments);c.hide(),this.$commentToUpdate.replaceWith(c),c.fadeIn()}HZ.ui.yamdi.Common.hideAllDialogs(),this.executing=!1,this._notifyObservers()},_toggleCommentsContainer:function(){this.elements.commentsContainer.is(":visible")?(this.elements.commentsContainer.slideUp(this.options.slideDuration),this.elements.seeMoreComments.text(_hgt("Show comments"))):this._showCommentsContainer(),this._notifyObservers()},_showCommentsContainer:function(){this.elements.commentsContainer.is(":visible")||(this.elements.commentsContainer.slideDown(this.options.slideDuration),this.elements.seeMoreComments.text(_hgt("Hide comments")))},showMoreClick:function(b){if(a(b.target).hasClass(this.options.commentsToggleClass))this._toggleCommentsContainer();else{if(this.executing)return;this.executing=!0,this._showLoader(b.currentTarget),this.clearRecentCommentsOnFirstLoad&&this._clearRecentCommentsPreAjax();var c=this.topCommentId;HZ.ajaz.Services.getComments(this.objectType,this.objectId,null,c,null,this.options.source,a.proxy(this._showMoreAjaxHandler,this))}},_clearRecentCommentsPreAjax:function(){this.topCommentId=4294967295},_clearRecentCommentsPostAjax:function(){this.elements.commentsContainer.empty(),this.clearRecentCommentsOnFirstLoad=!1},_showMoreAjaxHandler:function(b){if(b.comments){this.clearRecentCommentsOnFirstLoad&&this._clearRecentCommentsPostAjax();var c=a(a("<div>").html(b.comments).text());c.hide(),this.elements.commentsContainer.prepend(c);var d=b.commentCount;this._updateCommentsEvent(d),c.slideDown(this.options.slideDuration,a.proxy(function(){"undefined"!=typeof HZ.feedComments&&"undefined"!=typeof HZ.feedComments.Peekable&&"undefined"!=typeof HZ.feedComments.Peekable.peekableHandler&&c.find(".commentBodyContent.comment-peekable").each(HZ.feedComments.Peekable.peekableHandler),this._hideLoader(),this.executing=!1},this))}else this._updateCommentsEvent(0),this._hideLoader(),this.executing=!1},_addCommentKeypress:function(a){var b=a.keyCode?a.keyCode:a.which;13!=b||a.shiftKey||(a.preventDefault(),this.submitAddComment(a))},validateAddComment:function(){return this.executing?!1:""==a.trim(this.elements.bodyInput.val())?!1:(this.executing=!0,this.elements.bodyInput.attr("disabled","true"),!0)},updateLastCommentFormInput:function(){null!=this.lastCommentId&&this.elements.lastCommentInput.val(this.lastCommentId)},submitAddComment:function(){if(HZ.feedComments.requireLoggedIn(69)&&!this.executing){var b=this.elements.bodyInput.attr("placeholder"),c=a.trim(this.elements.bodyInput.val());if(""==c||c===b)return void this.elements.errorMessage.text(_hgt("Please enter your comment.")).slideDown(this.options.slideDuration);if(this.options.source){var d=this.elements.addCommentForm.find("input [name='source']");if(0==d.length){var d=a("<input type='hidden' name='source' value='"+this.options.source+"'/>");this.elements.addCommentForm.append(d)}}var e=a.proxy(function(){this.executing=!0,this.updateLastCommentFormInput();var b={success:a.proxy(function(b){var c=a.parseJSON(a(b).text());this._addCommentAjaxHandler(c)},this),error:a.proxy(function(a,b,c){this._addCommentAjaxHandler(c)},this)};this.elements.addCommentForm.ajaxSubmit(b),this.elements.addCommentForm.find("input, textarea, button, select").attr("readonly","true"),this._showLoader(this.elements.submitButton),this._showCommentsContainer()},this);this.fbShareable?HZ.sns.AddComment.fbPublish(this.elements.addCommentForm,e):e()}},_addCommentAjaxHandler:function(b){if(b&&"true"==b.success){var c=a(b.comments);c.hide(),this.elements.commentsContainer.append(c),this.elements.addCommentForm.get(0).reset(),this.elements.addCommentExtra.hide(),this.elements.addComment.find(".hzProIndicator").hide(),null!=this.elements.fileInputs&&(this.elements.fileInputs[0].innerHTML=this.elements.fileInputs[0].innerHTML,this.elements.fileInputs.hide().find("input").hide().first().show()),this.elements.addCommentForm.find(".attachment-previews").empty(),"undefined"!=typeof HZ.modules&&"undefined"!=typeof HZ.modules.SpacePreview&&HZ.modules.SpacePreview&&HZ.modules.SpacePreview.clearCache&&HZ.modules.SpacePreview.clearCache(this.elements.bodyInput),this.elements.bodyInput.trigger("autosize"),this.elements.bodyInput.trigger("reset"),this.elements.errorMessage.hide();var d=b.commentCount;this._updateCommentsEvent(d),c.fadeIn()}else HZ.ui.yamdi.Common.alert(_hgt("Unable to add comment"),_hgt("Unable to add comment.  Please reload the page and try again."));this.executing=!1,this.elements.addCommentForm.find("input, textarea, button, select").removeAttr("readonly"),this._hideLoader(),this._notifyObservers()},_notifyObservers:function(){this.options.contentChangedHandler&&this.options.contentChangedHandler()}})}(jQuery),HZ.ns("HZ.feedComments"),HZ.feedComments=new function(){var a={source:null,feedContainer:".feedContainer",feedInfo:".feedInfo",feedActions:".feedActions"},b="hz-feedComments",c={feedComments:".feedComments",commentButton:"a.commentButton",showCommentLink:"a.show-comments",addCommentInput:".addComment form textarea[name='body']",addComment:".addComment",fileInputs:".fileInputs",addCommentExtra:".addCommentExtra",submitButton:"input.submitAddComment",seeMoreComments:".moreComments a",deleteComment:".comment .deleteComment",editComment:".comment .editComment",attachFiles:".addCommentExtra .link--addPhoto",attachFilesInput:".addCommentExtra .addCommentFileInput",replyToComment:".comment .replyToLink",proIndicator:".hzProIndicator.hzProfileCompleted.hzProView",flagComment:".comment .flagComment, .comment .unflag"};this.init=function(b){if(!b.source)throw"source attribute required";return config={},$.extend(config,a,b),null!=$(config.feedContainer).data("feedCommentsConfig")?void console.log("feedComments already initialized for this element"):($(config.feedContainer).data("feedCommentsConfig",config),$(c.addCommentInput).initPlaceHolders(),$(config.feedContainer).on("mouseover",c.proIndicator,function(){var a=$(this);a.tipBubble({id:"proIndicatorHelp",content:_hgt("This pro has a complete profile."),point:"north",width:"auto",offsetY:4,position:"absolute",attachTo:"body",showCloseBtn:!1})}).on("mouseout",c.proIndicator,function(){var a=$(this);a.tipBubble("hide")}),$(config.feedContainer).on("click",c.commentButton+","+c.showCommentLink,function(){var a=$(this).closest(config.feedInfo);if(0!=a.length){var b=$(a).parents(".feedItem").find(c.feedComments);0!=b.length&&(b.show(),"undefined"!=typeof HZ.feedComments&&"undefined"!=typeof HZ.feedComments.Peekable&&"undefined"!=typeof HZ.feedComments.Peekable.peekableHandler&&b.find(".commentBodyContent.comment-peekable").each(HZ.feedComments.Peekable.peekableHandler),$(this).is(c.commentButton)&&b.find(c.addCommentInput).focus())}}),$(config.feedContainer).on("focus",c.addCommentInput,function(a){$(document).trigger("keyboardHandlerRequired",{source:this,event:a});var b=(d(this,config),$(this).parents(c.feedComments).find(c.addCommentExtra));b.is(":visible")||b.show();var e=$(this).parents(c.addComment).find(".hzProIndicator");e.is("visible")||e.css("display","inline-block")}),$(config.feedContainer).on("click",c.replyToComment,function(a){var b=d(this,config),e=$(this).closest(config.feedContainer),f=e.find(c.feedComments);f.show(),f.find(c.addCommentInput).focus(),b.replyToClick(a)}),$(config.feedContainer).on("blur",c.addCommentInput,function(a){$(document).trigger("keyboardHandlerReleased",{source:this,event:a})}),$(config.feedContainer).on("click",c.submitButton,function(a){var b=d(this,config);b.submitAddComment(a)}),$(config.feedContainer).on("click",c.seeMoreComments,function(a){var b=d(this,config);b.showMoreClick(a)}),$(config.feedContainer).on("click",c.deleteComment,function(a){var b=d(this,config);b.deleteClick(a)}),$(config.feedContainer).on("click",c.editComment,function(a){var b=d(this,config);b.editClick(a)}),$(config.feedContainer).on("click",c.flagComment,function(a){var b=d(this,config);b.flagClick(a)}),$(config.feedContainer).on("click",c.attachFiles,function(a){if(HZ.feedComments.requireLoggedIn(69)){var b=$(a.currentTarget).siblings(c.fileInputs);b.is(":visible")||(b.show(),UIHelper.isMSIE||b.find("input.addCommentFileInput").first().click())}}),void $(config.feedContainer).on("change",c.attachFilesInput,function(){$(this).next("input.addCommentFileInput").css("display","block")}))},this.requireLoggedIn=function(a){return null==HZ.data.CurrentSessionUser?(HZ.auth.Manager.signup(a),!1):!0};var d=function(a,d){var e=null,f=$(a).closest(c.feedComments);return e=f.data(b),null==e&&(e=f.feedComments({source:d.source}).data(b)),e}};

window.hzmr.push("feedComments:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End feedComments.js  **************/
/************* Start highlightComment.js for locale en-US **************/
try {HZ.ns("HZ.sns"),HZ.sns.AddComment=new function(){var a=function(a,b,c){var d,e=_hgt("Share your post on Facebook?"),f="<div id='fbNoteMsg'>"+_hgt("Your comments on ideabooks and discussions can be shared to your Facebook timeline.")+"</div>				<div id='saveFbSettingDiv'><label class='checkbox'><input id='saveFbSetting' name='saveFbSetting' type='checkbox' checked/> "+_hgt("Save this setting")+"</label></div>",g=_hgt("Share"),h=_hgt("No Thanks"),i=function(){var a=$("#saveFbSetting")[0].checked;d=function(){b(!0)},HZ.publish.Manager.processAction(d,a),HZ.ui.yamdi.Common.hideAllDialogs()},j=function(){a.find("input[name='postToFacebook']")[0].checked=!1,d=function(){b(!1)};var c=$("#saveFbSetting")[0].checked;HZ.publish.Manager.processAction(d,c),HZ.ui.yamdi.Common.hideAllDialogs()};HZ.ui.yamdi.Common.confirm(e,f,g,i,h,j,null,c)};this.fbPublish=function(b,c,d){var e=b.find("input[name='commentPrivacy']");if(e.length>0&&e[0].checked||"undefined"==typeof HZ||"undefined"==typeof HZ.publish||"undefined"==typeof HZ.publish.Manager)c();else{var f=b.find("input[name='postToFacebook']");if(HZ.publish.Manager.initAction("fb_publish_comment",function(a){var b=f[0];b&&(b.checked=1==a||2==a)},function(){var a=f[0];return a?a.checked?1:0:null}),HZ.publish.Manager.isPromoShown()){var g=function(a){var d=b.find("input[name=postToFacebook]");d[0]&&(d[0].checked=a),c()};a(b,g,d)}else HZ.publish.Manager.processAction(c)}}};

window.hzmr.push("highlightComment:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End highlightComment.js  **************/
/************* Start jquery.form.min.js for locale en-US **************/
try {!function(a){"use strict";function b(b){var c=b.data;b.isDefaultPrevented()||(b.preventDefault(),a(this).ajaxSubmit(c))}function c(b){var c=b.target,d=a(c);if(!d.is("[type=submit],[type=image]")){var e=d.closest("[type=submit]");if(0===e.length)return;c=e[0]}var f=this;if(f.clk=c,"image"==c.type)if(void 0!==b.offsetX)f.clk_x=b.offsetX,f.clk_y=b.offsetY;else if("function"==typeof a.fn.offset){var g=d.offset();f.clk_x=b.pageX-g.left,f.clk_y=b.pageY-g.top}else f.clk_x=b.pageX-c.offsetLeft,f.clk_y=b.pageY-c.offsetTop;setTimeout(function(){f.clk=f.clk_x=f.clk_y=null},100)}function d(){if(a.fn.ajaxSubmit.debug){var b="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(b):window.opera&&window.opera.postError&&window.opera.postError(b)}}var e={};e.fileapi=void 0!==a("<input type='file'/>").get(0).files,e.formdata=void 0!==window.FormData,a.fn.ajaxSubmit=function(b){function c(b){var c,d,e=a.param(b).split("&"),f=e.length,g=[];for(c=0;f>c;c++)e[c]=e[c].replace(/\+/g," "),d=e[c].split("="),g.push([decodeURIComponent(d[0]),decodeURIComponent(d[1])]);return g}function f(d){for(var e=new FormData,f=0;f<d.length;f++)e.append(d[f].name,d[f].value);if(b.extraData){var g=c(b.extraData);for(f=0;f<g.length;f++)g[f]&&e.append(g[f][0],g[f][1])}b.data=null;var i=a.extend(!0,{},a.ajaxSettings,b,{contentType:!1,processData:!1,cache:!1,type:h||"POST"});b.uploadProgress&&(i.xhr=function(){var a=jQuery.ajaxSettings.xhr();return a.upload&&a.upload.addEventListener("progress",function(a){var c=0,d=a.loaded||a.position,e=a.total;a.lengthComputable&&(c=Math.ceil(d/e*100)),b.uploadProgress(a,d,e,c)},!1),a}),i.data=null;var j=i.beforeSend;return i.beforeSend=function(a,b){b.data=e,j&&j.call(this,a,b)},a.ajax(i)}function g(c){function e(a){var b=a.contentWindow?a.contentWindow.document:a.contentDocument?a.contentDocument:a.document;return b}function f(){function b(){try{var a=e(q).readyState;d("state = "+a),a&&"uninitialized"==a.toLowerCase()&&setTimeout(b,50)}catch(c){d("Server abort: ",c," (",c.name,")"),g(A),v&&clearTimeout(v),v=void 0}}var c=k.attr("target"),f=k.attr("action");w.setAttribute("target",n),h||w.setAttribute("method","POST"),f!=l.url&&w.setAttribute("action",l.url),l.skipEncodingOverride||h&&!/post/i.test(h)||k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&(v=setTimeout(function(){u=!0,g(z)},l.timeout));var i=[];try{if(l.extraData)for(var j in l.extraData)l.extraData.hasOwnProperty(j)&&i.push(a.isPlainObject(l.extraData[j])&&l.extraData[j].hasOwnProperty("name")&&l.extraData[j].hasOwnProperty("value")?a('<input type="hidden" name="'+l.extraData[j].name+'">').val(l.extraData[j].value).appendTo(w)[0]:a('<input type="hidden" name="'+j+'">').val(l.extraData[j]).appendTo(w)[0]);l.iframeTarget||(p.appendTo("body"),q.attachEvent?q.attachEvent("onload",g):q.addEventListener("load",g,!1)),setTimeout(b,15);try{w.submit()}catch(m){var o=document.createElement("form").submit;o.apply(w)}}finally{w.setAttribute("action",f),c?w.setAttribute("target",c):k.removeAttr("target"),a(i).remove()}}function g(b){if(!r.aborted&&!F){try{E=e(q)}catch(c){d("cannot access response document: ",c),b=A}if(b===z&&r)return r.abort("timeout"),void y.reject(r,"timeout");if(b==A&&r)return r.abort("server abort"),void y.reject(r,"error","server abort");if(E&&E.location.href!=l.iframeSrc||u){q.detachEvent?q.detachEvent("onload",g):q.removeEventListener("load",g,!1);var f,h="success";try{if(u)throw"timeout";var i="xml"==l.dataType||E.XMLDocument||a.isXMLDoc(E);if(d("isXml="+i),!i&&window.opera&&(null===E.body||!E.body.innerHTML)&&--G)return d("requeing onLoad callback, DOM not available"),void setTimeout(g,250);var j=E.body?E.body:E.documentElement;r.responseText=j?j.innerHTML:null,r.responseXML=E.XMLDocument?E.XMLDocument:E,i&&(l.dataType="xml"),r.getResponseHeader=function(a){var b={"content-type":l.dataType};return b[a]},j&&(r.status=Number(j.getAttribute("status"))||r.status,r.statusText=j.getAttribute("statusText")||r.statusText);var k=(l.dataType||"").toLowerCase(),n=/(json|script|text)/.test(k);if(n||l.textarea){var o=E.getElementsByTagName("textarea")[0];if(o)r.responseText=o.value,r.status=Number(o.getAttribute("status"))||r.status,r.statusText=o.getAttribute("statusText")||r.statusText;else if(n){var s=E.getElementsByTagName("pre")[0],t=E.getElementsByTagName("body")[0];s?r.responseText=s.textContent?s.textContent:s.innerText:t&&(r.responseText=t.textContent?t.textContent:t.innerText)}}else"xml"==k&&!r.responseXML&&r.responseText&&(r.responseXML=H(r.responseText));try{D=J(r,k,l)}catch(w){h="parsererror",r.error=f=w||h}}catch(w){d("error caught: ",w),h="error",r.error=f=w||h}r.aborted&&(d("upload aborted"),h=null),r.status&&(h=r.status>=200&&r.status<300||304===r.status?"success":"error"),"success"===h?(l.success&&l.success.call(l.context,D,"success",r),y.resolve(r.responseText,"success",r),m&&a.event.trigger("ajaxSuccess",[r,l])):h&&(void 0===f&&(f=r.statusText),l.error&&l.error.call(l.context,r,h,f),y.reject(r,"error",f),m&&a.event.trigger("ajaxError",[r,l,f])),m&&a.event.trigger("ajaxComplete",[r,l]),m&&!--a.active&&a.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,r,h),F=!0,l.timeout&&clearTimeout(v),setTimeout(function(){l.iframeTarget||p.remove(),r.responseXML=null},100)}}}var i,j,l,m,n,p,q,r,s,t,u,v,w=k[0],x=!!a.fn.prop,y=a.Deferred();if(c)for(j=0;j<o.length;j++)i=a(o[j]),x?i.prop("disabled",!1):i.removeAttr("disabled");if(l=a.extend(!0,{},a.ajaxSettings,b),l.context=l.context||l,n="jqFormIO"+(new Date).getTime(),l.iframeTarget?(p=a(l.iframeTarget),t=p.attr("name"),t?n=t:p.attr("name",n)):(p=a('<iframe name="'+n+'" src="'+l.iframeSrc+'" />'),p.css({position:"absolute",top:"-1000px",left:"-1000px"})),q=p[0],r={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(b){var c="timeout"===b?"timeout":"aborted";d("aborting upload... "+c),this.aborted=1;try{q.contentWindow.document.execCommand&&q.contentWindow.document.execCommand("Stop")}catch(e){}p.attr("src",l.iframeSrc),r.error=c,l.error&&l.error.call(l.context,r,c,b),m&&a.event.trigger("ajaxError",[r,l,c]),l.complete&&l.complete.call(l.context,r,c)}},m=l.global,m&&0===a.active++&&a.event.trigger("ajaxStart"),m&&a.event.trigger("ajaxSend",[r,l]),l.beforeSend&&l.beforeSend.call(l.context,r,l)===!1)return l.global&&a.active--,y.reject(),y;if(r.aborted)return y.reject(),y;s=w.clk,s&&(t=s.name,t&&!s.disabled&&(l.extraData=l.extraData||{},l.extraData[t]=s.value,"image"==s.type&&(l.extraData[t+".x"]=w.clk_x,l.extraData[t+".y"]=w.clk_y)));var z=1,A=2,B=a("meta[name=csrf-token]").attr("content"),C=a("meta[name=csrf-param]").attr("content");C&&B&&(l.extraData=l.extraData||{},l.extraData[C]=B),l.forceSync?f():setTimeout(f,10);var D,E,F,G=50,H=a.parseXML||function(a,b){return window.ActiveXObject?(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a)):b=(new DOMParser).parseFromString(a,"text/xml"),b&&b.documentElement&&"parsererror"!=b.documentElement.nodeName?b:null},I=a.parseJSON||function(a){return window.eval("("+a+")")},J=function(b,c,d){var e=b.getResponseHeader("content-type")||"",f="xml"===c||!c&&e.indexOf("xml")>=0,g=f?b.responseXML:b.responseText;return f&&"parsererror"===g.documentElement.nodeName&&a.error&&a.error("parsererror"),d&&d.dataFilter&&(g=d.dataFilter(g,c)),"string"==typeof g&&("json"===c||!c&&e.indexOf("json")>=0?g=I(g):("script"===c||!c&&e.indexOf("javascript")>=0)&&a.globalEval(g)),g};return y}if(!this.length)return d("ajaxSubmit: skipping submit process - no element selected"),this;var h,i,j,k=this;"function"==typeof b&&(b={success:b}),h=this.attr("method"),i=this.attr("action"),j="string"==typeof i?a.trim(i):"",j=j||window.location.href||"",j&&(j=(j.match(/^([^#]+)/)||[])[1]),b=a.extend(!0,{url:j,success:a.ajaxSettings.success,type:h||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},b);var l={};if(this.trigger("form-pre-serialize",[this,b,l]),l.veto)return d("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(b.beforeSerialize&&b.beforeSerialize(this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var m=b.traditional;void 0===m&&(m=a.ajaxSettings.traditional);var n,o=[],p=this.formToArray(b.semantic,o);if(b.data&&(b.extraData=b.data,n=a.param(b.data,m)),b.beforeSubmit&&b.beforeSubmit(p,this,b)===!1)return d("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[p,this,b,l]),l.veto)return d("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var q=a.param(p,m);n&&(q=q?q+"&"+n:n),"GET"==b.type.toUpperCase()?(b.url+=(b.url.indexOf("?")>=0?"&":"?")+q,b.data=null):b.data=q;var r=[];if(b.resetForm&&r.push(function(){k.resetForm()}),b.clearForm&&r.push(function(){k.clearForm(b.includeHidden)}),!b.dataType&&b.target){var s=b.success||function(){};r.push(function(c){var d=b.replaceTarget?"replaceWith":"html";a(b.target)[d](c).each(s,arguments)})}else b.success&&r.push(b.success);b.success=function(a,c,d){for(var e=b.context||this,f=0,g=r.length;g>f;f++)r[f].apply(e,[a,c,d||k,k])};var t=a('input[type=file]:enabled[value!=""]',this),u=t.length>0,v="multipart/form-data",w=k.attr("enctype")==v||k.attr("encoding")==v,x=e.fileapi&&e.formdata;d("fileAPI :"+x);var y,z=(u||w)&&!x;b.iframe!==!1&&(b.iframe||z)?b.closeKeepAlive?a.get(b.closeKeepAlive,function(){y=g(p)}):y=g(p):y=(u||w)&&x?f(p):a.ajax(b),k.removeData("jqxhr").data("jqxhr",y);for(var A=0;A<o.length;A++)o[A]=null;return this.trigger("form-submit-notify",[this,b]),this},a.fn.ajaxForm=function(e){if(e=e||{},e.delegation=e.delegation&&a.isFunction(a.fn.on),!e.delegation&&0===this.length){var f={s:this.selector,c:this.context};return!a.isReady&&f.s?(d("DOM not ready, queuing ajaxForm"),a(function(){a(f.s,f.c).ajaxForm(e)}),this):(d("terminating; zero elements found by selector"+(a.isReady?"":" (DOM not ready)")),this)}return e.delegation?(a(document).off("submit.form-plugin",this.selector,b).off("click.form-plugin",this.selector,c).on("submit.form-plugin",this.selector,e,b).on("click.form-plugin",this.selector,e,c),this):this.ajaxFormUnbind().bind("submit.form-plugin",e,b).bind("click.form-plugin",e,c)},a.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},a.fn.formToArray=function(b,c){var d=[];if(0===this.length)return d;var f=this[0],g=b?f.getElementsByTagName("*"):f.elements;if(!g)return d;var h,i,j,k,l,m,n;for(h=0,m=g.length;m>h;h++)if(l=g[h],j=l.name)if(b&&f.clk&&"image"==l.type)l.disabled||f.clk!=l||(d.push({name:j,value:a(l).val(),type:l.type}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}));else if(k=a.fieldValue(l,!0),k&&k.constructor==Array)for(c&&c.push(l),i=0,n=k.length;n>i;i++)d.push({name:j,value:k[i]});else if(e.fileapi&&"file"==l.type&&!l.disabled){c&&c.push(l);var o=l.files;if(o.length)for(i=0;i<o.length;i++)d.push({name:j,value:o[i],type:l.type});else d.push({name:j,value:"",type:l.type})}else null!==k&&"undefined"!=typeof k&&(c&&c.push(l),d.push({name:j,value:k,type:l.type,required:l.required}));if(!b&&f.clk){var p=a(f.clk),q=p[0];j=q.name,j&&!q.disabled&&"image"==q.type&&(d.push({name:j,value:p.val()}),d.push({name:j+".x",value:f.clk_x},{name:j+".y",value:f.clk_y}))}return d},a.fn.formSerialize=function(b){return a.param(this.formToArray(b))},a.fn.fieldSerialize=function(b){var c=[];return this.each(function(){var d=this.name;if(d){var e=a.fieldValue(this,b);if(e&&e.constructor==Array)for(var f=0,g=e.length;g>f;f++)c.push({name:d,value:e[f]});else null!==e&&"undefined"!=typeof e&&c.push({name:this.name,value:e})}}),a.param(c)},a.fn.fieldValue=function(b){for(var c=[],d=0,e=this.length;e>d;d++){var f=this[d],g=a.fieldValue(f,b);null===g||"undefined"==typeof g||g.constructor==Array&&!g.length||(g.constructor==Array?a.merge(c,g):c.push(g))}return c},a.fieldValue=function(b,c){var d=b.name,e=b.type,f=b.tagName.toLowerCase();if(void 0===c&&(c=!0),c&&(!d||b.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!b.checked||("submit"==e||"image"==e)&&b.form&&b.form.clk!=b||"select"==f&&-1==b.selectedIndex))return null;if("select"==f){var g=b.selectedIndex;if(0>g)return null;for(var h=[],i=b.options,j="select-one"==e,k=j?g+1:i.length,l=j?g:0;k>l;l++){var m=i[l];if(m.selected){var n=m.value;if(n||(n=m.attributes&&m.attributes.value&&!m.attributes.value.specified?m.text:m.value),j)return n;h.push(n)}}return h}return a(b).val()},a.fn.clearForm=function(b){return this.each(function(){a("input,select,textarea",this).clearFields(b)})},a.fn.clearFields=a.fn.clearInputs=function(b){var c=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var d=this.type,e=this.tagName.toLowerCase();c.test(d)||"textarea"==e?this.value="":"checkbox"==d||"radio"==d?this.checked=!1:"select"==e?this.selectedIndex=-1:"file"==d?/MSIE/.test(navigator.userAgent)?a(this).replaceWith(a(this).clone()):a(this).val(""):b&&(b===!0&&/hidden/.test(d)||"string"==typeof b&&a(this).is(b))&&(this.value="")})},a.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},a.fn.enable=function(a){return void 0===a&&(a=!0),this.each(function(){this.disabled=!a})},a.fn.selected=function(b){return void 0===b&&(b=!0),this.each(function(){var c=this.type;if("checkbox"==c||"radio"==c)this.checked=b;else if("option"==this.tagName.toLowerCase()){var d=a(this).parent("select");b&&d[0]&&"select-one"==d[0].type&&d.find("option").selected(!1),this.selected=b}})},a.fn.ajaxSubmit.debug=!1}(jQuery);

window.hzmr.push("jquery.form.min:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End jquery.form.min.js  **************/
/************* Start lightbox.js for locale en-US **************/
try {HZ.ns("HZ.lb.plugins"),HZ.lb.Notifier=function(){var a=[];this.addListener=function(b){a.push(b)},this.removeListener=function(b){for(var c=0,d=a.length;d>c;c++)if(a[c]==b)return a.splice(c,1)},this.notifyListeners=function(b){for(var c=0,d=a.length;d>c;c++)b.apply(a[c])}},HZ.lb.Context=function(a,b,c,d,e,f,g,h){var i,j=a,k=b,l=c,m=f,n=d,o=g,p=h,q=e,r={},s={};for(var t in n)r[n[t]]=!0;var u=!1;this.getName=function(){return j},this.getType=function(){return k},this.getDescriptor=function(){return l},this.getTotalSpacesCount=function(){return q},this.containsSpaceId=function(a){return r[a]},this.getCurrentSpaceId=function(){return n[m]},this.setCurrentSpaceToLast=function(){n.length&&this.setCurrentSpaceId(n[n.length-1])},this.setCurrentSpaceId=function(a){for(var b=0;b<n.length;b++)if(n[b]==a)return m=b,!0;return!1},this.getNextSpaceIds=function(a){var b,c,d,e=[];a=a||1,d=a>0?1:-1,b=m+d,c=b+a;for(var f=b;f!=c;f+=d)f<n.length&&f>=0&&e.push(n[f]);return e},this.getCursorPosition=function(){return{cursor:m,spacesCount:n.length}},this.hasNext=function(){return!u&&m>=n.length-5&&-1!=this.getNextPosition()&&this.getNextPhotoIds(),m<n.length-1},this.hasPrevious=function(){return m>0},this.next=function(){return this.hasNext()?n[++m]:null},this.previous=function(){return this.hasPrevious()?n[--m]:null},this.getNextPosition=function(){return o},this.getBasePosition=function(){return p},this.getNextPhotoIds=function(){u=!0,HZ.ajaz.Services.getNextSpaces(this.getType(),l,this.getNextPosition(),$.proxy(this.handleData,this))},this.registerOwner=function(a){i=a},this.unregisterOwner=function(){i=null},this.removeCurrentSpace=function(){var a,b=n.splice(m,1);b&&b.length&&(delete r[b[0]],o>-1&&o--,q--),this.hasNext()?a=n[m+1]:this.hasPrevious()&&(a=n[m-1]),a&&this.setCurrentSpaceId(a)},this.removeSpaceBySpaceId=function(a){this.setCurrentSpaceId(a)&&this.removeCurrentSpace()},this.stashAndReplaceCurrentSpaceId=function(a){var b=this.getCurrentSpaceId();this.containsSpaceId(b)&&(s[m]=b),n[m]=a},this.unstashSpaces=function(){for(var a in s)n[a]=s[a];s={}},this.handleData=function(a){HZ.lb.Utils.validateData(a),n=n.concat(a.results.context.spaceIds);for(var b in a.results.context.spaceIds)r[n[b]]=!0;if(o=a.results.context.nextpos,HZ.data.Spaces.addAll(a.results.spaces),HZ.data.Images.addAll(a.results.images),HZ.data.Users.addAll(a.results.users),HZ.data.ProductsInfo.addAll(a.results.productInfo),a.results.photoAds)for(var c in a.results.photoAds)HZ.data.PhotoAds.put(c,a.results.photoAds[c]);if(a.results.paidProAds)for(var c in a.results.paidProAds)HZ.data.PaidProAds.put(c,a.results.paidProAds[c]);HZ.data.HouzzClkTracking.addAll(a.results.houzzClkTracking),HZ.data.HouzzImpTracking.addAll(a.results.houzzImpTracking),u=!1,i&&i.handleContextChanged()}},HZ.lb.Utils={connect:function(){var a=function(a,b){return $.grep(a,function(a){return-1!==$.inArray(a,b)})},b=function(a){var b=[];b.push(a);var c=$(a).parents().toArray();return b=b.concat(c)},c=function(c){if(!c||!c.length)return null;if(1===c.length)return c[0];for(var d,e=c[0],f=b(e),g=1;g<c.length;g++)d=b(c[g]),f=a(f,d);return f[0]},d=function(a,b){var c;c=HZ.lb.Config.CONTEXT_NAME_ARBITRARY_SPACES;var d=a.length,e=new HZ.lb.Context(b,c,{},a,d,1,-1);return d>0&&e.setCurrentSpaceId(a[0]),HZ.data.Contexts.put(b,e),e},e=0,f=$("#lb-parent");if(0==f.length){var g=$("body").find("[lb-context]").toArray();g.length&&(f=$(c(g)))}f.length&&f.on("click","[lb-edit], [lb-view], [lb-sid]",function(a){if(!lightbox.isShowing()){var b=$(a.target),c=b.closest("[lb-sid]").attr("lb-sid"),f=b.closest("[lb-context]"),g=f.attr("lb-context"),h=null,i=HZ.data.Contexts.get(g);if(""==g){var j=f.find("[lb-sid]").map(function(){return $(this).attr("lb-sid")});g="dyn_"+e++,i=d(j,g),f.attr("lb-context",g)}if(b.closest("[lb-edit]").length?h="edit":b.closest("[lb-view]").length&&(h="view"),c&&HZ.data.Spaces.get(c)&&i.containsSpaceId(c)&&h)return a.ctrlKey||a.metaKey?!0:(a.preventDefault(),"edit"===h?lightbox.showSpaceEditor(c,g):lightbox.show(c,g),!1)}})},validateData:function(a){return a&&"false"==a.success&&a.error==HZ.ajaz.Services.ERROR_VERSION_MISMATCH?void alert(_hgt("Browse session expired. Please refresh the page.")):void 0},registerTrackingUrl:function(a){(new Image).src=a},lightboxEditorLoaded:!1,notifyLightboxOnLoad:!1,loadLightboxEditor:function(a){this.lightboxEditorLoaded||this.notifyLightboxOnLoad||(a&&(this.notifyLightboxOnLoad=!0),HZ.utils.ResourceLoader.requireLightboxEditResources($.proxy(this.setLightboxEditorLoaded,this)))},setLightboxEditorLoaded:function(){this.lightboxEditorLoaded=!0,this.notifyLightboxOnLoad&&(lightbox.setEditMode(!0),lightbox.refresh(),lightbox.handleResize())}},HZ.lb.ActionBar={},HZ.lb.ActionBar.ACTION_BAR_LEFT="Left",HZ.lb.ActionBar.ACTION_BAR_CENTER="Center",HZ.lb.ActionBar.ACTION_BAR_RIGHT="Right",HZ.lb.Lightbox=function(){function a(){return HZ.utils.Fullscreen&&HZ.utils.Fullscreen.isFullscreen()?{w:3e3,h:2e3,m:0,fs:!0}:{w:Z,h:_,m:ab,fs:!1}}function b(a){a?(v=UIHelper.getScrollXY()[1],u.addClass("lbBody"),u[0].scrollTop=0):(u.removeClass("lbBody"),y=2,c())}function c(){UIHelper.getScrollXY()[1];v>0&&y>0&&(window.scrollTo(0,v+y),y--,setTimeout($.proxy(c,this),100))}function d(){return $(q).innerHeight()-$(t).height()-10}function e(){var a=10,b=10,c=-$(p).position().top,e=$(p).height(),f=d(),g=0;if($("#lbNotification")[Math.abs(c)<1?"removeClass":"addClass"]("scroll"),0!=e)if(e>f&&(g=c/(e-f)),e>f){G.totalHeight=f-a-b,G.scrollerHeight=G.totalHeight*f/e,G.scrollerTop=g*(G.totalHeight-G.scrollerHeight);var h={x:7,y:G.scrollerTop,w:10,h:G.scrollerHeight};UIHelper.setBounds(r[0],h),r.show();var h={x:cb-20,y:a,w:20,h:G.totalHeight};UIHelper.setBounds(s[0],h),s.show()}else G={},r.hide(),s.hide()}var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=1,C=2,D={x:0,y:0,w:640,h:640},E={x:0,y:0,w:640,h:640},F=null,G={},H=!1,I=!0,J=A,K=!0,L="imageResized",M="contextChanged",N="imageChanged",O="imageDataUpdated",P="editDataUpdated",Q="lightboxLoaded",R="lightboxUnloaded",S="infoDivToggled",T="pluginAfterShown",U="beforeSaveOrDiscard",V="saveData",W="discardData",X=720,Y=480,Z=2400,_=2400,ab=20,bb=60,cb=340,db=40,eb=4e3;this.init=function(){if(!h){if(g=new HZ.lb.Notifier,h=$("<div>").attr("id","lbRoot").attr("scopeId","lightbox").hide(),document.body.insertBefore(h[0],document.body.firstChild),h.html("<div id='lbBg'></div><div id='lbMain'><div id='lbHeader'></div><div id='lbImage'><table class='fadeOutOnIdle trackMe' id='lbActions'><tr><td id='lbActionsLeft' width=20%></td><td id='lbActionsCenter' align=center width=60%></td><td id='lbActionsRight' align=right width=20%>&nbsp;</td></tr></table></div><div id='lbAnchors'></div><div id='lbInfoScroller'><div id='lbInfo'></div><div id='lbInfoScrollArea'><div id='lbInfoScrollBar'></div></div><div id='lbFixedAd'></div></div></div>"),i=$("#lbBg")[0],j=$("#lbMain")[0],k=$("#lbImage")[0],l=$("#lbActions")[0],m=$("#lbAnchors")[0],p=$("#lbInfo")[0],n=$("#lbHeader")[0],t=$("#lbFixedAd")[0],q=$("#lbInfoScroller")[0],"onmousewheel"in q){var a=$.proxy(function(a){a=a||window.event,this.handleInfoDivScroll(a.originalEvent||a)},this);UIHelper.isIE8||UIHelper.isIE7?document.onmousewheel=a:UIHelper.isChrome?($(q).mousewheel(a),$(k).mousewheel(a)):(q.onmousewheel=a,k.onmousewheel=a)}else q.addEventListener("DOMMouseScroll",$.proxy(this.handleInfoDivScroll,this)),k.addEventListener("DOMMouseScroll",$.proxy(this.handleInfoDivScroll,this));r=$("#lbInfoScrollBar"),s=$("#lbInfoScrollArea").mousedown($.proxy(this.handleInfoDivMouseDown,this)),u=$("body"),$(i).click($.proxy(function(){this.isEditMode()||this.hide()},this)),o=new HZ.lb.PluginsController,this.addPlugin(o)}},this.lightboxEditorEnabled=!1,this.isSignupMode=function(){return window.lightboxSignupPromo?!0:void 0},this.show=function(a,c){this.resetContext();var d=HZ.data.Contexts.get(c);d.setCurrentSpaceId(a),this.pushContext(d),this.notifyPlugins(Q),b(!0),h.show(),document.body.parentNode.className="lbHtml",this.handleResize(!0),$(window).bind("resize.lightbox",$.proxy(this.handleResize,this)),$(window).bind("orientationchange.lightbox",$.proxy(this.handleResize,this)),$(document).bind("mousemove.lightbox",$.proxy(this.handleMouseMove,this)),$(window).on("beforeunload.lightbox",$.proxy(this.handleBeforeUnload,this)),this.attachKeyboardHandler(),this.attachFullscreenHandler(),this.handleMouseMove()},this.showSpaceEditor=function(a,b){J=C,HZ.lb.Utils.loadLightboxEditor(!0),this.setEditMode(!0),this.show(a,b)},this.isShowing=function(){return $(document.body.parentNode).hasClass("lbHtml")},this.hide=function(){if(this.isEditMode())return this.exitEditMode($.proxy(this.hide,this));var a=z[z.length-1];a.unstashSpaces(),this.notifyPlugins(R),$(window).unbind(".lightbox"),this.detachKeyboardHandler(),this.detachFullscreenHandler(),document.body.parentNode.className="",setTimeout(function(){b(!1),h.hide()},100),HZ.message.Bus.broadcast(HZ.message.Messages.LIGHTBOX_UNLOAD)},this.showDialog=function(a){this.detachKeyboardHandler(),HZ.ui.Yamdi.show(a,$.proxy(this.dialogClosed,this))},this.dialogClosed=function(){this.attachKeyboardHandler()},this.showLoginDialog=function(a,b,c){this.detachKeyboardHandler(),a||(a=HZ.lb.Config.SIGNUP_TRACKING_OTHER),HZ.auth.Manager.signup(a,b,null,$.proxy(this.loginDialogClosed,this),c)},this.loginDialogClosed=function(){this.attachKeyboardHandler()},this.isEditMode=function(){return this.lightboxEditorEnabled&&J>A},this.setEditMode=function(a){this.lightboxEditorEnabled&&(J=a?J||B:A,this.isEditMode()?($(h).addClass("lbEditMode"),$(".fadeOutOnIdle").removeClass("fadeOutOnIdle").addClass("__fadeOutOnIdle")):($(h).removeClass("lbEditMode"),$(".__fadeOutOnIdle").removeClass("__fadeOutOnIdle").addClass("fadeOutOnIdle")))},this.finalizeBeforeSaveOrDiscard=function(){this.notifyPlugins(U)},this.exitEditMode=function(a){return a||J!=C||(a=$.proxy(this.hide,this)),this.finalizeBeforeSaveOrDiscard(),this.hasChanges()?(HZ.lb.ConfirmSaveDialog.onDiscardClicked=$.proxy(function(){this.notifyPlugins(W),this.setEditMode(!1),HZ.ui.Yamdi.hide(),this.refresh(),this.handleResize(),a&&a()},this),HZ.lb.ConfirmSaveDialog.onSaveClicked=$.proxy(function(){this.notifyPlugins(V),this.setEditMode(!1),HZ.ui.Yamdi.hide(),this.refresh(),this.handleResize(),a&&a()},this),this.showDialog(HZ.lb.ConfirmSaveDialog)):(this.setEditMode(!1),this.refresh(),this.handleResize(),a&&a(),void 0)},this.hasChanges=function(){return HZ.lb.plugins.EditSpaceDataManager&&HZ.lb.plugins.EditSpaceDataManager.isDirty()},this.handleBeforeUnload=function(){return this.isEditMode()&&this.hasChanges()?_hgt("You have unsaved changes. Are you sure?"):void 0},this.attachKeyboardHandler=function(){H||(H=!0,$(document).bind("keydown.lightbox",$.proxy(this.handleKeyDown,this)))},this.detachKeyboardHandler=function(){H=!1,$(document).unbind("keydown.lightbox")},this.attachFullscreenHandler=function(){this.resizeProxy=$.proxy(this.handleResize,this),HZ.utils.Fullscreen&&HZ.utils.Fullscreen.registerFullscreenHandler(this.resizeProxy)},this.detachFullscreenHandler=function(){HZ.utils.Fullscreen&&HZ.utils.Fullscreen.unregisterFullscreenHandler(this.resizeProxy)},this.handleKeyDown=function(a){if("keydown"==a.type)switch(a.keyCode){case 27:$(a.target).trigger("blur"),this.hide();break;case 221:if(a.ctrlKey)return $(a.target).trigger("blur"),this.next(),!1;break;case 219:if(a.ctrlKey)return $(a.target).trigger("blur"),this.previous(),!1;break;case 83:if(a.ctrlKey)return setTimeout($.proxy(function(){this.notifyPlugins(V)},this),100),$(a.target).trigger("blur"),a.preventDefault(),!1;break;case 32:case 39:if(!this.isEditMode())return this.next(),!1;break;case 37:if(!this.isEditMode())return this.previous(),!1;break;case 38:this.handleInfoDivScroll(null,1,!1);break;case 40:this.handleInfoDivScroll(null,-1,!1);break;case 33:this.handleInfoDivScroll(null,1,!0);break;case 34:this.handleInfoDivScroll(null,-1,!0)}},this.registerTimeout=function(a,b,c){this.timeouts||(this.timeouts={}),null!=this.timeouts[a]&&(clearTimeout(this.timeouts[a]),this.timeouts[a]=null),this.timeouts[a]=setTimeout($.proxy(function(){this.timeouts[a]=null,b()},this),c)},this.handleMouseMove=function(a){var b={x:0,y:0};if(a){if(b={x:a.pageX,y:a.pageY},this.pPageX==b.x&&this.pPageY==b.y)return;this.pPageX=b.x,this.pPageY=b.y}null!=F&&(clearTimeout(F),F=null),!a||UIHelper.isInsideRectangle(b,x)||this.isEditMode()?h.removeClass("lbMouseOut").addClass("lbMouseOver"):h.removeClass("lbMouseOver").addClass("lbMouseOut"),h.removeClass("lbMouseIdle").addClass("lbMouseMoving"),this.isEditMode()||(F=setTimeout(function(){h.removeClass("lbMouseMoving").addClass("lbMouseIdle"),F=null},eb))},this.scrollInfoDivTo=function(a){var b=$(p).height(),c=d();a+c>b&&(a=b-c),a=Math.max(0,a),s.addClass("scrolled"),this.registerTimeout("scroller",function(){s.removeClass("scrolled")},1e3),p.style.top=-a+"px",e()},this.handleInfoDivScroll=function(a,b,c){if(c)b=Math.round(b*-.8*this.getImageDivBounds().h);else if(a){var d=a,e=d.detail,g=d.wheelDelta,h=225,i=h-1;e=e?g&&(f=g/e)?e/f:-e/1.35:g/120,e=1>e?-1>e?(-Math.pow(e,2)-i)/h:e:(Math.pow(e,2)+i)/h,a.delta=Math.min(Math.max(e/2,-1),1),b=-80*a.delta}else b=-80*b;var j=-$(p).position().top+b;this.scrollInfoDivTo(j)},this.handleInfoDivMouseDown=function(a){return G.isDragging=!0,G.draggingStart=a.pageY,$(document).bind("mouseup.lightboxScroller",$.proxy(this.handleInfoDivMouseUp,this)),$(document).bind("mousemove.lightboxScroller",$.proxy(this.handleInfoDivMouseMove,this)),s.addClass("dragged"),a.preventDefault(),!1},this.handleInfoDivMouseMove=function(a){if(G.isDragging){var b=a.pageY-G.draggingStart,c=$(p).height(),e=d(),f=Math.round((G.scrollerTop+b)*(c-e)/(G.totalHeight-G.scrollerHeight));G.draggingStart=a.pageY,this.scrollInfoDivTo(f)}else this.handleInfoDivMouseUp()},this.handleInfoDivMouseUp=function(){G.isDragging=!1,$(document).unbind(".lightboxScroller"),s.removeClass("dragged")},this.setInfoDivEnabled=function(a){I!=a&&(a?($(q).show(),$(m).show()):($(q).hide(),$(m).hide()),I=a,this.notifyPlugins(S))},this.isInfoDivEnabled=function(){return I},this.refresh=function(){this.notifyPlugins(N),p.style.top=0},this.reload=function(a,b){var c=this.getContext();null!=b&&b.length>=1&&b[0]!=c.getName()&&this.recreateContextStack(b),c.setCurrentSpaceId(a),this.refresh()},this.addPlugin=function(a){g.addListener(a),a.setOwner(this)},this.removePlugin=function(a){g.removeListener(a),a.setOwner(null)},this.addImageLayer=function(a){k.appendChild(a)},this.addInfoBox=function(a,b){b?(p.appendChild(a),o.registerContent(b,a)):q.appendChild(a)},this.addFixedAd=function(a,b){t.appendChild(a),o.registerContent(b,a)},this.addActionItem=function(a,b){document.getElementById("lbActions"+b).appendChild(a)},this.addAnchorButton=function(a){m.appendChild(a)},this.setHeader=function(a){n.innerHTML="",n.appendChild(a)},this.notifyPlugins=function(a){g.notifyListeners(function(){this[a]&&this[a]()}),a==N&&this.scrollInfoDivTo(0),o.updateContents(),g.notifyListeners(function(){this[T]&&this[T](a)}),e()},this.resetContext=function(){z=[]},this.recreateContextStack=function(a){this.resetContext();for(var b=0;b<a.length;b++){var c=HZ.data.Contexts.get(a[b]);c&&z.push(c)}this.notifyPlugins(M)},this.pushContext=function(a){z[0]&&z[0].unregisterOwner(),z.unshift(a),a.registerOwner(this),HZ.data.Contexts.get(a.getName())||HZ.data.Contexts.put(a.getName(),a),this.notifyPlugins(M)},this.popContext=function(){if(1!=z.length){var a=z.shift();a&&a.unregisterOwner(),z[0]&&z[0].registerOwner(this),this.notifyPlugins(M)}},this.getContext=function(){return z[0]},this.getContextStack=function(){return z},this.getCurrentSpace=function(){var a,b=this.getContext();return b&&(a=b.getCurrentSpaceId())?HZ.data.Spaces.get(a):null},this.getSpaceImage=function(a,b){var c,d=a.id,e=this.getContext(),f=null;return b=b||0,e&&(d=e.getCurrentSpaceId())&&(c=a.iids[b],f=HZ.data.Images.get(c)),f},this.isFullPageAd=function(){var a=this.getCurrentSpace();return null!=HZ.data.PhotoAds.get(a.id)||null!=HZ.data.PaidProAds.get(a.id)},this.isPaidProAd=function(){var a=this.getCurrentSpace();return null!=HZ.data.PaidProAds.get(a.id)},this.isPhotoAd=function(){var a=this.getCurrentSpace();return null!=HZ.data.PhotoAds.get(a.id)},this.isMarketplaceProduct=function(){var a=this.getCurrentSpace(),b=HZ.data.ProductsInfo.get(a.id);return b&&b.activeMPListing},this.getSpaceDescription=function(){var a=this.getCurrentSpace(),b=a.c;if(!b){var c=HZ.data.ProductsInfo.get(a.id);c&&(b=c.desc)}return b||(b=a.desc),b},this.next=function(){var a=this.getContext();a.next()&&this.notifyPlugins(N)},this.previous=function(){var a=this.getContext();a.previous()&&this.notifyPlugins(N)},this.handleContextChanged=function(){this.notifyPlugins(M)},this.handleImageDataChanged=function(){this.notifyPlugins(O)},this.handleEditDataChanged=function(){this.notifyPlugins(P)},this.handleResize=function(b){w=UIHelper.getScreenBounds();var c=a(),d=Math.max(X,w.w-c.m),e=Math.max(Y,Math.min(w.h-c.m,c.h)),f={x:0,y:Math.max(c.m,Math.round((w.h-e)/2)),w:d,h:e};UIHelper.setBounds(j,f);var g=I?cb:0;n.style.width=f.w-g+"px";var h=UIHelper.getBounds(n);""==n.innerHTML&&(h.h=0),D={x:0,y:h.h,w:f.w-g,h:f.h-h.h},UIHelper.setBounds(k,D),x={x:$(k).offset().left,y:$(k).offset().top,w:D.w,h:D.h};var h=mixin({},D);h.y=h.h-bb,h.h=bb,UIHelper.setBounds(l,h),h.w--,I&&(h=mixin({},f),h.x=h.w-cb,h.y=db,h.w=cb,h.h-=db,UIHelper.setBounds(q,h),UIHelper.setBounds(m,h)),this.notifyPlugins(L),b===!0&&this.notifyPlugins(N)},this.setImageBounds=function(a){E=a},this.getImageBounds=function(){return E},this.getImageDivBounds=function(){return D},this.areActionsEnabled=function(){return K},this.disableActionsDiv=function(){l.style.display="none",K=!1},this.enableActionsDiv=function(){l.style.display="table",K=!0}},HZ.lb.PluginsController=function(){function a(a){return}var b,c,d,e=!0;this.setOwner=function(a){b=a,c=[],d=$("<div id='fullDetails'></div>"),d.append("<input type=checkbox id='fullDetailsCheckbox'> "+_hgt("Full Details")+"</div>"),$("input",d).mousedown(function(a){this.checked=!this.checked,a.stopPropagation(),a.preventDefault()}),d.click($.proxy(this.handleFullDetailsClicked,this))},this.registerContent=function(a,b){c[a]||(c[a]={enabled:!0,divs:[]});var d=c[a];d.divs.push(b)},this.imageResized=function(){},this.imageChanged=function(){for(var a=b.getContext(),d=a.getType(),f=b.getCurrentSpace(),g=(b.isMarketplaceProduct(),HZ.data.PhotoAds.get(f.id),["spaceInfo","spaceOwner","productInfo","projectInfo","questionsInfo","questionsInfo","galleryInfo","comments","ppcAdInfo","bannerAd","paidProInfo","recommendationsHeader","recommendations","productAdInfo","colorPicker","mPAds","relatedProducts"]),h=0;h<g.length;h++)c[g[h]].enabled=!b.isEditMode();if(c.spaceEditor&&(c.spaceEditor.enabled=b.isEditMode()),!b.isEditMode())switch(d){case HZ.lb.Config.CONTEXT_TYPE_IDEABOOK:var i="1"==a.getDescriptor().f;c.spaceInfo.enabled=!f.prod&&(e||!i),c.spaceOwner.enabled=!f.prod,c.productInfo.enabled=f.prod,c.projectInfo.enabled=e||!i,c.questionsInfo.enabled=e||!i;break;case HZ.lb.Config.CONTEXT_TYPE_PROJECT:default:c.spaceInfo.enabled=!f.prod,c.spaceOwner.enabled=!f.prod&&!b.isPaidProAd(),c.productInfo.enabled=f.prod,c.projectInfo.enabled=!0,c.questionsInfo.enabled=!0}c.colorPicker.enabled=HZ.lb.Config.enableColorPicker&&!b.isEditMode()},this.contextChanged=function(){var c=b.getContext(),f=c.getType()==HZ.lb.Config.CONTEXT_TYPE_IDEABOOK&&c.getDescriptor().f;d[0].style.display=f?"inline":"none",a(e||!f)},this.updateContents=function(){for(var a in c)for(var b=c[a],d=0;d<b.divs.length;d++){var e=b.enabled&&""!=b.divs[d].innerHTML;b.divs[d].style.display=e?"block":"none"}},this.handleShowSpaceDetails=function(){e=!e;var c=_hgt(e?"Less info":"More info");HZ.ui.ButtonFactory.setTitle(c,showSpaceInfoButton.id),b.refresh(),a(e)},this.handleFullDetailsClicked=function(){var a=$("input",d)[0];a.checked=!a.checked,e=a.checked,b.refresh()},this.jumpToSpaceInfo=function(){},this.jumpToProject=function(){},this.jumpToQuestions=function(){},this.jumpToRecommendations=function(){}},HZ.lb.plugins.ImageViewer=new function(){function a(a,b,c){var d,e=$(a),f="rotate("+b+"deg)";UIHelper.isIE8?(d=b/90,e.css({"margin-left":c/2+"px","margin-top":-c/2+"px","-ms-filter":"progid:DXImageTransform.Microsoft.BasicImage(rotation="+d+")",filter:"progid:DXImageTransform.Microsoft.BasicImage(rotation="+d+")"})):e.css({"-webkit-transform":f,"-moz-transform":f,"-ms-transform":f,"-o-transform":f,transform:f})}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q=0,r={x:0,y:0,w:200,h:200,thumb:2},s={x:0,y:0,w:640,h:640,thumb:4},t={thumb:9},u=.05,v=40,w='<div id="lbNotification"><div class="logo"></div><a id="lbCloseButton" href="javascript:;"></a><a href="'+HZ.utils.Config.viewShoppingCartUrl+'" class="cartInfo" title="'+_hgt("View Your Shopping Cart")+'"><img src="'+HZ.utils.Config.emptyGifData+'" class="cartIcon" ondragstart="return false;" onmousedown="preventImageDrag(event)"/><span class="count ms500"></span><span class="viewCartMsg"></span></a></div>';this.setOwner=function(a){b=a,c=document.createElement("div"),c.id="lbImageViewLayer",c.innerHTML="<div id='lbImageViewBg'></div><img src='"+HZ.utils.Config.emptyGifData+"' id='lbImageView0' class='lbImageView' ondragstart='return false;' onmousedown='preventImageDrag(event)'/><img src='"+HZ.utils.Config.emptyGifData+"' id='lbImageView1' class='lbImageView' ondragstart='return false;' onmousedown='preventImageDrag(event)'/><img src='"+HZ.utils.Config.emptyGifData+"' id='lbImageView2' class='lbImageView' ondragstart='return false;' onmousedown='preventImageDrag(event)'/><img src='"+HZ.utils.Config.emptyGifData+"' id='lbImageViewBeforePhotoIndicator' class='before-tag-large' ondragstart='return false;' onmousedown='preventImageDrag(event)'/>",0/0+HZ.utils.Config.emptyGifData+"' id='lbImageViewMarketplaceIndicator' ondragstart='return false;' onmousedown='preventImageDrag(event)'/>",b.addImageLayer(c),i=[];for(var e=0;3>e;e++)i[e]=document.getElementById("lbImageView"+e),$(i[e]).load($.proxy(this.imageLoaded,this));d=document.getElementById("lbImageViewBg"),$("#lbImageViewLayer").disableSelection(),$("#lbImageView").disableSelection(),j=0,n=$("#lbImageViewMarketplaceIndicator"),o=$("#lbImageViewBeforePhotoIndicator");var g=$(w);f=g[0],b.addAnchorButton(f),g.find("#lbCloseButton").click($.proxy(function(a){return a.stopPropagation(),b.hide(),!1},b))},this.onCartUpdate=function(a,b){this.updateCartCount(b.cartCount)},this.updateCartCount=function(a){if(f){var b=$(f).find(".cartInfo"),a=a>9?"9+":a;0==a?b.hide():(b.find(".count").html(a),b.show())}},this.updateImages=function(){i&&i.length>2&&(k=i[j],l=i[(j+2)%3],m=i[(j+1)%3],m.src=HZ.utils.Config.emptyGifData)},this.replaceActiveImage=function(a){k.src=a},this.getDimsLimit=function(a){var b=t;return a.bmu&&(b=HZ.data.CurrentSessionUser&&(HZ.data.CurrentSessionUser.getUserId()==a.au||HZ.data.CurrentSessionUser.isIdeabookCollaborator)?s:r),b},this.refresh=function(c){var e,f=b.getCurrentSpace(),i=b.getSpaceImage(f,q);if(f&&f.ift&&!i&&(i={w:186,h:245,bg:1},f.prod=!0),f&&i){var n,r=b.getImageDivBounds(),s={w:i.w,h:i.h},t=this.getDimsLimit(f,i),w=0,x=0,y=i.rotation||0,z=y%180>0,A=0,B=f.prod&&i.bg||b.isMarketplaceProduct();if(z&&(s={w:s.h,h:s.w}),t.w&&(s=HZ.ui.Utils.getBoundRect(s,t)),i.bg?(w=Math.round(u*r.w),x=Math.round(u*r.h)):b.isEditMode()&&(w=v,x=v),r={x:r.x,y:r.y,w:r.w-2*w,h:r.h-2*x},n=HZ.ui.Utils.getBoundRect(s,r),z&&(A=n.h-n.w,n.w+=A,n.h-=A,n.x-=A/2,n.y+=A/2),n.x+=w,n.y+=x,c||null==k){if(j=(j+1)%3,this.updateImages(),c&&HZ.lb.Config.TRACK_IMPRESSIONS){var C={spaceId:f.id};g?C.previousSpaceId=g:C.isFirstLightbox=!0,HZ.utils.Logger.sendEventLogLightweight("lb_impression",C)}$("#lbMain").attr("objId",f.id),k.className="lbImageView currentImage",l.className=h&&h.isImageAvailable(f.id)?"lbImageView discardedImage":"lbImageView previousImage",m.className="lbImageView discardedImage";var D=HZ.data.Categories.getCategoryById(f.cat),E=HZ.utils.Styles.getStyleName(f.s);e=HZ.utils.Links.getSpaceImageSeoThumbUrl(f.id,t.thumb,E,D,q),UIHelper.setBounds(k,n),a(k,y,A),k.src=e}else UIHelper.setBounds(k,n),a(k,y,A);if(d.style.display=B?"block":"none",B&&(n=b.getImageDivBounds(),n.x=0,n.y=0,UIHelper.setBounds(d,n)),b.setImageBounds(n),this.updateMarketplaceIndicator(),o.css("display",f.bt?"block":"none").css("top",n.y).css("left",n.x+10),p){var F=UIHelper.getBounds(p).w,G=-(r.w/2+F/2);p.style.left=G+"px"}}},this.imageDataUpdated=function(){this.updateMarketplaceIndicator()},this.updateMarketplaceIndicator=function(){if(b.isMarketplaceProduct()){var a=b.getCurrentSpace(),c=HZ.data.ProductsInfo.get(a.id),d=c.buyable&&c.avail,e=b.getImageBounds();n.toggleClass("na",!d).show().css({top:e.y+"px",left:e.x+"px"})}else n.hide()},this.imageChanged=function(){var a=b.getCurrentSpace();if(q=0,g!=a.id&&this.refresh(!0),g=a.id,e)if(a&&!a.bmu){var c=(HZ.data.Categories.getCategoryById(a.cat),HZ.utils.Links.getSpaceLinkWithSEO(a.id)),d=c.substring(7,80);e.innerHTML="<a href='"+c+"' target='_sitePhoto'>"+d+"</a>"}else e.innerHTML=""},this.setActiveSpaceImageIndex=function(a){q=a,this.refresh(!0)},this.imageResized=function(){this.refresh(!1)},this.imageLoaded=function(){l&&(l.className="discardedImage")},this.lightboxLoaded=function(){g=null},this.lightboxUnloaded=function(){k.src=HZ.utils.Config.emptyGifData,l.src=HZ.utils.Config.emptyGifData,g=null},this.setImageCache=function(a){h=a}},HZ.lb.plugins.NavigationLayer=function(){var a,b,c,d,e,f=29,g=54,h=90;this.setOwner=function(f){a=f;var g=document.createElement("div");g.id="lbNavigationLayer",g.className="fadeOutOnIdle trackMe",g.innerHTML="<i id='lbNavigationLeft' compId='navLeft'><i id='lbNavigationLeftArrow'></i></i><i id='lbNavigationRight' compId='navRight'><i id='lbNavigationRightArrow'></i></i>",g.oncontextmenu=$.proxy(this.handleContextMenu,this),a.addImageLayer(g),b=$("#lbNavigationLeft").click($.proxy(this.handlePrevious,this)).disableSelection(),d=$("#lbNavigationLeftArrow"),c=$("#lbNavigationRight").click($.proxy(this.handleNext,this)).disableSelection(),e=$("#lbNavigationRightArrow")},this.handleNext=function(){a.next()},this.handlePrevious=function(){a.previous()},this.handleContextMenu=function(){var b=a.getCurrentSpace();return HZ.spaceActions.EmbedDialog.setSpaceId(b.id),a.showDialog(HZ.spaceActions.EmbedDialog),!1},this.contextChanged=function(){this.imageChanged()},this.imageResized=function(){var i=a.getImageDivBounds();h=Math.round(Math.max(90,.15*i.w)),UIHelper.setBounds(b[0],0,0,h,i.h),UIHelper.setBounds(c[0],h,0,i.w-h,i.h);var j={x:20,y:Math.round(i.h/2)-20,w:f,h:g},k={x:i.w-20-f-h,y:Math.round(i.h/2)-g/2,w:f,h:g};UIHelper.setBounds(d[0],j),UIHelper.setBounds(e[0],k)},this.imageChanged=function(){var b=a.getContext();b&&(e.css({display:b.hasNext()?"inline":"none"}),d.css({display:b.hasPrevious()?"inline":"none"}))}},HZ.lb.plugins.SpaceDataLoader={owner:null,setOwner:function(a){this.owner=a},imageChanged:function(){var a=[this.owner.getCurrentSpace()],b=this.owner.getContext().getNextSpaceIds(1);b[0]&&a.push(HZ.data.Spaces.get(b[0]));for(var c=0;c<a.length;c++){var d=a[c];if(!d.fullyLoaded){var e=HZ.ajaz.Services.DETAIL_LEVEL_ALL_WITH_AD_SPACE_INFO;null!=HZ.data.PaidProAds.get(d.id)&&(e=HZ.ajaz.Services.DETAIL_LEVEL_BASE_SPACE_INFO);var f=this.owner.getContext();f.getType()==HZ.lb.Config.CONTEXT_TYPE_IDEABOOK&&f.getDescriptor()[HZ.lb.Config.DESCRIPTOR_FIELD_IS_GALLERY_FEATURED]&&(e=HZ.ajaz.Services.DETAIL_LEVEL_EXTENDED_SPACE_INFO),HZ.ajaz.Services.getSpaceData(d.id,e,$.proxy(this.handleData,this))}}},handleData:function(a){if(HZ.lb.Utils.validateData(a),a&&a.results){var b={questions:HZ.data.Questions,imageTags:HZ.data.ImageTags,recommendations:HZ.data.Recommendations,productAds:HZ.data.ProductAds,ppcAds:HZ.data.PPCAds,bannerAds:HZ.data.BannerAds,houzzImpTracking:HZ.data.HouzzImpTracking,houzzClkTracking:HZ.data.HouzzClkTracking,productInfo:HZ.data.ProductsInfo,colorPaletteSource:HZ.data.ColorPaletteSource,colorPickerAd:HZ.data.ColorPickerAd};for(var c in b){var d=a.results[c];if(d)for(var e in d)b[c].put(e,d[e])}if(a.results.project)for(var e in a.results.project)HZ.data.Projects.get(a.results.project[e].pid)||HZ.data.Projects.put(a.results.project[e].pid,a.results.project[e]);var f=a.results.spaces;if(f)for(var g in f)HZ.data.Spaces.get(g)||HZ.data.Spaces.put(g,f[g]);if(f=a.results.spaceInfo)for(var g in f){i=HZ.data.Spaces.get(g)||{};var h=f[g];i.b&&(h.b=i.b,void 0!==i.bp&&(h.bp=i.bp),void 0!==i.braw&&(h.braw=i.braw)),HZ.data.Spaces.put(g,h)}this.populateStandardCollections(a);var i=HZ.data.Spaces.get(a.results.sid);i.fullyLoaded=!0,this.owner.handleImageDataChanged()}},loadSpaceBuzz:function(a){this.loadSpaceBuzzCallback=a;var b=this.owner.getCurrentSpace();b.commentsLoaded||HZ.ajaz.Services.getSpaceBuzz(b.id,$.proxy(this.handleBuzzData,this))},handleBuzzData:function(a){if(HZ.lb.Utils.validateData(a),a&&a.results){var b={},c=HZ.data.Spaces.get(a.results.sid);if(c.commentsLoaded=!0,a.results.fbuzzes)for(var d in a.results.fbuzzes)b[d]=b[d]||{},b[d].fg=a.results.fbuzzes[d];if(a.results.ubuzzes)for(var d in a.results.ubuzzes)b[d]=b[d]||{},b[d].ug=a.results.ubuzzes[d];if(b)for(var d in b)HZ.data.Comments.put(d,b[d]);this.populateStandardCollections(a)}this.loadSpaceBuzzCallback()},populateStandardCollections:function(a){var b={images:HZ.data.Images,users:HZ.data.Users,productVariationInfo:HZ.data.Variations};for(var c in b)a.results[c]&&b[c].addAll(a.results[c])}};var lightbox=new HZ.lb.Lightbox;lightbox.init(),lightbox.addPlugin(HZ.lb.plugins.SpaceDataLoader),lightbox.addPlugin(HZ.lb.plugins.ImageViewer),lightbox.addPlugin(new HZ.lb.plugins.NavigationLayer);

window.hzmr.push("lightbox:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightbox.js  **************/
/************* Start productVariation.js for locale en-US **************/
try {HZ.ns("HZ.productVariation"),HZ.productVariation.Manager=new function(){function a(){var a=$(this);a.siblings(".selected").removeClass("selected"),a.addClass("selected"),m=b();var d=a.attr("variationId");c(d)}function b(){var a=[];return $("a.variationOption.selected").each(function(){var b=$(this),c=b.attr("variationId"),d=b.attr("optionValue");a[c]=d}),a}function c(a){var b=[];b.push({id:a,value:m[a]});for(var c in m)c!=a&&b.push({id:c,value:m[c]});var e=5;l||(l=-1),HZ.ajaz.Services.getSpaceByVariations(k,l,b,e,d)}function d(a){var b=!1;a&&a.results&&a.results.spaceInfo&&(e(a),a&&a.results.productInfo&&a.results.productInfo[k]&&(f(a),a.results.productVariationInfo&&a.results.productVariationInfo[k]&&(g(a),h(),n.updateView(k),b=!0))),b||j(_hgt("Error!"),_hgt("The variation selected is invalid, please refresh page and try again"))}function e(a){k=a.results.sid,HZ.data.Spaces.addAll(a.results.spaceInfo),HZ.data.Spaces.addAll(a.results.spaces),HZ.data.Images.addAll(a.results.images),HZ.data.Users.addAll(a.results.users)}function f(a){a.results.productInfo[k];HZ.data.ProductsInfo.addAll(a.results.productInfo)}function g(a){HZ.data.Variations.addAll(a.results.productVariationInfo),m=HZ.data.Variations.get(k).curVar}function h(){var a,b=HZ.data.Variations.get(k).availVar;for(a=0;a<b.length;a++)i(b[a])}function i(a){for(var b=a.id,c=$("#variationSelect_"+b),d=a.options,e=0;e<d.length;e++){var f=d[e],g=f.name,h=1==f.avail,i=g==m[b],j=c.find('a[optionValue="'+g.replace(/"/g,'\\"')+'"]');h?j.removeClass("unavailable"):j.addClass("unavailable"),i?j.addClass("selected"):j.removeClass("selected")}}function j(a,b){HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert(a,b)}var k,l,m,n;this.setRenderer=function(a){n=a},this.setSpaceId=function(a){k=a},this.setVendorListingId=function(a){l=a},this.initUI=function(){$(".variationSelectors").on("click","a.variationOption",a)}};

window.hzmr.push("productVariation:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End productVariation.js  **************/
/************* Start lightboxAdPlugins.js for locale en-US **************/
try {HZ.lb.plugins.PPCAdInfo=function(){function a(){var a=b.getImageBounds(),c=$(d[0]),e=a.x+a.w-200,f=a.y+a.h-100;c.offset({left:e,top:f})}var b,c,d;this.setOwner=function(a){b=a,c=document.createElement("div"),c.id="lbPPCAds",b.addInfoBox(c,"ppcAdInfo");var e=document.createElement("div");e.id="lbPPCVisitStoreLayer",e.innerHTML="<div id='lbPPCVisitStore' class='icon-wrap spaceCallToAction'>"+_hgt("Visit Store")+"</div>",b.addImageLayer(e),d=$("#lbPPCVisitStore").click($.proxy(this.handleVisitStoreClicked,this)).disableSelection()},this.imageResized=function(){a()},this.imageDataUpdated=function(){this.imageChanged()},this.infoDivToggled=function(){this.imageChanged()},this.imageChanged=function(){var e,f=b.getCurrentSpace(),g=b.getContext(),h="";if(d.css({display:"none"}),!b.isEditMode()){f&&(e=HZ.data.PPCAds.get(f.id));var i=b.isInfoDivEnabled();if(g.getType()==HZ.lb.Config.CONTEXT_TYPE_IDEABOOK&&g.getDescriptor()[HZ.lb.Config.DESCRIPTOR_FIELD_IS_GALLERY_FEATURED]&&(i=!1),e&&i){if(e.isPPCProduct&&!b.isMarketplaceProduct()&&(a(),d.css({display:"inline"})),e.products&&e.products.length>0){h="<div class='lbPPCHeader tiny-text'>Sponsored</div>";for(var j=0;j<e.products.length;j++){var k=e.products[j],l=HZ.utils.Links.getSpaceImageUrl(k.sid,HZ.lb.Config.PPC_AD_IMG_WIDTH,HZ.lb.Config.PPC_AD_IMG_HEIGHT,1),m=k.tlink,n=k.sid,o=k.t,p="<b>"+k.p+"</b>",q="";p&&(p+=" | ");var r=HZ.data.Users.get(k.vid);r&&(q=r.d),q&&(p+=q),p.length>HZ.lb.Config.PPC_AD_INFO_LENGTH&&(p=q);var s=2,t="";j%s==s-1&&(t="lbPPCRowEnd "),t+="lbPPC";var u="<div class='"+t+"'><div class='lbPPCThumb'><a id='ppc"+n+"' class='noHoverLink'  rel='nofollow' target='_blank' href='"+m+"'><img class='lbPPCImg' src='"+l+"'/><div class='lbPPCOverlay'><div class='lbPPCOverlayBG'></div><div class='lbPPCOverlayText bold-text icon-wrap'>"+_hgt("Visit Store")+" <span class='more-icon'></span></div></div></a></div><div class='lbPPCTitle small-text'><p class='lbPPCTitle'>"+o+"</p></div><div class='lbPPCInfo small-text'><p class='lbPPCInfo'>"+p+"</p></div></div>";h+=u}}e.impTrkLink&&HZ.lb.Utils.registerTrackingUrl(e.impTrkLink)}c.innerHTML=h}},this.handleVisitStoreClicked=function(){var a=b.getCurrentSpace(),c=a.l,d=HZ.data.PPCAds.get(a.id);d&&d.isPPCProduct&&d.ppcProductUrl&&(c=d.ppcProductUrl),window.open(c)}},HZ.lb.plugins.ProductAdInfo=function(){var a,b;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbProductAds",$(b).attr("scopeid","lightboxBrandAds").addClass("trackMe"),a.addInfoBox(b,"productAdInfo")},this.imageDataUpdated=function(){this.imageChanged()},this.infoDivToggled=function(){this.imageChanged()},this.imageChanged=function(){var c,d=a.getCurrentSpace(),e=!1,f="";if(a.isInfoDivEnabled()&&($(b).empty(),d&&HZ.data.ProductAds.get(d.id)&&(c=HZ.data.PhotoAds.get(d.id),c?e=!0:c=HZ.data.ProductAds.get(d.id)),c&&c.products&&c.products.length>0&&!c.mpAd)){if(e&&(f="<div class='smallTitle'>"+_hgt("Sponsored")+"</div>"),c.adHtml){var g=$(c.adHtml);c.adHtml="<div>"+g.html()+"</div>"}f+="<div class = 'adHtml'>"+c.adHtml+"</div>",f+="<div class='title'>"+_hgt("Products in this Photo:")+"</div>",this.renderBrandAds(c,f),HZ.lb.Utils.registerTrackingUrl(c.impTrkLink)}},this.renderBrandAds=function(a,c){var d=$(b);if(d.empty().append($(c)),a&&a.products)for(var e=0;e<a.products.length;e++){var f=a.products[e],g=f.sid,h=HZ.data.Spaces.get(g);if(h){var i=133,j=133,k=HZ.utils.Links.getSpaceImageUrl(g,i,j,!1),l=f.tlink,m=HZ.utils.Links.getSpaceLinkWithSEO(h.id),n="pLink_"+g,o=$('<div class="lbBrandAdProduct"><div class="imageContainer" title="'+_hgt("Save to ideabook")+'" compid="addToIdeabook"><div class="image" style="background-image:url('+k+')"></div></div><div class="detailContainer"><h3><a href="'+m+'" target="_blank">'+h.t+'</a></h3><a id="'+n+'" href="'+l+'" class="hzBtn primary" rel="noFollow" target="_blank">'+_hgt("Visit Store")+' <span class="more-icon"></span></a></div></div>');d.append(o);var p=o.children(".imageContainer");p.append($(HZ.ui.ButtonFactory.createGrayIconButton("",null,"hz-tall-button","hzi-Add-Photo-Button","","addToIdeabook"))),p.click(h.id,this.handleProdAddToIdeabookClick.bind(this))}}},this.handleProdAddToIdeabookClick=function(b){if(a.isSignupMode())a.showLoginDialog();else{var c=b.data;HZ.spaceActions.AddToIdeabookDialog.init(c),a.showDialog(HZ.spaceActions.AddToIdeabookDialog)}},this.lightboxLoaded=function(){var b,c=a.getCurrentSpace();c&&HZ.data.PhotoAds.get(c.id)&&(b=HZ.data.PhotoAds.get(c.id),b.clkTrkLink&&HZ.lb.Utils.registerTrackingUrl(b.clkTrkLink))}},HZ.lb.plugins.BannerAds=function(){var a,b;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbBannerAd",a.addFixedAd(b,"bannerAd")},this.imageDataUpdated=function(){this.imageChanged()},this.infoDivToggled=function(){this.imageChanged()},this.imageChanged=function(){var c,d=a.getCurrentSpace(),e="";if(a.isInfoDivEnabled()){if(d&&HZ.data.BannerAds.get(d.id)&&(c=HZ.data.BannerAds.get(d.id))){e+="<a href='"+c.tlink+"' target='_blank'><img src='"+c.imageUrl+"' /></a>";for(var f=0;c.impTrkLinks&&f<c.impTrkLinks.length;f++)HZ.lb.Utils.registerTrackingUrl(c.impTrkLinks[f])}b.innerHTML=e}}},HZ.lb.plugins.PaidProInfo=function(){function a(){var a=b.getImageBounds(),c=$(d[0]),e=a.x+a.w-155,f=a.y+a.h-100;c.offset({left:e,top:f})}var b,c,d;this.setOwner=function(a){b=a,c=document.createElement("div"),c.id="lbPaidProInfo",b.addInfoBox(c,"paidProInfo");var e=document.createElement("a");e.id="lbPaidProVisitProfileLayer",e.innerHTML="<div id='visitProfileOverlay' class='icon-wrap spaceCallToAction'>"+_hgt("See My Projects")+"</div>",b.addImageLayer(e),d=$("#visitProfileOverlay").click($.proxy(this.handleVisitProfileClicked,this)).disableSelection()},this.imageResized=function(){a()},this.infoDivToggled=function(){this.imageChanged()},this.imageChanged=function(){var e=b.getCurrentSpace(),f="";d.css({display:"none"});var g=HZ.data.PaidProAds.get(e.id);if(g&&g.proName&&g.proShortDesc&&g.proLongDesc){var h=g.proProfileLink,i=HZ.ui.render.User.getUserImageHtml(e.ow,!0,h),j=HZ.ui.render.User.getUserHtml(e.ow,!0,h),k=g.rating,l=!1;if(d.css({display:"inline"}),a(),b.isInfoDivEnabled()){if(f='<div class="proFace"><div class="sponsoredPhoto">'+_hgt("Sponsored")+'</div><div class="proThumb">'+i+'</div><div class="proName">'+j+"</div>",k>0&&(f+='<div class="proRating"><div class="classification"><div class="cover"></div><div class="progress" style="width:'+2*k+'%;"></div></div></div>'),f+='</div><div class="proDescriptionShort">'+g.proShortDesc+'</div><div class="proDescription">'+g.proLongDesc+"</div>",g.proOffers&&g.proOffers.length>0){var m=!g.proOffersDisc||g.proOffersDisc.length<=0?"proOffers offersBottomMargin":"proOffers";f+='<div class="'+m+'">'+g.proOffers,f+='<div class="proOffersContacts"><div class="proOffersContactIcon proPhoneIcon proContactIcon"></div><div class="proContactText">'+g.proPhone+"</div></div>",g.showProEmail&&(l=!0),f+="</div>",g.proOffersDisc&&g.proOffersDisc.length>0&&(f+='<div class="proOffersDisclaimer offersBottomMargin">'+g.proOffersDisc+"</div>")}var n=g.proCoverPhotos;f+='<div class="lbPaidProPhotos">';for(var o=0;o<Math.min(3,n.length);o++)f+='<a target="_blank" href="'+h+'"><img src="'+HZ.utils.Links.getSpaceImageUrl(n[o],94,94,!1)+'"></a>';f+="</div>",f+='<div class="visitProfile"><a target="_blank" class="hzBtn primary colorLink icon-wrap" href="'+h+'">'+_hgt("View Portfolio")+' <span class="more-icon"></span></a></div>',HZ.lb.Utils.registerTrackingUrl(g.impTrkLink)}}if(c.innerHTML=f,l&&!$("#contactPro")[0]){var p=document.createElement("a");p.id="contactPro",p.innerHTML='<div class="proOffersContactIcon proEmailIcon proContactIcon"></div><div class="proContactText">'+_hgt("Email Us")+"</div></a>",$(".proOffersContacts").append(p),$("#contactPro").click($.proxy(this.handleContactProClicked,this)).disableSelection()}},this.handleVisitProfileClicked=function(){var a,c=b.getCurrentSpace(),d=HZ.data.PaidProAds.get(c.id);d&&d.proName&&d.proShortDesc&&d.proLongDesc&&(a=d.proProfileLink,window.open(a))},this.handleContactProClicked=function(){var a=b.getCurrentSpace(),c=HZ.data.PaidProAds.get(a.id);if(c&&c.proName&&c.proOffers&&c.proOffers.length>0&&c.showProEmail){{var d=c.proUserName,e=c.proName,f=c.sessionType;c.showWarning}0!=f?(HZ.dialogs.ContactProDialog||(HZ.dialogs.ContactProDialog=new HZ.email.ContactProDialog),HZ.dialogs.ContactProDialog.prepare({toUserName:d,toUserDisplayName:e,subject:_hgt("Houzz project inquiry"),message:""}),b.showDialog(HZ.dialogs.ContactProDialog)):(HZ.dialogs.GuestContactProDialog||(HZ.dialogs.GuestContactProDialog=new HZ.email.GuestContactProDialog),HZ.dialogs.GuestContactProDialog.prepare({toUserName:d,toUserDisplayName:e,subject:_hgt("Houzz project inquiry"),message:""}),b.showDialog(HZ.dialogs.GuestContactProDialog))}}},HZ.lb.plugins.TrackImpression=function(){var a;this.setOwner=function(b){a=b},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var b,c=a.getCurrentSpace();if(c&&HZ.data.HouzzImpTracking.get(c.id)&&(b=HZ.data.HouzzImpTracking.get(c.id),b&&b.length>0))for(var d=0;d<b.length;d++){var e=b[d];e&&e.length>0&&HZ.lb.Utils.registerTrackingUrl(e)}}},HZ.lb.plugins.TrackClick=function(){var a;this.setOwner=function(b){a=b},this.lightboxLoaded=function(){var b,c=a.getCurrentSpace();if(c&&HZ.data.HouzzClkTracking.get(c.id)&&(b=HZ.data.HouzzClkTracking.get(c.id))){var d=b[c.id];d&&d.length>0&&HZ.lb.Utils.registerTrackingUrl(d)}}},HZ.lb.plugins.MarketPlaceAds=new function(){var a,b;this.setOwner=function(c){b=c,a=document.createElement("div"),a.id="lbMPAds",b.addInfoBox(a,"mPAds")},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var c=$(a);c.empty();var d=b.getCurrentSpace(),e=HZ.data.PhotoAds.get(d.id);if(d&&e&&e.mpAd&&0!=e.products.length){var f=e.products,g=[],h=$('<div class="marketPlaceProductsListTitle bold-text">'+_hgt("Products in this photo:")+"</div>");c.append(h);for(var i=0,j=0;j<f.length;j++){var k=HZ.data.Spaces.get(f[j].sid),l=HZ.data.ProductsInfo.get(f[j].sid);if(l&&l.mpListing&&l.buyable){var m=!l.avail,n=100,o="<div class='ad-item' sid='"+k.id+"'><div class='pull-left'><a class='trackMe' scopeId='lbMpAd' objId='"+k.id+"' posId='"+i+"' compId='mpAdImg'><img class='prod mpProd' src='"+HZ.utils.Links.getSpaceImageUrl(k.id,n,n,!1)+"' width='"+n+"' height='"+n+"'/></a></div><div class='ad-item-detail'><div class='ad-item-title'><a class='trackMe' scopeId='lbMpAd' objId='"+k.id+"' posId='"+i+"' compId='mpAdTitle'>"+UIHelper.truncate(k.t,65,UIHelper.TRUNCATE_BR,!0)+"</a></div>";o+=m?"<a class='ad-item-btn hzBtn large secondary disabled outOfStock'><span class='label-oos'>"+_hgt("Sold Out")+"</span></a>":"<a class='ad-item-btn hzBtn large primary trackMe' scopeId='lbMpAd' objId='"+k.id+"' posId='"+i+"' compId='mpAdBtn'><span class='button-icon uiButtonIconAddToCart'></span><span class='label-buy'>"+_hgt("Buy")+"</span><img sid='"+k.id+"'/></a>",o+="</div></div>",c.append(o),g.push(k.id),i++}}e.impTrkLink&&HZ.lb.Utils.registerTrackingUrl(e.impTrkLink),$.proxy(this.handleClick,this);var p=this;c.unbind().on("click",".ad-item img, .ad-item-btn:not(.disabled), .ad-item-title",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest(".ad-item").attr("sid");p.handleClick(b,g)}),0==i&&c.empty()}},this.handleClick=function(a,c){var d={};d[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=a;var e=new HZ.lb.Context("marketPlaceAds_"+a,HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS,d,c,c.length,c.indexOf(a),-1);e.setCurrentSpaceId(a),b.pushContext(e),b.refresh()}},HZ.lb.plugins.RelatedProducts=new function(){var a,b;this.setOwner=function(c){b=c,a=document.createElement("div"),a.id="lbRelatedProducts",b.addInfoBox(a,"relatedProducts")},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var c=$(a);c.empty();var d=b.getCurrentSpace(),e=HZ.data.PhotoAds.get(d.id);if(e&&e.mpAd){var f=e.relatedProductList;if(f&&0!=f.length){var g=[],h=$('<div class="marketPlaceProductsListTitle bold-text">'+_hgt("Related Products:")+"</div>");c.append(h);for(var i=0,j=0;j<f.length;j++){var k=HZ.data.Spaces.get(f[j].id),l=HZ.data.ProductsInfo.get(k.id);if(l){if(!l.buyable||!l.avail)continue;var m=100,n="<div class='ad-item' sid='"+k.id+"'><div class='pull-left'><a class='trackMe' scopeId='lbMpAdRelated' objId='"+k.id+"' posId='"+i+"' compId='mpAdImg'><img class='prod mpProd' src='"+HZ.utils.Links.getSpaceImageUrl(k.id,m,m,!1)+"' width='"+m+"' height='"+m+"'/></a></div><div class='ad-item-detail'><div class='ad-item-title'><a class='trackMe' scopeId='lbMpAdRelated' objId='"+k.id+"' posId='"+i+"' compId='mpAdTitle'>"+UIHelper.truncate(k.t,58,UIHelper.TRUNCATE_BR,!0)+"</a></div>";n+="<a class='ad-item-btn hzBtn large primary trackMe' scopeId='lbMpAdRelated' objId='"+k.id+"' posId='"+i+"' compId='mpAdBtn'><span class='button-icon uiButtonIconAddToCart'></span><span class='label-buy'>"+_hgt("Buy")+"</span><img sid='"+k.id+"'/></a>",n+="</div></div>",c.append(n),g.push(k.id),i++}}$.proxy(this.handleClick,this);var o=this;c.unbind().on("click",".ad-item img, .ad-item-btn:not(.disabled), .ad-item-title",function(a){a.preventDefault(),a.stopPropagation();var b=$(this).closest(".ad-item").attr("sid");o.handleClick(b,g)}),0==i&&c.empty()}}},this.handleClick=function(a,c){var d={};d[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=a;var e=new HZ.lb.Context("marketPlaceAds_"+a,HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS,d,c,c.length,c.indexOf(a),-1);e.setCurrentSpaceId(a),b.pushContext(e),b.refresh()}},HZ.lb.plugins.Gtm=new function(){function a(){var a=!1;if(b.isMarketplaceProduct()){var d=HZ.data.ProductsInfo.get(c.id);if(d){var e={hasaccount:HZ.data.CurrentSessionUser?"y":"n",ecomm_prodid:"HZ_"+c.id,ecomm_category:c.cat};c.amt&&c.cuid&&(e.ecomm_pvalue=Math.round(100*c.amt)/100,e.ecomm_currency=HZ.data.Currencies.get(c.cuid)),HZ.utils.Gtm.pushData("view_product","product",e),a=!0}}return a}var b,c,d;this.setOwner=function(a){b=a},this.imageDataUpdated=function(){c=b.getCurrentSpace(),c.id==d&&this.imageChanged()},this.imageChanged=function(){c=b.getCurrentSpace(),d=c.id,a()&&(d=null)}};

window.hzmr.push("lightboxAdPlugins:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightboxAdPlugins.js  **************/
/************* Start lightboxPlugins.js for locale en-US **************/
try {HZ.lb.plugins.SpaceInfo=function(){var a,b,c='<dt class="key"><b>%LABEL%</b></dt><dd class="value">%VALUE%</dd>';this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbSpaceInfo",a.addInfoBox(b,"spaceInfo")},this.imageChanged=function(){var d,e,f,g=a.getCurrentSpace(),h=$(b).empty(),i=a.getContext();if(g&&!a.isFullPageAd()){var j;i.getType()==HZ.lb.Config.CONTEXT_TYPE_IDEABOOK?($(b).addClass("ideabookContext"),j="spaceTitle med-header"):($(b).removeClass("ideabookContext"),j="spaceTitle large-header"),e=HZ.utils.Styles.getStyleName(g.s),f=HZ.data.Categories.getCategoryById(g.cat),d=HZ.utils.Links.getSpaceLinkWithSEO(g.id),g.t&&h.append("<div class='"+j+"'><a target='_blank' href='"+d+"'>"+g.t+"</a></div>"),h.append("<div class='spaceDescription small-text'></div>");var k=$(".spaceDescription").peekable(),l=a.getSpaceDescription();l?k.peekable("show").peekable("setContent",UIHelper.stringToHtml(UIHelper.convertLinksInString(l))):k.peekable("hide");var m,n=$('<div class="photoInfo"><dl class="attributes horizontal-list normal-text"></dl></div>'),o=n.find(".attributes"),p=0;if(g.bmu)g.l&&(d="<span class='spaceLink'><a class='icon-wrap' href='"+g.l+"' rel='nofollow' target=_blank>View on Original Site <span class='more-icon'></span></a></span>",m=HZ.utils.Html.template(c,{LABEL:_hgt("URL"),VALUE:d}),p++);else if(!a.isMarketplaceProduct()&&g.prod);else if(g.l){var q=g.l.replace(/https?:\/\//,"");d="<div class='spaceLink'><a href='"+g.tl+"' rel='nofollow' target=_blank>"+q+"</a></div>",m=HZ.utils.Html.template(c,{LABEL:_hgt("URL"),VALUE:d}),p++}if(m&&(o.append($(m)),p++),f&&4!=f.categoryId&&(o.append(HZ.utils.Html.template(c,{LABEL:_hgt("Category"),VALUE:UIHelper.ucwords(f.name)})),p++),e&&(o.append(HZ.utils.Html.template(c,{LABEL:_hgt("Style"),VALUE:UIHelper.ucwords(e)})),p++),!g.loc||"undefined"!=typeof g.srcs&&0!==parseInt(g.srcs)?g.ma&&(o.append(HZ.utils.Html.template(c,{LABEL:_hgt("Location"),VALUE:g.ma})),p++):(o.append(HZ.utils.Html.template(c,{LABEL:_hgt("Location"),VALUE:g.loc})),p++),g.f&&g.au&&g.au!=g.ow&&(!g.prod||!g.vl)){var r="<span class='userName'>"+HZ.ui.render.User.getUsersHtml(g.au,!0)+"</span>";o.append(HZ.utils.Html.template(c,{LABEL:_hgt("Uploaded by"),VALUE:r})),p++}p&&h.append(n)}},this.imageDataUpdated=function(){var b=a.getCurrentSpace(),c=$(".spaceDescription");b.prod||a.isMarketplaceProduct()||(b.c?c.peekable("show").peekable("setContent",UIHelper.stringToHtml(UIHelper.convertLinksInString(b.c))):c.peekable("hide"))},this.pluginAfterShown=function(a){"imageChanged"==a&&$(".spaceDescription").peekable("refresh")}},HZ.lb.plugins.ProductInfo=new function(){function a(a){var b=HZ.data.ProductsInfo.get(a.id);return b?b.discon:null!=a.av&&!a.av}function b(){s.removeClass("addToCart").addClass("visitStore").html(_hgt("Visit Store")).show(),s.removeClass("secondary").addClass("primary"),s.removeAttr("disabled")}function c(){s.hide()}function d(a){var b=HZ.utils.Links.getSpaceLinkWithSEO(a.id);return'<a target="_blank" href="'+b+'">'+a.t+"</a>"}function e(){var e,f,g,i,j,k=!1;e=l.getCurrentSpace(),j=e.puv,g=HZ.data.ProductsInfo.get(e.id),k=a(e),n.html(d(e)),c(),w.hide(),E.hide(),I.hide(),J.hide(),u.hide(),F.hide(),K.hide(),H.hide(),r.hide(),D.hide(),k&&D.show(),f=g?g.p:e.price;var m=!k&&(f||!U&&e.ow>0);m?(o.show(),p.html(f),!U&&e.ow>0&&b(),j?q.removeClass("hidden").show():q.removeClass("hidden").hide()):o.hide();var s=l.getSpaceDescription();if(s){var v=s;e.f&&e.au&&e.au!=e.ow&&(e.prod&&e.vl||(v+=" &mdash; <span class='userName'>"+HZ.ui.render.User.getUsersHtml(e.au,!0)+"</span>")),i=!0,t.peekable("show").peekable("setContent",v)}else i=!1,t.peekable("hide");h(g)}function f(){var a,c,e,f,g;a=l.getCurrentSpace(),f=a.puv,c=HZ.data.ProductsInfo.get(a.id),n.html(d(a)),b(),w.hide(),E.hide(),I.hide(),J.hide(),u.hide(),F.hide(),K.hide(),H.hide(),D.hide(),r.hide(),n.html(d(a)),e=a.price,p.html(e),o.show(),f&&e?q.removeClass("hidden").show():q.removeClass("hidden").hide();var i=l.getSpaceDescription();if(i){var j=i;a.f&&a.au&&a.au!=a.ow&&(a.prod&&a.vl||(j+=" &mdash; <span class='userName'>"+HZ.ui.render.User.getUsersHtml(a.au,!0)+"</span>")),g=!0,t.peekable("show").peekable("setContent",j)}else g=!1,t.peekable("hide");h(c)}function g(){var a,b,c,e,f,g,i,k;if(a=l.getCurrentSpace(),n.html(d(a)),s.removeClass("visitStore").addClass("addToCart").html("<i class='cartIcon'></i> "+_hgt("Add to Cart")).show(),c=a.puv,e=HZ.data.ProductsInfo.get(a.id),D.hide(),y.val(1),e){if(g=e.msrpstr,i=e.q,w.show(),f=e.fs?_hgt("<b>Free Shipping</b>"):"",x.html(f),b=e.p,p.html(b),""==b?o.hide():(o.show(),c&&b?q.removeClass("hidden").show():q.removeClass("hidden").hide()),e.ltime&&(K.html(e.ltime),K.show()),e.buyable)if((e.pending||e.buyable)&&e.avail){e.buyable?(s.removeClass("secondary").addClass("primary"),s.removeAttr("disabled")):(s.removeClass("primary").addClass("secondary"),s.attr("disabled","disabled")),L>i?(B.html(_hgt("Only {quantity} Left!",{quantity:i})),B.show()):B.hide();var m=M;y.empty(),M>i&&(m=i);for(var v=1;m>=v;v++)y.append($(HZ.utils.Html.template(T,{QTY:v})));z.css("display","inline-block"),C.hide()}else s.removeClass("primary").addClass("secondary"),s.attr("disabled","disabled"),z.hide(),s.html("<i class='cartIcon'></i> "+_hgt("Out of Stock")),C.css("display","inline-block"),B.hide();else s.removeClass("primary").addClass("secondary"),s.attr("disabled","disabled"),z.hide(),C.hide(),B.hide();g?(A.html(g),r.show()):r.hide(),t.peekable("hide");var I=l.getSpaceDescription();I?u.html(I).show():u.hide(),H.attr("vendorId",e.vid),H.attr("hid",a.id),H.show(),a.c&&e.desc?(F.show(),l.isMarketplaceProduct()?G.html(e.desc):G.addClass("withPeek").peekable("show").peekable("setContent",e.desc)):F.hide(),l.isMarketplaceProduct()&&$("#lbProductInfo .askQuestion").css("display","block"),h(e),HZ.productVariation.Manager.setSpaceId(a.id),k=j(),E.empty(),null!=k&&(E.prepend(k),E.show())}}function h(a){var b,c,d,e,f,g,h,j,k=v.find("dl.attributes");b=l.getCurrentSpace(),k.empty();var m,n=i();if(k.append(O),I=$("#lbProductInfo .productManufacturer.key"),J=$("#lbProductInfo .productManufacturer.value"),I.hide(),J.hide(),b.bmu){if(b.l){var o="<span class='spaceLink'><a class='icon-wrap' href='"+b.l+"' rel='nofollow' target=_blank>View on Original Site <span class='more-icon'></span></a></span>",p=HZ.utils.Html.template(N,{LABEL:_hgt("URL"),VALUE:o});k.append($(p))}}else if(n)if(l.isMarketplaceProduct()||a&&a.mpListing){var q,r=a?a.vid:b.ow,s=HZ.utils.Links.getMarketplaceVendorBrowseProductLink(r),t=HZ.data.Users.get(r).d;!s||a&&a.dv?a&&a.dv||(q=$(HZ.utils.Html.template(S,{VALUE:t}))):q=$(HZ.utils.Html.template(R,{VALUE1:s,VALUE2:t})),k.append(q)}else{var u=HZ.data.Users.get(b.ow).mpv;if(u){var s=HZ.utils.Links.getMarketplaceVendorBrowseProductLink(b.ow),t=HZ.data.Users.get(b.ow).d;s&&(m=$(HZ.utils.Html.template(R,{VALUE1:s,VALUE2:t})))}if(m||(m=$(HZ.utils.Html.template(P,{VALUE:i()}))),U&&b.l&&b.l.length>0&&(!a&&b.av||a&&!a.discon)&&(!u||2!=b.srct&&8!=b.srct)){var w=m.get(1).innerHTML+Q;m.get(1).innerHTML=w}k.append(m)}if(a){a.manu?(J.html(a.manu+"&nbsp;"),I.show(),J.show()):(I.hide(),J.hide());for(var x=0;x<HZ.data.ProductAttributes.length;x++)e=HZ.data.ProductAttributes[x],g=e.label,f=e.key,h=a[f],null!=h&&(h+=e.unit?a[e.unit]:"",j=HZ.utils.Html.template(N,{LABEL:g,VALUE:h}),k.append(j))}b&&!l.isFullPageAd()&&(d=HZ.utils.Styles.getStyleName(b.s),c=HZ.data.Categories.getCategoryById(b.cat),c&&4!=c.categoryId&&k.append(HZ.utils.Html.template(N,{LABEL:_hgt("Category"),VALUE:UIHelper.ucwords(c.name)})),d&&k.append(HZ.utils.Html.template(N,{LABEL:_hgt("Style"),VALUE:UIHelper.ucwords(d)})))}function i(){var a,b=l.getCurrentSpace();if(b.ow&&7!=b.ow&&!l.isFullPageAd()){var c=HZ.data.Users.get(b.ow);if(c){var d=null,e=HZ.data.HouzzClkTracking.get(b.id);e&&e[b.ow]&&(d=e[b.ow]),a=HZ.ui.render.User.getUserHtml(b.ow,!0,d)}}else a="<div class='spaceOwner'></div>";return a}function j(){var a,b,c,d=l.getCurrentSpace().id;if(a=HZ.data.Variations.get(d),a&&(b=a.availVar,c=a.curVar),null==b||0==b.length)return null;for(var e=$("<div></div>"),f=0;f<b.length;f++){var g=b[f],h=g.id,i=g.label,j=g.options,m=k(h,i,j,c);e.append(m)}return e}function k(a,b,c,d){for(var e=HZ.utils.Html.template(V,{ID:a,LABEL:b}),f=$(e),g=d[a],h=f.find(".variationOptions"),i=0;i<c.length;i++){var j=c[i],k=j.avail,l=j.name==g,m=$(W);m.attr("variationId",a).attr("optionValue",j.name).text(j.name),k||m.addClass("unavailable"),l&&m.addClass("selected"),h.append(m)}return f}var l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L=10,M=40,N='<dt class="key">%LABEL%</dt><dd class="value">%VALUE%&nbsp;</dd>',O='<dt class="key productManufacturer"></dt><dd class="value"></dd>',P='<dt class="key">'+_hgt("Sold By")+'</dt><dd class="value">%VALUE%&nbsp;</dd>',Q='| <a href="javascript:;" class="visitStore icon-wrap">'+_hgt("Visit&nbsp;Store&nbsp;")+'<span class="more-icon"></span></a>',R='<dt class="key">Sold By</dt><dd class="value"><a target="_blank" href="%VALUE1%" class="colorLink">%VALUE2%</a>&nbsp;</dd>',S='<dt class="key">'+_hgt("Sold By")+'</dt><dd class="value">%VALUE%&nbsp;</dd></dt>',T='<option value="%QTY%">%QTY%</option>',U=!1;this.setOwner=function(a){l=a,m=document.createElement("div"),m.id="lbProductInfo",$(m).addClass("hzProduct"),l.addInfoBox(m,"productInfo")},this.imageChanged=function(){if(!l.isEditMode()){var a=l.getContext();if(!n){var b;b=a.getType()==HZ.lb.Config.CONTEXT_TYPE_IDEABOOK?"productTitleDiv med-header light-rule":"productTitleDiv large-header light-rule";for(var c="<div class='"+b+"'></div><div class='buyBox normal-text'><div class='variationSelectors'></div><div class='buyContainer'><div class='priceBox'><div class='price ms300'></div><div class='unverified hidden'><a href='#' title='"+_hgt("This price has been supplied by a user of Houzz and, therefore, may not accurately reflect the current price of the product.")+"'>* "+_hgt("Price not verified")+"</a></div><div class='price2'><span class='msrp'></span></div></div><div class='mpQtyBox'><span class='inStock form-inline'>"+_hgt("Quantity:")+" <span class='dropdown-wrapper'><select id='qtySelector' class='dropdown'>",d=1;10>d;d++)c+="<option value='"+d+"'> "+d+"</option>";c+="</select><i></i></span></span><span class='outOfStock'><b>"+_hgt("Sold Out")+"</b></span><div class='shipping'><span id='vlShippingCost'></span><span class='qtyAlert'></span></div></div><table class='infoTable msgBox' cellpadding='0' cellspacing='0' border='0'><tr><td><span class='discontinued'>"+_hgt("Currently Not Available")+"</span></td></tr></table><button class='hzBtn primary large visitStore'></button></div><div class='vlDescription'></div><div class='curateDescription'></div><div class='productSpec' scopeId='lbProductSpec'><div class='med-header'>"+_hgt("Specifications")+"</div><dl class='attributes horizontal-list normal-text'></dl><div class='leadTime normal-text'></div><div class='returnPolicy small-text'><a href='javascript:;' hid='' vendorId='' class='returnPolicyLink colorLink icon-wrap'>"+_hgt("View return policy")+"&nbsp;<span class='more-icon'></span></a></div><div class='extraDescription'><div class='med-header'>"+_hgt("Product Description")+'</div><div class=\'extraContent normal-text\'></div></div><a href="javascript:;" class="colorLink askQuestion" compId="askQuestion"">'+_hgt("Need more info? Ask a question")+'&nbsp<span class="more-icon"></span></a></div></div>',m.innerHTML=c,n=$("#lbProductInfo .productTitleDiv"),w=$("#lbProductInfo .mpQtyBox"),o=$("#lbProductInfo .priceBox"),p=o.find(".price"),q=o.find(".unverified"),r=o.find(".price2"),s=$(".buyContainer").find(".hzBtn.primary"),x=$("#lbProductInfo #vlShippingCost"),y=$("#lbProductInfo #qtySelector"),z=$("#lbProductInfo .inStock"),A=o.find(".msrp"),B=w.find(".qtyAlert"),C=$("#lbProductInfo .outOfStock"),D=$("#lbProductInfo .msgBox"),E=$("#lbProductInfo .variationSelectors"),t=$("#lbProductInfo .vlDescription").peekable(),u=$("#lbProductInfo .curateDescription"),v=$("#lbProductInfo .productSpec"),I=$("#lbProductInfo .productManufacturer.key"),J=$("#lbProductInfo .productManufacturer.value"),K=$("#lbProductInfo .leadTime"),H=$("#lbProductInfo .returnPolicyLink"),F=$("#lbProductInfo .extraDescription"),G=$("#lbProductInfo .extraContent").peekable(),$("#lbProductInfo").on("click",".askQuestion",function(){HZ.lb.plugins.CommonActions.handleAskAQuestion()}),$("#lbProductInfo").on("click",".visitStore",$.proxy(this.handleVisitStoreClicked,this)),$("#lbProductInfo").on("click",".addToCart",$.proxy(this.handleAddToCart,this)),H.click(HZ.module.ReturnPolicy.handleReturnPolicyClick),HZ.productVariation.Manager.setRenderer(this),HZ.productVariation.Manager.initUI()}a.getType()==HZ.lb.Config.CONTEXT_TYPE_IDEABOOK?$(m).addClass("ideabookContext"):$(m).removeClass("ideabookContext"),$("#lbProductInfo .askQuestion").css("display","none"),this.imageDataUpdated()}},this.imageDataUpdated=function(){if(!l.isEditMode()){var a=l.getCurrentSpace();if(a.prod){var b=HZ.data.PPCAds.get(a.id);U=!1,l.isMarketplaceProduct()?($(m).addClass("mp"),g()):($(m).removeClass("mp"),b&&b.isPPCProduct?f():(U=!l.isSignupMode(),e()))}}},this.pluginAfterShown=function(a){l.isEditMode()||"imageChanged"==a&&t.peekable("refresh")},this.handleVisitStoreClicked=function(){var a=l.getCurrentSpace(),b=a.tl,c=HZ.utils.Links.getSpaceLink(a.id),d=HZ.data.PPCAds.get(a.id),e=HZ.lb.Config.SIGNUP_TRACKING_LB_VISIT_STORE;d&&d.isPPCProduct&&d.ppcProductUrl?(b=d.ppcProductUrl,window.open(b)):b&&(l.isSignupMode()?HZ.auth.Manager.signup(e,HZ.lb.Config.SIGNUP_MSG_PRODUCT_INFO,c,null,{rtEvent:HZ.lb.Config.SIGNUP_TRACKING_VISIT_STORE_CLICKS}):window.open(b))},this.handleAddToCart=function(){var a=l.getCurrentSpace(),b=HZ.data.ProductsInfo.get(a.id).lid,c=y.val();HZ.cart.Actions.addItem(a.id,b,c)},this.updateView=function(a){var b=l.getContext();b.stashAndReplaceCurrentSpaceId(a),l.refresh()};var V='<div id="mpVariationSelectBox" class="small-text"><div class="variationTitle med-sub-header"><span>'+_hgt("Choose a {label}:",{label:"%LABEL%"})+'</span></div><div id="variationSelect_%ID%" class="variationOptions"></div></div>',W='<a variationId="" optionValue="" href="javascript:;" class="variationOption"></a>'},HZ.lb.plugins.ProfessionalInfo=function(){var a,b;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbSpaceOwner",a.addInfoBox(b,"spaceOwner")},this.imageChanged=function(){var c=a.getCurrentSpace(),d="";if(this.shouldShow()){var e=HZ.data.Users.get(c.ow);if(e){var f=null,g=HZ.data.HouzzClkTracking.get(c.id);g&&g[c.ow]&&(f=g[c.ow]);var h=HZ.ui.render.User.getUserImageHtml(c.ow,!0,f),i=HZ.ui.render.User.getUserHtml(c.ow,!0,f),j=HZ.ui.render.User.getProfessionalTypeName(e);""!=j&&(i+='<br/><span class="proType">'+j+"</span>"),d="<table class='spaceOwner' cellpadding=0 cellspacing=0 border=0><tr valign=top><td class='userImage'>"+h+"</td><td class='userName'>"+i+"</td></tr></table>"}}b.innerHTML=d},this.shouldShow=function(){var b=a.getCurrentSpace();if(!b.ow)return!1;if(7==b.ow)return!1;if(a.isFullPageAd()){if(!a.isPhotoAd())return!1;var c=HZ.data.PhotoAds.get(b.id);if(!c||!c.mpAd)return!1;var d=HZ.data.Users.get(b.ow);if(!d)return!1;if(d.emp||d.mpv)return!1}return!0}},HZ.lb.plugins.GalleryInfo=function(){var a,b;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbGalleryComment",a.addInfoBox(b,"galleryInfo")},this.imageChanged=function(){var c,d=a.getCurrentSpace(),e=a.getContext(),f=e.getCursorPosition(),g=e.getBasePosition(),h="";e.getType()!=HZ.lb.Config.CONTEXT_TYPE_IDEABOOK||a.isFullPageAd()||(c=HZ.data.Galleries.get(e.getDescriptor()[HZ.lb.Config.DESCRIPTOR_FIELD_GALLERY_ID]),b.style.display="block",h="<div class='galleryTitle large-header'>"+c.t+"</div>",h+="<div class='galleryCursor small-text'>"+_hgt("Photo {photoNumber} of {totalPhotosCount}",{photoNumber:g+f.cursor+1,totalPhotosCount:c.count})+"</div>",d.b&&(h+="<div class='galleryComment'>"+d.b+"</div>")),b.innerHTML=h}},HZ.lb.plugins.PaletteSourcePhoto=function(){var a,b,c;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbPaletteSourcePhoto",a.addInfoBox(b,"paletteSourcePhoto"),$(b).click(this.handleDivClicked)},this.imageChanged=function(){var d,e=a.getCurrentSpace(),f=142;if("undefined"!=typeof e.srcs&&0!==parseInt(e.srcs)){if(c&&(d=c.id),c=HZ.data.ColorPaletteSource.get(e.id),c&&c.id>0&&c.id!=d){var g="",h=HZ.utils.Links.getSpaceImageUrl(c.id,f,f);g+="<div class='title small-sub-header'>",g+="<a class='sourcePhoto' target='_blank' href='"+c.u+"'>",g+=_hgt("See Related Photo "),g+="<span class='more-icon'></span>",g+="</a>",g+="</div>",g+="<div id='spaceImage'>",g+="<img width='"+f+"' height='"+f+"' s='"+c.id+"' i='0' class='rowFirst' src='"+h+"'>",g+="<div class='title' s='"+c.id+"' i='0'>"+c.t+"</div>",g+="</div>",b.innerHTML=g}}else c=null,b.innerHTML=""},this.imageDataUpdated=function(){this.imageChanged()},this.handleDivClicked=function(b){var d=$(b.target),e=a.getCurrentSpace();if(d.attr("s")||(d=d.parent("div")),d.attr("s")){var f=d.attr("s"),g=d.attr("i");if(c){var h={};h[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=c.id;var i=new HZ.lb.Context("palette_source_photo_"+e.id,HZ.lb.Config.CONTEXT_TYPE_PALETTE_SOURCE_PHOTO,h,[c.id],1,g+1,-1);i.setCurrentSpaceId(f),a.pushContext(i),a.refresh()}}}},HZ.lb.plugins.ColorPicker=new function(){var a,b,c,d;this.setOwner=function(d){a=d,b=document.createElement("div"),b.id="lbColorPicker";var e=this.getColorPickerHtml();b.innerHTML=e,a.addInfoBox(b,"colorPicker"),this.initColorPickerActions(),c=!1},this.initColorPickerActions=function(){$(b).find(".topActions").on("click",this.handleShowColors),$(b).find("#savePaletteToIdeabook").on("click",this.handleSaveColors),$(b).find("#sharePalette").on("click",this.handleShareColors),$(b).find("#buySamples").on("click",this.buyColorSamples),$(b).on("click",this.catchDismissColorPicker)},this.getColorPickerHtml=function(){var a="bold-text",b="showMeColorsLink";return"<div id='lightboxColorPicker' class='colorPicker trackMe' scopeid='lightBoxColorPicker'><span class='dismissBtn' compid='dismissColorPicker'></span><div class='cpViewContainer'><div class='topActions' compid='"+b+"'><span class='cpLogo'></span><div class='showActions'><div id='showMeColors' class='showMeColors'><span class='action-call "+a+"' id='showMeColorBtn'>Show <span class='nameForSpace'>Room</span> Colors <span class='more-icon'></span></span></div><div class='colorsShown hidden'><div class='title bold-text'>This <span class='nameForSpace'>Room</span>'s Colors:</div></div></div></div><div class='sponsorLogo'><span class='logoImg behrLogo'></span></div><div class='adHtml' id='adTrackingPlaceHolder'></div><div class='middleResults hidden'><div id='colorPicker' class='colorPickerContainer hidden'><ul id='palettes'></ul><ul id='behrPalettes'></ul><div id='placeholders'></div></div></div><div class='bottomActions hidden'><a class='hzBtn graybutton button-baseIcon iconOnly' href='javascript:;' id='savePaletteToIdeabook' compid='savePaletteToIdeabook'><span class='button-icon hzi-font hzi-Add-Photo-Button' id='savePaletteToIdeabookIcon'></span></a><a class='hzBtn greenbutton' href='javascript:;' id='sharePalette' compid='sharePalette'><span class='label' id='sharePaletteLabel'>Share Palette</span></a><a class='hzBtn greenbutton' target='_blank' href='javascript:;' id='buySamples' compid='buyPaletteSamples'><span class='label' id='buySamplesLabel'>Buy Samples</span></a></div></div></div>"},this.imageChanged=function(){if(HZ.viewSpace&&HZ.viewSpace.colorPicker&&!HZ.viewSpace.colorPicker.isColorPickerDismissed()){var e,f=a.getCurrentSpace(),g=!0;d||(d=f),HZ.data.ColorPickerAd.get(f.id)&&(e=HZ.data.ColorPickerAd.get(f.id),g=!1),!g&&(HZ.data.ProductAds.get(f.id)||HZ.data.PaidProAds.get(f.id)||HZ.data.PhotoAds.get(f.id)||HZ.data.PaidProAds.get(f.id))&&(g=!0);var h="#lbColorPicker";$(b).find("trackMe").attr("objid",f.id),"undefined"!=typeof f.srcs&&0!==parseInt(f.srcs)||f.prod||g?(HZ.viewSpace.colorPicker.hideColorPicker(h),HZ.viewSpace.colorPicker.resetPalette()):($(b).find(".nameForSpace").html(1014===parseInt(f.cat)||1001===parseInt(f.cat)?"Photo":"Room"),HZ.viewSpace.colorPicker.setBuyLink(e.buyLink),HZ.viewSpace.colorPicker.setSecondaryBuyLink(e.secondaryBuyLink),HZ.lb.Utils.registerTrackingUrl(e.impTrkLink),$(b).find("#adTrackingPlaceHolder").html(e.adHtml),(HZ.viewSpace.colorPicker.isColorPickerHidden(h)||HZ.viewSpace.colorPicker.isColorPickerOpened())&&(HZ.viewSpace.colorPicker.showColorPicker(h),HZ.viewSpace.colorPicker.resetPalette())),(HZ.viewSpace.colorPicker.isExitAllowed()||d.id!=f.id)&&(HZ.lb.plugins.FullscreenSupport.showWindowButtons(),HZ.lb.plugins.ContextBreadcrumbs.showBreadcrumbs(),a.enableActionsDiv(),c&&(c=!c,HZ.lb.plugins.ImageTags.showTags()),d.id!=f.id&&(HZ.viewSpace.colorPicker.resetPalette(),d=f))}HZ.viewSpace&&HZ.viewSpace.colorPicker&&HZ.viewSpace.colorPicker.isColorPickerDismissed()&&$(b).find("#adTrackingPlaceHolder").remove()},this.imageDataUpdated=function(){this.imageChanged()},this.imageResized=function(){HZ.viewSpace&&HZ.viewSpace.colorPicker&&HZ.viewSpace.colorPicker.repositionLocators()},this.handleShowColors=function(){a.isSignupMode()?a.showLoginDialog():HZ.viewSpace&&HZ.viewSpace.colorPicker&&(d=a.getCurrentSpace(),a.disableActionsDiv(),HZ.lb.plugins.FullscreenSupport.hideWindowButtons(),HZ.lb.plugins.ContextBreadcrumbs.hideBreadcrumbs(),HZ.viewSpace.colorPicker.init(),HZ.viewSpace.colorPicker.getColors(d.id,"currentImage",$(b).find(".topActions")),HZ.viewSpace.colorPicker.showColorPicker("#lbColorPicker"),c=HZ.lb.plugins.ImageTags.hideTags())},this.handleSaveColors=function(){if(HZ.viewSpace&&HZ.viewSpace.colorPicker){var b=a.getCurrentSpace(),c=b.id,d=JSON.stringify(HZ.viewSpace.colorPicker.getPalette());HZ.spaceActions.AddToIdeabookDialog.init(c),HZ.spaceActions.AddToIdeabookDialog.setColorPalette(JSON.parse(d)),a.showDialog(HZ.spaceActions.AddToIdeabookDialog)}},this.handleShareColors=function(){if(HZ.viewSpace&&HZ.viewSpace.colorPicker){var b=a.getCurrentSpace(),c=b.id,d=(HZ.viewSpace.colorPicker.generatePaletteShareUrl(),43);HZ.dialogs.ShareColorPaletteDialog.prepare({type:d,referenceId:c,subject:_hgt("My color palette"),message:_hgt("Take a look at this Behr color palette I created on Houzz."),event:"scp",scopeId:"lightBoxColorPicker",allowShare:!0}),a.showDialog(HZ.dialogs.ShareColorPaletteDialog)}},this.buyColorSamples=function(){HZ.viewSpace&&HZ.viewSpace.colorPicker&&HZ.viewSpace.colorPicker.getBuyBehrColorLink(this)},this.getColorSmartLink=function(){HZ.viewSpace&&HZ.viewSpace.colorPicker&&HZ.viewSpace.colorPicker.getColorSmartLink(this)},this.handlePrintColors=function(){if(HZ.viewSpace&&HZ.viewSpace.colorPicker){var b=a.getCurrentSpace(),c=b.id,d=JSON.stringify(HZ.viewSpace.colorPicker.getPalette()),e=UIHelper.isMSIE;HZ.utils.Print.printPalette(c,d,e)}},this.catchDismissColorPicker=function(b){if($(b.target).hasClass("dismissBtn")){c&&(c=!c,HZ.lb.plugins.ImageTags.showTags(),a.enableActionsDiv(),HZ.lb.plugins.FullscreenSupport.showWindowButtons(),HZ.lb.plugins.ContextBreadcrumbs.showBreadcrumbs());var d="#lbColorPicker";HZ.viewSpace.colorPicker.dismissColorPicker(d)}}},HZ.lb.plugins.ProjectInfo=function(){var a,b,c,d=4,e=69;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbProject",a.addInfoBox(b,"projectInfo"),$(b).click(this.handleProjectInfoDivClicked)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var f,g,h=a.getContext(),i=h.getCursorPosition(),j="";if(f=a.getCurrentSpace(),c=HZ.data.Projects.get(f.pid),g=c?c.count:0,h.getType()==HZ.lb.Config.CONTEXT_TYPE_SPACE_RECOMMENDATIONS||a.isFullPageAd());else if(c&&h.getType()==HZ.lb.Config.CONTEXT_TYPE_PROJECT)j+="<div class='browseTitle'>",j+="<div class='projName'>"+c.t+"</div>",j+="<span class='greyText'>"+_hgt("Photo {currentPhotoIndex} of {photoCount}",{currentPhotoIndex:i.cursor+1,photoCount:g})+"</span>",j+="</div>";else if(c&&c.sids&&c.sids.length>1&&h.getType()!=HZ.lb.Config.CONTEXT_TYPE_PROJECT){var k=0,l=a.isMarketplaceProduct();j+="<div class='title small-sub-header'>";var m=" <a class='colorLink' target='_blank' href='"+c.link+"'>"+c.t+"</a> ";l?(j+=_hgt("Related Products in {projectPage}",{projectPage:m}),j+=" (",j+=_hgtp("","1 product","{productCount} products",g,{productCount:g}),j+="): "):(j+=_hgt("Other Photos in Project {projectPage}",{projectPage:m}),j+=" (",j+=_hgtp("","1 photo","{photoCount} photos",g,{photoCount:g}),j+="): "),j+="</div>",j+="<div id='projectImages'>";for(var n=0;n<c.sids.length;n++){var o=c.sids[n],p=k%4==0?"rowFirst":"rowMid",q=HZ.data.Spaces.get(o);if(o!=f.id){if(!(d>k))break;var r=HZ.utils.Links.getSpaceImageUrl(o,e,e,q.bg);j+="<img s='"+o+"' i='"+n+"' class='"+p+"' src='"+r+"'>",k++}}}b.innerHTML=j},this.handleProjectInfoDivClicked=function(b){var e=$(b.target);if(e.attr("s")||(e=e.parent("div")),e.attr("s")){var f=e.attr("s"),g=e.attr("i");if(g>d&&(g=0),c){var h={};h[HZ.lb.Config.DESCRIPTOR_FIELD_PROJECT_ID]=c.pid,h[HZ.lb.Config.DESCRIPTOR_FIELD_CATEGORY]=a.getCurrentSpace().cat;var i=new HZ.lb.Context("project_"+c.pid,HZ.lb.Config.CONTEXT_TYPE_PROJECT,h,c.sids,c.count,g+1,c.sids.length);i.setCurrentSpaceId(f),a.pushContext(i),a.refresh()}}}},HZ.lb.plugins.RecommendationsHeader=function(){var a,b,c=69;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbRecommendationsHeader",a.addInfoBox(b,"recommendationsHeader"),$(b).click(this.handleDivClicked)},this.imageChanged=function(){var d,e,f,g="",h=a.getContext();if(d=a.getCurrentSpace(),f=HZ.data.ProductAds.get(d.id),h.getType()==HZ.lb.Config.CONTEXT_TYPE_SPACE_RECOMMENDATIONS&&!f){var i=h.getDescriptor()[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID];d=HZ.data.Spaces.get(i),e=HZ.utils.Links.getSpaceImageUrl(i,c,c,d.bg),g+="<img src='"+e+"'><span>"+_hgt("People who liked this {item} also liked: photo {photo}&nbsp;/&nbsp;{cnt}",{item:d.prod?"Product":"Photo",photo:h.getCursorPosition().cursor+1,cnt:h.getTotalSpacesCount()})+"</span>"}b.innerHTML=g},this.handleDivClicked=function(b){var c=$(b.target);c.attr("src")&&(a.popContext(),a.refresh())}},HZ.lb.plugins.Recommendations=function(){var a,b,c,d=4,e=69;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbRecommendations",a.addInfoBox(b,"recommendations"),$(b).click(this.handleDivClicked)},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var f="",g=a.getContext(),h=g.getType(),i=a.getCurrentSpace();if(h!=HZ.lb.Config.CONTEXT_TYPE_SPACE_RECOMMENDATIONS&&h!=HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS&&h!=HZ.lb.Config.CONTEXT_TYPE_PROJECT&&(c=HZ.data.Recommendations.get(i.id),c&&c.sids.length>1)){var j=c.sids.length;f+="<div class='small-sub-header'>",f+=_hgtp("","People who liked this {itemType} also liked (1 photo):","People who liked this {itemType} also liked ({photoCount} photos): ",j,{photoCount:j,itemType:i.prod?"Product":"Photo"}),f+=" </div>",f+="<div id='recommendationsImages'>";for(var k=0;k<Math.min(d,c.sids.length);k++){var l=c.sids[k],m=k%4==0?"rowFirst":"rowMid",n=HZ.data.Spaces.get(l),o=HZ.utils.Links.getSpaceImageUrl(l,e,e,n.bg);f+="<img s='"+l+"' i='"+k+"' class='"+m+"' src='"+o+"'>"}}b.innerHTML=f},this.handleDivClicked=function(b){var d=$(b.target),e=a.getCurrentSpace();if(d.attr("s")||(d=d.parent("div")),d.attr("s")){var f=d.attr("s"),g=d.attr("i");if(c){var h={};h[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=e.id;var i=new HZ.lb.Context("recommendations_"+e.id,HZ.lb.Config.CONTEXT_TYPE_SPACE_RECOMMENDATIONS,h,c.sids,c.count,g+1,-1);i.setCurrentSpaceId(f),a.pushContext(i),a.refresh()}}}},HZ.lb.plugins.Comments=function(){function a(){b();var a=$(d).position().top;c.scrollInfoDivTo(a,!0)}function b(){var a,b,e="",f="",g=c.getCurrentSpace();if(g&&g.fullyLoaded&&g.bc>0)if(g.commentsLoaded)if(b=HZ.data.Comments.get(g.id)){for(var h in b){a=b[h];for(var i=0;a&&i<a.length;i++){var j=a[i],k=j.c,l=HZ.utils.Links.getGalleryLink(j.gid),m=j.title,n={tag:"a",attr:{href:l,target:"_blank"}};f+="<div class='commentsItem'>",f+="<div class='commentsItemUser'>"+HZ.ui.render.User.getUserImageHtml(j.uid,!0)+"</div>",f+="<div class='commentsItemText small-text'><small class='tiny-text'>"+_hgt("Added to <t1>{galleryTitle}</t1>:",{t1:n,galleryTitle:m})+'</small><br>"'+k+'"</div>',f+="</div>"}}if(f){if(e="<div class='small-sub-header'>",g.prod)switch(g.bc){case 0:e+=_hgt("This Product was added to {spaceBC} ideabook, including:",{spaceBC:g.bc});break;default:e+=_hgt("This Product was added to {spaceBC} ideabooks, including:",{spaceBC:g.bc})}else switch(g.bc){case 0:e+="undefined"!=typeof g.srcs&&0!==parseInt(g.srcs)?_hgt("This Palette was added to {spaceBC} ideabook, including:",{spaceBC:g.bc}):_hgt("This Photo was added to {spaceBC} ideabook, including:",{spaceBC:g.bc});break;default:e+="undefined"!=typeof g.srcs&&0!==parseInt(g.srcs)?_hgt("This Palette was added to {spaceBC} ideabooks, including:",{spaceBC:g.bc}):_hgt("This Photo was added to {spaceBC} ideabooks, including:",{spaceBC:g.bc})}e+="</div>",e+="<div class='commentsList'>"+f+"</div>"}}else{if(e+="<div class='small-sub-header' style='margin-bottom:15px;'>",g.prod)switch(g.bc){case 0:e+=_hgt("This Product was added to {spaceBC} ideabook.",{spaceBC:g.bc});break;default:e+=_hgt("This Product was added to {spaceBC} ideabooks.",{spaceBC:g.bc})}else switch(g.bc){case 0:e+="undefined"!=typeof g.srcs&&0!==parseInt(g.srcs)?_hgt("This Palette was added to {spaceBC} ideabook.",{spaceBC:g.bc}):_hgt("This Photo was added to {spaceBC} ideabook.",{spaceBC:g.bc});break;default:e+="undefined"!=typeof g.srcs&&0!==parseInt(g.srcs)?_hgt("This Palette was added to {spaceBC} ideabooks.",{spaceBC:g.bc}):_hgt("This Photo was added to {spaceBC} ideabooks.",{spaceBC:g.bc})}e+="</div>"}else{if(e+="<div class='small-sub-header' style='margin-bottom:15px;'>",g.prod)switch(g.bc){case 0:e+=_hgt("This Product was added to {spaceBC} ideabook.",{spaceBC:g.bc});break;default:e+=_hgt("This Product was added to {spaceBC} ideabooks.",{spaceBC:g.bc})}else switch(g.bc){case 0:e+="undefined"!=typeof g.srcs&&0!==parseInt(g.srcs)?_hgt("This Palette was added to {spaceBC} ideabook.",{spaceBC:g.bc}):_hgt("This Photo was added to {spaceBC} ideabook.",{spaceBC:g.bc});break;default:e+="undefined"!=typeof g.srcs&&0!==parseInt(g.srcs)?_hgt("This Palette was added to {spaceBC} ideabooks.",{spaceBC:g.bc}):_hgt("This Photo was added to {spaceBC} ideabooks.",{spaceBC:g.bc})}e+=" <a href='javascript:;' class='loadComments bold-text small-text icon-wrap'>"+_hgt("More")+" <span class='more-icon'></span></a>",e+="</div>"}d.innerHTML=e}var c,d,e=!1;this.setOwner=function(a){c=a,d=document.createElement("div"),d.id="lbComments",c.addInfoBox(d,"comments"),$(d).click($.proxy(this.handleDivClicked,this))},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var a=c.getCurrentSpace();e=a.commentsLoaded,b()},this.handleDivClicked=function(){if(!e){var d=c.getCurrentSpace();d.commentsLoaded?b():HZ.lb.plugins.SpaceDataLoader.loadSpaceBuzz($.proxy(a,this))}}},HZ.lb.plugins.QuestionsInfo=new function(){var a,b,c,d=5;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbQuestions",a.addInfoBox(b,"questionsInfo"),$(b).click($.proxy(this.handleDivClicked,this)),$(b).on("mousedown","a",function(){var a=this.href;0==a.indexOf("http://")&&(this.target="_blank")}),HZ.feedComments.init({source:"lightbox",feedContainer:b}),$(document).bind("keyboardHandlerRequired.lightbox",function(c,d){for(var e=d.event.target;null!=(e=e.parentNode);)e==b&&a.detachKeyboardHandler()}).bind("keyboardHandlerReleased.lightbox",function(c,d){for(var e=d.event.target;null!=(e=e.parentNode);)e==b&&a.attachKeyboardHandler()}).bind("feedContentChanged.lightbox",function(){})},this.imageDataUpdated=function(){this.imageChanged(),$(".askButton",b).removeClass("hidden")},this.imageChanged=function(){var e,f,g,h,i,j=a.getCurrentSpace(),k=[],l=[],m=0;if(j&&(e=HZ.data.Questions.get(j.id)),this.storeQuestionData(),c=!0,e&&e.length>0){for(var n=0;n<e.length;n++){var o=e[n],p='"'+o.body+'"',q=HZ.utils.Links.getQuestionLinkWithSEO(o.qid,o.title,o.body),r=HZ.utils.Links.getQuestionCommentLinkWithSEO(o.qid,o.title,o.body),s="";
o.processedFeedHtml?s="<div class='lbQuestionFeedDiv' sid='"+j.id+"' qid='"+n+"'>"+o.processedFeedHtml+"</div>":o.feedHtml?s="<div class='lbQuestionFeedDiv' sid='"+j.id+"' qid='"+n+"'>"+o.feedHtml+"</div>":(s+="<div class='lbQuestionDetailDiv'><div class='lbQuestionUserImgDiv'>"+HZ.ui.render.User.getUserImageHtml(o.uid,!0)+"</div><div class='lbQuestionTextDiv'><a href='"+q+"' target='_blank'>"+p+"</a><div class='lbQuestionInfoDiv'>",o.count>0&&(s+="<a class='commentIcon colorLink' href='"+r+"' target='_blank'><span class='replies'><img src='"+HZ.utils.Config.emptyGifData+"'>"+o.count+"</span></a><span class='greyText'> &middot; </span>"),s+="<span class='greyText'>"+_hgt("{timeDuration} ago",{timeDuration:o.etime})+"</span></div></div></div>"),d>m&&o.count>0?(l.push(s),m++):k.push(s)}for(;l.length<d&&k.length>0;)l.push(k.shift())}html="<div class='small-sub-header'>";var t=e?e.length:0,u=j.prod?"product":"photo";switch(u){case"product":f=_hgtp("","This product has one question:","This product has {questionCount} questions: ",t,{questionCount:t}),g=_hgtp("Ask a question about this product","Ask a question","Ask a question",t);break;case"photo":f=_hgtp("","This photo has one question:","This photo has {questionCount} questions: ",t,{questionCount:t}),g=_hgtp("Ask a question about this photo","Ask a question","Ask a question",t)}html+=f,html+=" </div>",html+="<div class='lbQuestionsListDiv small-text'>"+l.join("")+"</div>";var v=k.length;if(v>0){var w=_hgtp("","Show 1 more question","Show {questionCount} more questions",v,{questionCount:v})+" <span class='more-icon'></span>";html+="<a class='lbQuestionsMore loadMoreBtn' href='javascript:;'>"+w+"</a><div class='lbQuestionsListUnansweredDiv small-text'>"+k.join("")+"</div>"}b.innerHTML=html,h="span12 colorLink askButton",i=t?"lbAsk":"lbAskFirst";var x=$('<a compid="'+i+'" href="javascript:;">'+g+' <span class="more-icon"></span></a>').addClass(h),y=$('<div class="row-fluid pbs"></div>');y.append(x),$(b).append(y),x.click($.proxy(this.handleAskAQuestion,this)),x.css("display",a.isEditMode()?"none":""),$(b).find(".attachment-previews").empty(),$(b).find("textarea.commentBody").initPlaceHolders()},this.storeQuestionData=function(){$(b).find(".feedAttach .feedTextBody").peekable("destroy"),$(".lbQuestionFeedDiv",b).each(function(a,b){var c=$(b),d=c.attr("sid"),a=c.attr("qid"),e=HZ.data.Questions.get(d);e&&e[a]&&e[a].feedHtml,e[a].processedFeedHtml=c.html()})},this.handleDivClicked=function(a){var b=a.target;if(b&&b.className.indexOf("lbQuestionsMore")>=0){b.style.display="none";var c=$(".lbQuestionsListUnansweredDiv");c[0].style.display="block",c.find(".feedTextBody").peekable()}},this.pluginAfterShown=function(){if(c){var a=$(b).find(".feedAttach .feedTextBody");a.length>0&&(a.peekable(),c=!1)}},this.handleAskAQuestion=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getContext().getCurrentSpaceId(),c=a.getCurrentSpace(),d=HZ.data.Users.get(c.ow),e=d?d.p:0;HZ.spaceActions.QuestionDialog.init(b,e),HZ.spaceActions.QuestionDialog.setShowLinkOnNewWindow(!0),HZ.spaceActions.QuestionDialog.setQuestionTopic(a.isMarketplaceProduct()?HZ.spaceActions.QuestionDialog.PRODUCT_TOPIC:HZ.spaceActions.QuestionDialog.SPACE_TOPIC),a.showDialog(HZ.spaceActions.QuestionDialog)}}},HZ.lb.plugins.ContextBreadcrumbs=new function(){var a,b;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbContextBreadcrumbs",b.className="fadeOutOnIdle",a.addImageLayer(b),$("#lbContextBreadcrumbs").click($.proxy(this.handleBreadcrumbClick,this))},this.contextChanged=function(){var c=a.getContextStack(),d="";b.style.display=c.length>1?"block":"none";var e=c[1],f="",g="",h="",i=null;if(e){switch(i=e.getDescriptor(),e.getType()){case HZ.lb.Config.CONTEXT_TYPE_IDEABOOK:g=_hgt("Ideabook")+":",h=HZ.data.Galleries.get(i[HZ.lb.Config.DESCRIPTOR_FIELD_GALLERY_ID]).t;break;case HZ.lb.Config.CONTEXT_TYPE_PROJECT:g=_hgt("Project")+":",h=HZ.data.Projects.get(i[HZ.lb.Config.DESCRIPTOR_FIELD_PROJECT_ID]).t;break;case HZ.lb.Config.CONTEXT_TYPE_OWNER:g=_hgt("Photos Uploaded by"),h=HZ.data.Users.get(i[HZ.lb.Config.DESCRIPTOR_FIELD_USER_ID]).d;break;case HZ.lb.Config.CONTEXT_TYPE_CREATED:g=_hgt("Photos Recently Created");break;case HZ.lb.Config.CONTEXT_TYPE_SPACE_RECOMMENDATIONS:g=_hgt("People who liked this<br>photo also liked");break;case HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS:g=_hgt("Product")+":",h=HZ.data.Spaces.get(i[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]).t;break;case HZ.lb.Config.CONTEXT_TYPE_BROWSE_DESCRIPTOR:case HZ.lb.Config.CONTEXT_TYPE_BROWSE_FILTER:if(i[HZ.lb.Config.DESCRIPTOR_FIELD_SEARCH_STRING])g+=_hgt("Search Results for"),h="'"+i[HZ.lb.Config.DESCRIPTOR_FIELD_SEARCH_STRING]+"'";else{g+=_hgt("Browse")+" ",i[HZ.lb.Config.DESCRIPTOR_FIELD_STYLE]&&(g+=HZ.utils.Styles.getStyleName(i[HZ.lb.Config.DESCRIPTOR_FIELD_STYLE])),i[HZ.lb.Config.DESCRIPTOR_FIELD_METRO_AREA]&&HZ.data.MetroAreas.get(i[HZ.lb.Config.DESCRIPTOR_FIELD_METRO_AREA])&&(g+=UIHelper.ucwords(HZ.data.MetroAreas.get(i[HZ.lb.Config.DESCRIPTOR_FIELD_METRO_AREA]))+" ");var j=i[HZ.lb.Config.DESCRIPTOR_FIELD_CATEGORY];j?g+=1==j?" "+_hgt("Photos"):2==j?" "+_hgt("Products"):_hgt("{categoryName} Photos",{categoryName:UIHelper.ucwords(HZ.data.Categories.getCategoryById(j).name)}):i[HZ.lb.Config.DESCRIPTOR_FIELD_TOPIC_ID]&&(g+=" "+i[HZ.lb.Config.DESCRIPTOR_FIELD_TOPIC_NAME])}break;case HZ.lb.Config.CONTEXT_TYPE_SURVEY_POPULAR_PHOTOS:g=_hgt("Popular Photos");break;case HZ.lb.Config.CONTEXT_TYPE_SURVEY_PRODUCTS:g=_hgt("Products");break;case HZ.lb.Config.CONTEXT_NAME_ARBITRARY_SPACES:g=_hgt("Photos");break;case HZ.lb.Config.CONTEXT_TYPE_RECOMMENDED_PHOTOS:g=_hgt("Recommended Photos");break;case HZ.lb.Config.CONTEXT_TYPE_RECOMMENDED_PRODUCTS:g=_hgt("Recommended Products");break;case HZ.lb.Config.CONTEXT_TYPE_PALETTE_SOURCE_PHOTO:g=_hgt("Palette Source Photo")}g&&(f=e.getCurrentSpaceId())}g&&(d+="<div class='crumb'><div class='crumbArrow'></div><div class='crumbText'><div class='crumbType'>"+_hgt("Back to {type}",{type:g})+"</div>",h&&(d+="<div class='crumbName'>"+h+"</div>"),d+="</div><div class='crumbImage'><img src='"+HZ.utils.Links.getSpaceImageUrl(f,60,60)+"'></div></div>"),b.innerHTML=d},this.handleBreadcrumbClick=function(){a.popContext(),a.refresh()},this.hideBreadcrumbs=function(){b.style.display="none"},this.showBreadcrumbs=function(){b.style.display="block"}},HZ.lb.plugins.ImageTags=new function(){function a(){var a=$(l);d=c.getCurrentSpace(),l.style.display=d&&(d.ift||d.prod)||c.isEditMode()?"none":"",a.removeClass("active").removeClass("unavailable"),null==i||i&&0==i.length?a.addClass("unavailable"):n&&a.addClass("active")}function b(){var a=c.getCurrentSpace(),b=c.getSpaceImage(a);if(b){var d=c.getImageBounds();UIHelper.setBounds(g[0],d.x,d.y,0,0),h=d.w/b.w,imageTags=g.find(".newImageTagIcon"),imageTags.each(function(){var a=$(this),b=i[a.attr("index")],c=Math.round(h*b.x)-14,d=Math.round(h*b.y)-6;a.css({left:c+"px",top:d+"px"}).addClass("animate")})}}var c,d,e,f,g,h,i,j,k,l,m,n=!0,o=!1;this.setOwner=function(a){c=a,g=$("<div>").attr("id","lbImageTags").addClass("fadeOutOnExit"),c.addImageLayer(g[0]),j=new HZ.ui.DetailsBox("lbImageTagPopup","lbImageTagsPopup"),k=j.getContents(),g.append(k),$("#lbImageTagPopup").mouseleave($.proxy(this.hideInfoDiv,this)).click($.proxy(this.handleInfoDivClicked,this)),l=HZ.ui.ButtonFactory.createGrayIconButton("",null,"hz-tall-button","hzi-Tag",_hgt("Toggle Image Tags"),"toggleImageTags"),$(l).click($.proxy(this.handleImageTagButtonClicked,this)),c.addActionItem(l,HZ.lb.ActionBar.ACTION_BAR_RIGHT)},this.handleImageTagButtonClicked=function(){n=!n,a(),n?g.show():g.hide()},this.hideTags=function(){return n?(n=!n,a(),g.hide(),!0):!1},this.showTags=function(){n||(n=!n,a(),g.show())},this.imageResized=function(){b()},this.imageDataUpdated=function(){d=c.getCurrentSpace(),d.id!=e&&this.imageChanged()},this.imageChanged=function(){if(this.hideInfoDiv(),g.find(".imageTagIcon").remove(),g.find(".newImageTagIcon").remove(),d=c.getCurrentSpace(),f=c.getSpaceImage(d),i=HZ.data.ImageTags.get(d.id),!d||!f||!i||0==i.length)return void a();a();for(var h=0;h<i.length;h++)g.append($("<i class='newImageTagIcon newImageTagIconShadow' />").attr({index:h})),g.append($("<i class='newImageTagIcon' />").attr({index:h}).mouseenter($.proxy(this.showInfoDiv,this)));b(),e=d.id},this.hideInfoDiv=function(){j.setVisible(!1),o=!1,g[0].style.width=0,g[0].style.height=0},this.showInfoDiv=function(a){var b=$(a.target).attr("index"),d=i[b],e=!1,f=Math.round(h*d.x),k=Math.round(h*d.y),l="",n="",p=null;if(g.find(".newImageTagIcon").each(function(a,c){var d=$(c);d.attr("index")==b?d.css("z-index",20):d.css("z-index","")}),m=null,d.sid>0){var q=HZ.data.Spaces.get(d.sid);q&&(n=q.t,l=UIHelper.truncate(q.c,300,UIHelper.TRUNCATE_BR,!1),p=HZ.utils.Links.getSpaceImageUrl(q.id,60,60),m=q,e=!0)}else n=d.v,l=UIHelper.truncate(d.c,400,UIHelper.TRUNCATE_BR,!1);j.setTitle(n),j.setImageUrl(p),j.setBody(l),j.setClickable(e);var r=c.getImageBounds();j.setPosition(f,k,r.w,r.h),j.setVisible(!0),o=!0},this.handleInfoDivClicked=function(){if(m){var a={};a[HZ.lb.Config.DESCRIPTOR_FIELD_SPACE_ID]=c.getCurrentSpace().id;var b=new HZ.lb.Context("imageTag_"+m.id,HZ.lb.Config.CONTEXT_TYPE_IMAGE_TAGS,a,[m.id],1,0,-1);b.setCurrentSpaceId(m.id),c.pushContext(b),c.refresh()}}},HZ.lb.plugins.AlternativeImages=function(){function a(){var a=b.getImageDivBounds(),d=c.width(),e=c.height(),f=a.h-e-60,g=(a.w-d)/2;c.css({left:g+"px",top:f+"px"})}var b,c,d=60;this.setOwner=function(a){b=a,c=$("<div>").attr("id","lbAltImages").addClass("fadeOutOnIdle"),b.addImageLayer(c[0]),c.click($.proxy(this.handleThumbClicked,this))},this.imageResized=function(){a()},this.imageDataUpdated=function(){this.imageChanged()},this.imageChanged=function(){var e,f,g=b.getCurrentSpace(),h=g.id,i=g.iids,j="";if(i.length>1){j="<div class='altImagesDiv'>";for(var k=0;k<i.length;k++)f=HZ.utils.Links.getSpaceImageUrl(h,d,d,null,null,k),e=0==k?"selected":"",j+="<img s='"+h+"' i='"+k+"' width='"+d+"' height='"+d+"' class='"+e+"' src='"+f+"'>";j+="</div>"}c.html(j),a()},this.handleThumbClicked=function(a){var b=$(a.target);if(b.attr("i")){c.find("img").removeClass("selected"),b.addClass("selected");var d=b.attr("i");HZ.lb.plugins.ImageViewer.setActiveSpaceImageIndex(d)}}},HZ.lb.plugins.CommonActions=new function(){var a,b,c,d,e,f,g,h,i,j;this.setOwner=function(k){a=k,g=_hgt("Save"),b=HZ.ui.ButtonFactory.createGrayIconButton(g,"AddToIdeabook"," saveButton hz-tall-button","hzi-Add-Photo-Button",_hgt("Save To Ideabook"),"addToIdeabook"),$(b).click($.proxy(this.handleAddToIdeabook,this)),c=HZ.ui.ButtonFactory.createGrayIconButton(_hgt("Colors"),null,"hz-tall-button",null,_hgt("Colors"),"colors"),$(c).click($.proxy(this.handleShowColorPicker,this)),d=HZ.ui.ButtonFactory.createGrayIconButton(_hgt("Email{contextEmailVerb}",{contextEmailVerb:""}),null,"emailButton hz-tall-button","hzi-Email",_hgt("Email"),"sendEmail"),$(d).click($.proxy(this.handleEmail,this)),e=HZ.ui.ButtonFactory.createGrayIconButton(_hgt("Embed"),null,"hz-tall-button",null,_hgt("Embed"),"embed"),$(e).click($.proxy(this.handleEmbed,this)),i=HZ.ui.ButtonFactory.createGrayIconButton("",null,"hz-tall-button","hzi-Print",_hgt("Print"),"print"),$(i).click($.proxy(this.handlePrint,this)),a.addActionItem(b,HZ.lb.ActionBar.ACTION_BAR_CENTER),a.addActionItem(d,HZ.lb.ActionBar.ACTION_BAR_CENTER),HZ.lb.Config.enableColorPickerBarCTA&&HZ.lb.Config.enableColorPicker&&!a.isEditMode()&&a.addActionItem(c,HZ.lb.ActionBar.ACTION_BAR_CENTER),a.addActionItem(e,HZ.lb.ActionBar.ACTION_BAR_RIGHT),a.addActionItem(i,HZ.lb.ActionBar.ACTION_BAR_RIGHT),j=HZ.ui.ButtonFactory.createGrayIconButton(_hgt("Edit"),null,"hz-tall-button",null,_hgt("Edit")),j.style.display="none",$(j).click($.proxy(this.handleEdit,this)),a.addActionItem(j,HZ.lb.ActionBar.ACTION_BAR_LEFT),f=HZ.ui.ButtonFactory.createGrayIconButton(_hgt("Add Image Tag"),null,"hz-tall-button",null,_hgt("Add Image Tag")),f.style.display="none",$(f).click($.proxy(this.handleImageTag,this)),a.addActionItem(f,HZ.lb.ActionBar.ACTION_BAR_LEFT),h=HZ.ui.ButtonFactory.createGrayIconButton(_hgt("Download"),null,"hz-tall-button",null,_hgt("Download")),h.style.display="none",$(h).click($.proxy(this.handleDownload,this)),a.addActionItem(h,HZ.lb.ActionBar.ACTION_BAR_LEFT)},this.imageResized=function(){this.imageChanged()},this.imageChanged=function(){var k=a.getCurrentSpace(),l=a.getImageDivBounds().w>800,m=a.isEditMode()?"none":"";b.style.display=m,c.style.display=m,d.style.display=m,e.style.display=m,j.style.display=k&&HZ.houseUtils.Permissions.hasPermission(k,HZ.houseUtils.Permissions.CAN_EDIT_HOUSE)?m:"none",f.style.display=l&&k&&HZ.houseUtils.Permissions.hasPermission(k,HZ.houseUtils.Permissions.CAN_EDIT_IMAGE_TAGS)?m:"none",l&&k&&k.ift?(h.style.display=m,i.style.display="none",f.style.display="none"):(h.style.display="none",i.style.display=m),l||(e.style.display="none"),l=a.getImageDivBounds().w>600,$(b).find(".label").html(l?g:_hgt("Save")),l||(i.style.display="none")},this.handleAddToCart=function(){var b=a.getCurrentSpace(),c=HZ.data.ProductsInfo.get(b.id).lid,d=$("#qtySelector").val()||1;HZ.cart.Actions.addItem(b.id,c,d)},this.handleAddToIdeabook=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getContext().getCurrentSpaceId();HZ.spaceActions.AddToIdeabookDialog.init(b),a.showDialog(HZ.spaceActions.AddToIdeabookDialog)}},this.handleShowColorPicker=function(){HZ.viewSpace&&HZ.viewSpace.colorPicker&&HZ.lb.plugins.ColorPicker.handleShowColors()},this.handleAskAQuestion=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getContext().getCurrentSpaceId(),c=a.getCurrentSpace(),d=HZ.data.Users.get(c.ow),e=d?d.p:0;HZ.spaceActions.QuestionDialog.init(b,e),HZ.spaceActions.QuestionDialog.setShowLinkOnNewWindow(!0),HZ.spaceActions.QuestionDialog.setQuestionTopic(a.isMarketplaceProduct()?HZ.spaceActions.QuestionDialog.PRODUCT_TOPIC:HZ.spaceActions.QuestionDialog.SPACE_TOPIC),a.showDialog(HZ.spaceActions.QuestionDialog)}},this.handleEmail=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getCurrentSpace();HZ.dialogs.EmailDialog.prepare({type:HZ.sendEmail.types.SPACE,referenceId:b.id,subject:b.t,message:b.prod?HZ.sendEmail.texts.DEFAULT_MESSAGE_PRODUCT:HZ.sendEmail.texts.DEFAULT_MESSAGE_SPACE}),a.showDialog(HZ.dialogs.EmailDialog)}},this.handleEmbed=function(){var b=a.getCurrentSpace();HZ.spaceActions.EmbedDialog.setSpaceId(b.id),a.showDialog(HZ.spaceActions.EmbedDialog)},this.handleImageTag=function(){var b=a.getCurrentSpace();if(b){var c=(HZ.data.Categories.getCategoryById(b.cat),HZ.utils.Links.getSpaceLinkWithSEO(b.id));window.open(c)}},this.handleDownload=function(){var b=a.getCurrentSpace();b&&b.ift&&HZ.ajaz.Services.getDownloadUrl(b.id,function(a){window.location.href=a.dl})},this.handleEdit=function(){var b=a.getCurrentSpace();if(b)if(a.lightboxEditorEnabled)0==HZ.lb.Utils.lightboxEditorLoaded?HZ.lb.Utils.loadLightboxEditor(!0):(a.setEditMode(!0),a.refresh(!1),a.handleResize());else{var c=HZ.utils.Links.getEditSpaceLink(b.id);window.open(c)}},this.handlePrint=function(){if(a.isSignupMode())a.showLoginDialog();else{var b=a.getCurrentSpace(),c=UIHelper.isMSIE;HZ.utils.Print.printSpace(b.id,c)}}},HZ.lb.plugins.ShareButtons=function(){function a(a){var c=b.getCurrentSpace();HZ.spaceActions.Share.openShareWindowForSpace(a,c.id)}var b,c=[];this.setOwner=function(d){b=d,c[0]=HZ.ui.ButtonFactory.createGrayIconButton("",null,"uiButtonFacebook hz-tall-button","hzi-Facebook","Facebook"),$(c[0]).attr("compId","shareOnFacebook").click(function(){a(HZ.spaceActions.Share.FACEBOOK)}),c[1]=HZ.ui.ButtonFactory.createGrayIconButton("",null,"uiButtonTwitter hz-tall-button","hzi-Twitter","Twitter"),$(c[1]).attr("compId","shareOnTwitter").click(function(){a(HZ.spaceActions.Share.TWITTER)}),c[2]=HZ.ui.ButtonFactory.createGrayIconButton("",null,"uiButtonGooglePlus hz-tall-button","hzi-Google","GooglePlus"),$(c[2]).attr("compId","shareOnGooglePlus").click(function(){a(HZ.spaceActions.Share.GOOGLE_PLUS)});for(var e=0;e<c.length;e++)b.addActionItem(c[e],HZ.lb.ActionBar.ACTION_BAR_RIGHT)},this.imageResized=function(){this.imageChanged()},this.imageChanged=function(){for(var a=!b.isEditMode()&&b.getImageDivBounds().w>750,d=0;d<c.length;d++)c[d].style.display=a?"":"none"}},HZ.lb.plugins.SignupPromo=function(){var a,b,c=!0;this.setOwner=function(c){a=c;var d=_hgt("Houzz is the new way to design your home."),e="<span class='icon-wrap'>"+_hgt("Save This Photo")+" <span class='more-icon'></span></span>",f="<table><tr><td><div class='signupTitle'>"+d+"</div></td><td><a href='javascript:;' class='hzBtn primary'>"+e+"</a></td></tr></table>";b=document.createElement("div"),b.id="lbSignupPromo",b.innerHTML="<div class='joinContainer'><center>"+f+"</center></div>",a.addImageLayer(b),$("a",b).click(function(){a.showLoginDialog(HZ.lb.Config.SIGNUP_TRACKING_JOIN_NOW)})},this.imageChanged=function(){this.isVisible()!=c&&(c=this.isVisible(),this.isVisible()?$(b).show():$(b).hide(),a.handleResize())},this.isVisible=function(){return!a.isMarketplaceProduct()}},HZ.lb.plugins.VisitorTracker=function(a){var b,c=-1,d=0;a>0&&(c=a),this.setOwner=function(a){b=a,d=0},this.imageChanged=function(){d++,d==c&&b.showLoginDialog(HZ.lb.Config.SIGNUP_TRACKING_VISITOR_TRACKER,HZ.lb.Config.SIGNUP_MSG_VISITOR_TRACKER,{displayMode:"dialog"})}},HZ.utils.Fullscreen=new function(){var a=null,b=["requestFullScreen","mozRequestFullScreen","webkitRequestFullScreen"],c=["exitFullscreen","mozCancelFullScreen","webkitCancelFullScreen"],d=["fullscreen","mozFullScreen","webkitIsFullScreen"],e=["fullscreenchange","mozfullscreenchange","webkitfullscreenchange"];this.canHaveFullscreen=function(){var c,d=document.documentElement;if(null===a){if(a=!1,UIHelper.isSafari)return!1;for(c=0;c<b.length;c++)d[b[c]]&&(a=c)}return 0!=a},this.enterFullscreen=function(){this.canHaveFullscreen()&&document.documentElement[b[a]](Element.ALLOW_KEYBOARD_INPUT)},this.exitFullscreen=function(){this.canHaveFullscreen()&&document[c[a]]()},this.isFullscreen=function(){return this.canHaveFullscreen()?document[d[a]]:!1},this.registerFullscreenHandler=function(b){this.canHaveFullscreen()&&document.addEventListener(e[a],b)},this.unregisterFullscreenHandler=function(b){this.canHaveFullscreen()&&document.removeEventListener(e[a],b)}},HZ.lb.plugins.BrowserHistoryManager=new function(){var a,b,c=!0,d=!1,e=!0,f=HZ.utils.Fullscreen;this.setOwner=function(b){a=b},this.setEnabled=function(a){c=a},this.pushIntoBrowserHistory=function(){var b=a.getCurrentSpace(),c=window.History.getState();if(null!=c.data&&c.data.id!=b.id){for(var d=a.getContextStack(),f=[],g=0;g<d.length;g++)f.push(d[g].getName());var h=HZ.utils.Styles.getStyleUrl(b.s),i=HZ.data.Categories.getCategoryById(b.cat),j=HZ.data.Users.get(b.ow),k=null;null!=j&&(k=j.d);var l=HZ.utils.PageTitles.getViewSpacePageTitle(b.t,h,i?i.name:null,b.ma,k),m=HZ.utils.Links.getSpaceLinkWithSEO(b.id);a.isEditMode()&&(m+="#lb-edit"),e?(window.History.pushState({id:b.id,contextName:f},l,m),e=!1):window.History.replaceState({id:b.id,contextName:f},l,m)}},this.imageChanged=function(){c&&!f.isFullscreen()&&this.pushIntoBrowserHistory()},this.fullscreenChanged=function(){c&&!f.isFullscreen()&&this.pushIntoBrowserHistory()},this.lightboxLoaded=function(){c&&(b=window.location.href,d=!0,f.registerFullscreenHandler($.proxy(this.fullscreenChanged,this)),History.Adapter.bind(window,"statechange",function(){var c=window.History.getState();d&&(c.url==b?a.hide():null!=c.data&&c.data.id!=a.getCurrentSpace().id&&a.reload(c.data.id,c.data.contextName))}))},this.lightboxUnloaded=function(){if(c){var a=window.History.getState();d=!1,e=!0,f.unregisterFullscreenHandler($.proxy(this.fullscreenChanged,this)),a.url!=b&&window.History.back()}}},HZ.lb.plugins.TrackingManager=function(){var a,b,c;this.setOwner=function(c){a=c,b=document.createElement("div"),b.id="lbTrackingIframe",a.addImageLayer(b)},this.imageChanged=function(){if(!a.isEditMode()){c&&(c.stop&&c.stop(),b.removeChild(c));var d=a.getCurrentSpace(),e=(HZ.utils.Styles.getStyleUrl(d.s),HZ.data.Categories.getCategoryById(d.cat),HZ.utils.Links.getSpaceLinkWithSEO(d.id));e+="/lightbox=on",c=document.createElement("iframe"),c.src=e,b.appendChild(c)}}},HZ.lb.plugins.FullscreenSupport=new function(){function a(){var a,b;j&&(f[0].style.display=c.isEditMode()?"none":"",h?(b=c.getImageDivBounds(),a={x:b.w-120,y:b.y+10,w:40,h:40}):(b=c.getImageBounds(),a={x:b.x+b.w-100,y:b.y+10,w:40,h:40}),d.css({top:a.y,left:a.x}))}function b(){var a,b=c.isInfoDivEnabled();j&&(h?(b?(a="Less",g.removeClass("fadeOutOnIdle").addClass("expanded")):(a="More",g.addClass("fadeOutOnIdle").removeClass("expanded")),g.html("<div>"+a+"</div>").show(),d.addClass("fullscreenMode"),f.attr("title",_hgt("Exit Fullscreen"))):(g.hide(),d.removeClass("fullscreenMode"),f.attr("title",_hgt("Enter Fullscreen"))))}var c,d,e,f,g,h=!1,i=HZ.utils.Fullscreen,j=!1;this.setOwner=function(a){c=a,d=$("<div>").attr("id","lbWindowButtons").addClass("fadeOutOnIdle").addClass("trackMe"),e=$('<a><i class="closeIcon"></i></a>').addClass("winCloseButton").addClass("winButton").attr("href","javascript:;").attr("compId","lbIVWinCloseButton").click($.proxy(function(a){return a.stopPropagation(),c.hide(),!1},c)),c.addImageLayer(d[0]),j=i.canHaveFullscreen(),j&&(i.registerFullscreenHandler($.proxy(this.handleFullscreenChanged,this)),f=$("<a>").attr("id","lbFullscreenButton").addClass("fullscreenButton").addClass("winButton").attr("href","javascript:;").attr("compId","lbFullScreenButton").click($.proxy(function(){this.handleFullscreenButtonClicked()},this)),d.prepend(f[0]),g=$("<a>").attr("id","lbMoreInfoButton").addClass("fadeOutOnIdle").attr("href","javascript:;").click($.proxy(function(){this.handleInfoButtonClicked()},this)),c.addImageLayer(g[0]),i.registerFullscreenHandler($.proxy(function(){this.handleFullscreenChanged()},this))),d.append(e[0])},this.lightboxLoaded=function(){h=!1,b()},this.imageResized=function(){a()},this.imageChanged=function(){a()},this.hideWindowButtons=function(){d&&d.css({display:"none"})},this.showWindowButtons=function(){d&&d.css({display:"block"})},this.lightboxUnloaded=function(){j&&i.exitFullscreen()},this.handleFullscreenButtonClicked=function(){this.setFullscreenEnabled(!h)},this.handleFullscreenChanged=function(){i.isFullscreen()!=h&&this.setFullscreenEnabled(!h)},this.setFullscreenEnabled=function(d){d?(c.setInfoDivEnabled(!1),i.isFullscreen()||i.enterFullscreen()):(c.setInfoDivEnabled(!0),i.isFullscreen()&&i.exitFullscreen(),c.handleResize()),h=d,a(),b()},this.handleInfoButtonClicked=function(){c.setInfoDivEnabled(!c.isInfoDivEnabled()),c.handleResize(),b()}},HZ.lb.plugins.ImagePreloader=function(){var a,b=[],c=0,d=10,e=3,f=0;this.setOwner=function(b){a=b},this.prefetchSpacePhoto=function(e){if(!this.isImageAvailable(e)){var f,g,h=HZ.data.Spaces.get(e),i=a.isSignupMode()?4:9,j=HZ.data.Categories.getCategoryById(h.cat),k=HZ.utils.Styles.getStyleUrl(h.s);h.bmu&&(i=HZ.lb.Config.BOOKMARKLET_UPLOAD_THUMBSIZE),f=HZ.utils.Links.getSpaceImageSeoThumbUrl(h.id,i,k,j),g=b[c]?b[c].image:new Image,g.src=f,b[c]={spaceId:e,image:g},c=(c+1)%d}},this.imageChanged=function(){var b,c;if(!(f++<1))for(c=a.getContext().getNextSpaceIds(e),b=0;b<c.length;b++)this.prefetchSpacePhoto(c[b])},this.isImageAvailable=function(a){for(var c=0;c<b.length;c++)if(b[c].spaceId==a)return!0;return!1}},HZ.ui.DetailsBox=function(a,b){var c,d,e,f,g,h,i=a,j=b;c=$("<div />",{id:i}).addClass("DetailsBox "+j),d=$("<div />").addClass("DetailsBoxContents "+j+"Contents"),e=$("<div />").addClass("DetailsBoxTitle "+j+"Title"),f=$("<img />").addClass("DetailsBoxImage "+j+"Image"),g=$("<div />").addClass("DetailsBoxBody "+j+"Body"),h=$("<div />").addClass("DetailsBoxIcon"),d.append(e,f,g),c.append(d,h),this.getContents=function(){return c[0]},this.setClickable=function(a){a?c.addClass("clickable"):c.removeClass("clickable")},this.setTitle=function(a){e.empty(),e.append(a)},this.setImageUrl=function(a){a?(f.attr("src",a),f.show()):(f.attr("src",null),f.hide())},this.setBody=function(a){g.empty(),a?(g.append(a),g.show()):g.hide()},this.setVisible=function(a){a?c.show():(c.hide(),this.setImageUrl(null))},this.setPosition=function(a,b,d,e){var g=2*d/3>a,h=2*e/3>b,i=null==f.attr("src")?"None":g?"Left":"Right";c[0].style.left=a+"px",c[0].style.top=b+"px",c.addClass("DetailsBox"+(h?"Top":"Bottom")+(g?"Left":"Right")).removeClass("DetailsBox"+(h?"Bottom":"Top")+(g?"Left":"Right")).removeClass("DetailsBox"+(h?"Bottom":"Top")+(g?"Right":"Left")).removeClass("DetailsBox"+(h?"Top":"Bottom")+(g?"Right":"Left")).removeClass("DetailsBoxImageLeft").removeClass("DetailsBoxImageRight").removeClass("DetailsBoxImageNone").addClass("DetailsBoxImage"+i)}},lightbox.addPlugin(new HZ.lb.plugins.GalleryInfo),lightbox.addPlugin(new HZ.lb.plugins.RecommendationsHeader),lightbox.addPlugin(new HZ.lb.plugins.ProfessionalInfo),lightbox.addPlugin(new HZ.lb.plugins.PaidProInfo),lightbox.addPlugin(new HZ.lb.plugins.SpaceInfo),lightbox.addPlugin(HZ.lb.plugins.ProductInfo),lightbox.addPlugin(HZ.lb.plugins.ColorPicker),lightbox.addPlugin(HZ.lb.plugins.ImageTags),lightbox.addPlugin(HZ.lb.plugins.MarketPlaceAds),lightbox.addPlugin(HZ.lb.plugins.RelatedProducts),lightbox.addPlugin(HZ.lb.plugins.Gtm),lightbox.addPlugin(new HZ.lb.plugins.ProjectInfo),lightbox.addPlugin(new HZ.lb.plugins.PaletteSourcePhoto),lightbox.addPlugin(new HZ.lb.plugins.BannerAds),lightbox.addPlugin(new HZ.lb.plugins.ProductAdInfo),lightbox.addPlugin(new HZ.lb.plugins.PPCAdInfo),lightbox.addPlugin(new HZ.lb.plugins.TrackImpression),lightbox.addPlugin(new HZ.lb.plugins.TrackClick),lightbox.addPlugin(new HZ.lb.plugins.Recommendations),lightbox.addPlugin(new HZ.lb.plugins.Comments),lightbox.addPlugin(HZ.lb.plugins.QuestionsInfo),lightbox.addPlugin(new HZ.lb.plugins.AlternativeImages),lightbox.addPlugin(HZ.lb.plugins.ContextBreadcrumbs),UIHelper.isIE7||lightbox.addPlugin(HZ.lb.plugins.BrowserHistoryManager),lightbox.addPlugin(new HZ.lb.plugins.TrackingManager),lightbox.addPlugin(HZ.lb.plugins.CommonActions),lightbox.addPlugin(new HZ.lb.plugins.ShareButtons);var imageCache=new HZ.lb.plugins.ImagePreloader;lightbox.addPlugin(imageCache),HZ.lb.plugins.ImageViewer.setImageCache(imageCache);

window.hzmr.push("lightboxPlugins:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End lightboxPlugins.js  **************/
/************* Start returnPolicy.js for locale en-US **************/
try {HZ.ns("HZ.module"),HZ.module.ReturnPolicy=new function(){var a=$('<div class="returnPolicyContent selected"></div>'),b=$('<div class="damagePolicyContent"></div>'),c=$('<div class="warrantyContent"></div>'),d=$('<div class="mapTabButtonLeft selected">'+_hgt("Return Policy")+"</div>"),e=$('<div class="mapTabButtonMiddle">'+_hgt("Damage Policy")+"</div>"),f=$('<div class="mapTabButtonRight ">'+_hgt("Warranty")+"</div>"),g=$('<div id="mapTabs"></div>'),h=function(g){d.removeClass("selected"),e.removeClass("selected"),f.removeClass("selected"),a.removeClass("selected"),b.removeClass("selected"),c.removeClass("selected"),g.addClass("selected")};d.on("click",function(){h(a),d.addClass("selected")}),e.on("click",function(){h(b),e.addClass("selected")}),f.on("click",function(){h(c),f.addClass("selected")});var i=$("<div></div>");g.append(d).append(e).append(f),i.append(g),i.append(a).append(b).append(c);var j=new HZ.ui.yamdi.Dialog;j.init({title:"Policies",body:i,dialogClassName:"returnPolicyDlg",onViewLoaded:function(){h(a),d.addClass("selected")}}),this.handleReturnPolicyClick=function(){var a=$(this).attr("vendorId"),b=$(this).attr("hid");HZ.ui.yamdi.Common.loading(_hgt("Loading return policy...")),HZ.ajaz.Services.Cart.getReturnPolicy(b,a,k)};var k=function(a){var b,c,d;a&&"true"==a.success&&(b=a.returnPolicy,c=a.damagePolicy,d=a.warranty,HZ.data.VendorsInfo.put(a.vendorId,{returnPolicy:b,damagePolicy:c,warranty:d}),o(b,c,d))},l=function(b){a.html(b)},m=function(a){b.html(a)},n=function(a){c.html(a)},o=function(a,b,c){HZ.ui.yamdi.Common.hideAllDialogs(),l(a),m(b),n(c),HZ.ui.Yamdi.show(j)}};

window.hzmr.push("returnPolicy:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End returnPolicy.js  **************/
/************* Start profileUtils.js for locale en-US **************/
try {HZ.ns("HZ.profileUtils"),HZ.profileUtils.SaveAndExit=new function(){function a(){$(".profile-action-button").off("click").find("span").text("Done Editing"),$(window).unbind("beforeunload")}function b(){$("form.withSaveAndExit").find("input,textarea").on("input",function(a){d(a)}).on("change",function(a){d(a)}).on("focus",function(a){c(a)}).end().find("select").on("change",function(a){d(a)}).on("focus",function(a){c(a)})}function c(a){var b=$(a.target);"undefined"==typeof e[b.attr("name")]&&(e[b.attr("name")]=b.val())}function d(){$(".profile-action-button").find("span").text(_hgt("Save and Exit")).end().off("click").on("click",function(a){a.preventDefault(),$(window).unbind("beforeunload"),$('[name="saveAndExit"]').val(!0).parents("form").submit()}),$("form.withSaveAndExit .hzBtn.primary").on("click",function(){a()}),$(window).unbind("beforeunload").bind("beforeunload",function(){var a=!0;for(var b in e){var c=$('[name="'+b+'"]').val();a=c===e[b]?!1:!0}return a?"Your changes have not been saved yet!":void 0})}var e={};this.init=function(a){a?setTimeout(b,a):b()},this.resetSaveAndExit=function(){a()}},HZ.profileUtils.ProType=new function(){this.fixProTypes=function(){var a=window.location.hash;a=a.replace("#","");var b=HZ.data.ProfessionalTypes.get(a);if(b){b=$("<div/>").text(b).html();var c=$("#firstProfessionalType").html(),d=$("#moreProfessionalTypes").html(),e=d.replace(b,c);e!=d&&($("#firstProfessionalType").html(b),$("#moreProfessionalTypes").html(e))}}},HZ.profileUtils.ContactUser=new function(){var a="",b="",c="",d="";this.init=function(e){a=e.userDisplayName,b=e.userName,c=e.senderName,d=e.fromEmail},this.showSendEmailDialog=function(){HZ.dialogs.ContactProDialog||(HZ.dialogs.ContactProDialog=new HZ.email.ContactProDialog),HZ.dialogs.ContactProDialog.prepare({toUserName:b,toUserDisplayName:a,subject:_hgt("Houzz message from {senderName}",{senderName:c}),message:"",type:HZ.sendEmail.types.USER}),HZ.ui.Yamdi.show(HZ.dialogs.ContactProDialog)}},HZ.profileUtils.ContactPro=new function(){var a=0,b="",c="",d="",e="";this.init=function(f){a=f.sessionType,b=f.userDisplayName,c=f.userName,d=f.senderName,e=f.fromEmail},this.showSendEmailDialog=function(f){HZ.dialogs.ContactProDialog||(HZ.dialogs.ContactProDialog=new HZ.email.ContactProDialog),0!=a?f?HZ.ui.yamdi.Common.confirm("",_hgt("Contacting pros on Houzz is reserved for personal project inquiries only. I confirm this is not a promotional message or solicitation"),_hgt("Click to confirm")+" >>",function(){HZ.ui.yamdi.Common.hideAllDialogs(),HZ.dialogs.ContactProDialog.prepare({toUserName:c,toUserDisplayName:b,subject:_hgt("Houzz project inquiry from {senderName}",{senderName:d}),message:"",fromEmail:e}),HZ.ui.Yamdi.show(HZ.dialogs.ContactProDialog)}):(HZ.dialogs.ContactProDialog.prepare({toUserName:c,toUserDisplayName:b,subject:_hgt("Houzz project inquiry from {senderName}",{senderName:d}),message:""}),HZ.ui.Yamdi.show(HZ.dialogs.ContactProDialog)):(HZ.dialogs.GuestContactProDialog||(HZ.dialogs.GuestContactProDialog=new HZ.email.GuestContactProDialog),HZ.dialogs.GuestContactProDialog.prepare({toUserName:c,toUserDisplayName:b,subject:_hgt("Houzz project inquiry"),message:""}),HZ.ui.Yamdi.show(HZ.dialogs.GuestContactProDialog))}};

window.hzmr.push("profileUtils:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End profileUtils.js  **************/
/************* Start spacePreview.js for locale en-US **************/
try {HZ.ns("HZ.modules"),HZ.modules.SpacePreview=new function(){var a=new RegExp("https?://(?:www\\.)?(?:mytest|houzztest|houzz2?|stghouzz)\\.[A-Za-z\\./]*/("+HZ.utils.Config.spaceCommand+"|"+HZ.utils.Config.galleryCommand+"|projects)/(\\d+)(?=(?:\\D|$))[/\\?=&\\+%\\w-#]*","g");this.init=function(a){if("undefined"!=typeof a&&a.length){var c;c=$('<div class="generatedPhotoCtn clearfix"></div>').insertAfter(a.parents(".bubble--post").length?a.parents(".bubble--post"):a),c.data("urlToId",{}),a.data("preview",{analyzing:!1}),""!==a.val()&&b(a,c);var d=function(){var d=$(this).data("preview"),e=d&&d.analyzing?d.analyzing:!1;e||b(a,c)};a.bind("keyup.linkConverter",$.debounce(700,d)).bind("change.linkConverter",d).bind("paste.linkConverter",function(){setTimeout(d,0)}).bind("reset",d),c.on("click",".removeThumb",function(){e($(this),a,c)})}};var b=function(b,e){var f,g,h,i,j,k=[],l=[],m=[];g=b.data("preview"),g&&(g.analyzing=!0),b.data("preview",g),f=b.val(),h=e.data("urlToId"),k=f.match(a),null===k&&(k=[]),j=k.length;for(var n=0;j>n;n++){var i=k[n];"undefined"==typeof h[i]&&l.push(i)}for(var i in h)h.hasOwnProperty(i)&&-1===$.inArray(i,k)&&m.push(i);m.length&&d(e,m),l.length?c(k,b,e):b.data("preview",{analyzing:!1})},c=function(a,b,c){var d,e,f,g,h=0,i=a.join(","),j=$("#questionsGuidelines"),k=function(a){var b="";for(var i in a)if(a.hasOwnProperty(i)&&(e=a[i],d=HZ.data.Spaces.get(e),d&&d.iids&&d.iids[0])){g=d.iids[0],f=HZ.data.Images.get(g),f&&(h=f.ts),h=h?h:"0000";var k=HZ.utils.Links.C.baseStaticImageUrl+g+"_5-"+h+"/home-design.jpg";b+='<div class="houseThumbnail" data-id="'+e+'"><img width="75px" height="55px" src="'+k+'"/><a href="javascript:;" class="removeThumb"></a></div>'}b?c.html(b).show():c.html("").hide(),b&&j.length>0&&j.hide()};i?HZ.ajaz.Services.getMinimalSpaceData(i,function(a){if(a&&"true"===a.success&&a.spaces&&a.images){var d=HZ.data.Spaces.getCollection(),e=HZ.data.Images.getCollection();$.extend(!0,d,a.spaces),$.extend(!0,e,a.images),HZ.data.Spaces.addAll(d),HZ.data.Images.addAll(e),k(a.urlToId),c.data("urlToId",a.urlToId),b.data("preview",{analyzing:!1})}else b.data("preview",{analyzing:!1})}):b.data("preview",{analyzing:!1})},d=function(a,b){for(var c=a.data("urlToId"),d=b.length,e=0;d>e;e++){var f=b[e],g=c[f];a.find("[data-id="+g+"]").remove(),delete c[f]}""==a.html()&&a.hide(),a.data("urlToId",c)},e=function(a,b,c){var d,e,f,g,h=c.data("urlToId");d=a.closest(".houseThumbnail"),e=d.attr("data-id");for(var i in h)h.hasOwnProperty(i)&&h[i]===e&&(d.hide().remove(),f=b.val(),g=f.replace(i,""),b.val(g),delete h[i]);""==c.html()&&c.hide(),c.data("urlToId",h)}};

window.hzmr.push("spacePreview:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End spacePreview.js  **************/
/************* Start colorPicker.js for locale en-US **************/
try {HZ.ns("HZ.viewSpace"),HZ.viewSpace.colorPicker=new function(){function a(a,b){HZ.ajaz.Services.getBehrColors(a,function(a){a.success&&"true"==a.success&&a.palette&&a.palette.length>0?d(a.palette,b):HZ.viewSpace.colorPicker.resetPalette()})}function b(){for(var a=[],b=[],c=0;c<HZ.viewSpace.colorPicker.initialColorData.length;c++){var e=HZ.viewSpace.colorPicker.initialColorData[c],f=x(e.hex);a[c]=[f.r,f.g,f.b];var g=t(e.x,e.y,HZ.viewSpace.colorPicker.initialImageData.width,HZ.viewSpace.colorPicker.initialImageData.height);b[c]={x:g.left,y:g.top}}HZ.ajaz.Services.getBehrColors(a,function(a){a.success&&"true"==a.success&&a.palette&&a.palette.length>0?d(a.palette,b):HZ.viewSpace.colorPicker.resetPalette()})}function c(a,b,c,d){var e=[[b,c,d]];HZ.ajaz.Services.getBehrColors(e,function(b){if(b.success&&"true"==b.success)if(b.palette&&b.palette.length>0){var c=b.palette[0][0];r(a,c.name,c.code,c.red,c.green,c.blue)}else HZ.viewSpace.colorPicker.resetPalette();else HZ.viewSpace.colorPicker.resetPalette()})}function d(a,b){if(HZ.viewSpace.colorPicker.img){HZ.viewSpace.colorPicker.currentLocations=[];var c=5,d=Math.min(a.length,b.length);c>d&&(c=d),HZ.viewSpace.colorPicker.paletteColors=$(".colorPickerContainer").last().find("#palettes"),HZ.viewSpace.colorPicker.locatorContainer=$("<div class='locatorContainer trackMe' scopeid='colorLocatorContainer' objid='"+HZ.viewSpace.colorPicker.objectId+"'></div>"),HZ.viewSpace.colorPicker.exitBtn=$('<div class="exitPicker" compid="exitColorPicker"><span class="closeIcon"></span><span class="closeText bold-text">Exit Colors</span></div>'),HZ.viewSpace.colorPicker.exitBtn.off("click").on("click",HZ.viewSpace.colorPicker.triggerDismiss),HZ.viewSpace.colorPicker.locatorContainer.append(HZ.viewSpace.colorPicker.exitBtn),HZ.viewSpace.colorPicker.locatorContainer.css({width:HZ.viewSpace.colorPicker.img.width(),height:HZ.viewSpace.colorPicker.img.height(),top:HZ.viewSpace.colorPicker.img.css("top"),left:HZ.viewSpace.colorPicker.img.css("left")}),HZ.viewSpace.colorPicker.imgContainer.append(HZ.viewSpace.colorPicker.locatorContainer),HZ.viewSpace.colorPicker.currentColors=[];for(var h=0;c>h;h++){var i=a[h][0],j=w(i.red,i.green,i.blue);HZ.viewSpace.colorPicker.currentColors[h]={name:i.name,code:i.code,color:j,r:i.red,g:i.green,b:i.blue};var k=$('<li><span id="palette_'+h+'" class="paletteColor"></span></li>');HZ.viewSpace.colorPicker.paletteColors.append(k),k.find("span").css("background-color",j),k.on("mouseenter",function(){var a=$(this).find(".paletteColor").attr("id").split("_")[1];e(a)}).on("mouseleave",function(){var a=$(this).find(".paletteColor").attr("id").split("_")[1];f(a)}).on("click",function(){var a=$(this).find(".paletteColor").attr("id").split("_")[1];g(a,!0)}),HZ.viewSpace.colorPicker.currentLocations[h]={top:b[h].y,left:b[h].x};var l=s(h),m=$('<div id="locator_'+h+'" class="colorLocator" dragable="false"></div>').css({top:l.top-19,left:l.left-19,backgroundColor:j}).attr("data-color",j).attr("data-name",i.name+" "+i.code).attr("data-code",i.code),o=$("<div class='paintTooltip hidden initial'><span class='swatch'></span><div class='paintInfo'><div class='paintName bold-text'>Name</div><a class='colorLink bold-text paintLink' href='' compid='colorPickerTooltipLink' target='_blank'>Get this paint <span class='more-icon'></span></a></div><span class='tipBorder'></span><span class='tip'></span></div>");m.append(o),HZ.viewSpace.colorPicker.locatorContainer.append(m),m.on("mouseenter",function(){var a=$(this).attr("id").split("_")[1];e(a)}).on("mouseleave",function(){var a=$(this).attr("id").split("_")[1];f(a)})}g(0),n(),$(HZ.viewSpace.colorPicker.btn).removeClass("disabled").find(".showMeColors").addClass("hidden").next().removeClass("hidden"),$(HZ.viewSpace.colorPicker.btn).parent().addClass("opened"),$(".colorPickerContainer").last().removeClass("hidden").parent().removeClass("hidden").addClass("opened").next().removeClass("hidden");var p=HZ.viewSpace.colorPicker.imgContainer.next();p&&p.height()>1&&p.hide(),HZ.viewSpace.colorPicker.displayState=!0,HZ.viewSpace.colorPicker.allowExit=!0}}function e(a){var b=HZ.viewSpace.colorPicker.paletteColors.find("#palette_"+a),c=HZ.viewSpace.colorPicker.locatorContainer.find("#locator_"+a);b.parent().hasClass("selected")?(b.parent().find(".paletteColor").addClass("hover"),c.css({opacity:"1",boxShadow:"0 0 1px 1px #fff"})):(b.parent().siblings(".hover").each(function(){var a=$(this);a.removeClass("hover");var b=a.find(".paletteColor").attr("id").split("_")[1],c=HZ.viewSpace.colorPicker.locatorContainer.find("#locator_"+b);i(c)}),b.parent().find(".paletteColor").addClass("hover"),c.css({opacity:"1",boxShadow:"0 0 1px 1px #fff"}),h(c))}function f(a){var b=HZ.viewSpace.colorPicker.paletteColors.find("#palette_"+a),c=HZ.viewSpace.colorPicker.locatorContainer.find("#locator_"+a);b.removeClass("hover"),b.parent().hasClass("selected")||(c.css({opacity:"0.7",boxShadow:""}),i(c))}function g(a,b){var c=HZ.viewSpace.colorPicker.paletteColors.find("#palette_"+a),d=HZ.viewSpace.colorPicker.locatorContainer.find("#locator_"+a);if(b&&c.parent().hasClass("selected"))return c.parent().removeClass("selected"),d.css({opacity:"0.7",boxShadow:""}),void i(d);var e=c.parent().siblings(".selected");if(e.length){var f=e.find(".paletteColor").attr("id").split("_")[1],g=HZ.viewSpace.colorPicker.locatorContainer.find("#locator_"+f);g.css({opacity:"0.7",boxShadow:""}),e.removeClass("selected"),i(g)}c.parent().addClass("selected"),d.css({opacity:"1",boxShadow:"0 0 1px 1px #fff"}),h(d)}function h(a){var b=$(a.find(".paintTooltip")),c=$(a).attr("id").split("_")[1],d=b.hasClass("initial"),e=$(b.find(".tipBorder")),f=$(b.find(".tip")),g=HZ.viewSpace.colorPicker.getSecondaryBuyLink();b.find(".swatch").css({backgroundColor:a.attr("data-color")}),b.find(".paintName").html(a.attr("data-name")),b.find(".paintLink").attr("href",g+a.attr("data-code"));var h=2,i=20,k=b.outerWidth(),l=b.outerHeight(),m=36,n=parseInt(a.css("top")),o=parseInt(a.css("left")),p=-(l+i),q=m+i,r=-(k/2)+m/2,s=22,t=k/2-s/2,u="bottom";if(n>Math.abs(p)?b.removeClass("bottom").addClass("top").css({top:p}):(b.removeClass("top").addClass("bottom").css({top:q}),u="top"),150>n&&HZ.viewSpace.colorPicker.imgWidth-o<300&&(b.removeClass("top").addClass("bottom").css({top:q}),u="top"),o<Math.abs(r))b.css({left:-o-h}),e.css({left:o+(m-s)/2}),f.css({left:1+o+(m-s)/2});else if(HZ.viewSpace.colorPicker.imgWidth-o<k){var v=-(k-(HZ.viewSpace.colorPicker.imgWidth-o));b.css({left:v-h}),e.css({left:Math.abs(v)+(m-s)/2}),f.css({left:1+Math.abs(v)+(m-s)/2})}else b.css({left:r-h}),e.css({left:t}),f.css({left:1+t});d&&0==c&&j(a,u),b.removeClass("hidden")}function i(a){l(a),a.find(".paintTooltip").addClass("hidden")}function j(a,b){if(!k(a)){setTimeout(function(){m(a)},3600);var c=$('<div class="arrows"></div>');if("top"==b)var d=$('<span class="arrow arrowTop"><span class="innerArrow"></span></span>');var e=$('<span class="arrow arrowRight"><span class="innerArrow"></span></span>');if("bottom"==b)var f=$('<span class="arrow arrowBottom"><span class="innerArrow"></span></span>');var g=$('<span class="arrow arrowLeft"><span class="innerArrow"></span></span>');"top"==b&&c.append(d),c.append(e),"bottom"==b&&c.append(f),c.append(g),a.append(c),"top"==b&&setInterval(function(){d.animate({top:"7px"},215).delay(10).animate({top:"0px"},215)},450),setInterval(function(){e.animate({right:"7px"},215).delay(10).animate({right:"0px"},215)},450),"bottom"==b&&setInterval(function(){f.animate({bottom:"7px"},215).delay(10).animate({bottom:"0px"},215)},450),setInterval(function(){g.animate({left:"7px"},215).delay(10).animate({left:"0px"},215)},450)}}function k(a){return a.find(".arrows").length}function l(a){k(a)&&a.find(".paintTooltip").removeClass("initial").end().find(".arrows").remove()}function m(a){k(a)&&a.find(".paintTooltip").removeClass("initial").end().find(".arrows").animate({opacity:0},450,function(){$(this).remove()})}function n(){HZ.viewSpace.colorPicker.imgContainer.on("touchstart mousedown",p),HZ.viewSpace.colorPicker.imgContainer.on("touchend mouseup",q)}function o(){if(HZ.viewSpace.colorPicker.imgContainer){var a=HZ.viewSpace.colorPicker.imgContainer.next();a&&a.height()>1&&a.show(),HZ.viewSpace.colorPicker.imgContainer.unbind("touchstart mousedown"),HZ.viewSpace.colorPicker.imgContainer.unbind("touchend mouseup")}}function p(a){HZ.viewSpace.colorPicker.moveCoords="touchstart"===a.type?{x:a.originalEvent.changedTouches[0].pageX,y:a.originalEvent.changedTouches[0].pageY}:{x:a.pageX,y:a.pageY};var b=HZ.viewSpace.colorPicker.img.offset(),c=HZ.viewSpace.colorPicker.img.naturalWidth(),d=HZ.viewSpace.colorPicker.img.naturalHeight(),e=HZ.viewSpace.colorPicker.colorAnalyzer.imageData.data,f=$(a.target);f.hasClass("colorLocator")&&(a.preventDefault(),HZ.viewSpace.colorPicker.imgContainer.on("touchmove mousemove",function(a){a.preventDefault();var g=f.attr("id").split("_")[1];if(HZ.viewSpace.colorPicker.paletteColors.find("#palette_"+g).addClass("disabled"),HZ.viewSpace.colorPicker.exitBtn.addClass("hidden"),i(f),"touchmove"===a.type)var h=Math.ceil(a.originalEvent.changedTouches[0].pageX-b.left),j=Math.ceil(a.originalEvent.changedTouches[0].pageY-b.top);else var h=Math.ceil(a.pageX-b.left),j=Math.ceil(a.pageY-b.top);var k=u(h,j),l=k.left,m=k.top;HZ.viewSpace.colorPicker.currentLocations[g].top=m,HZ.viewSpace.colorPicker.currentLocations[g].left=l;var n=17;if(n>l||l>c-n||n>m||m>d-n)return void HZ.viewSpace.colorPicker.imgContainer.trigger("touchend mouseup");var o=e[4*(c*m+l)],p=e[4*(c*m+l)+1],q=e[4*(c*m+l)+2],r=(e[4*(c*m+l)+3],w(o,p,q));f.css({top:j-n,left:h-n,backgroundColor:r}).attr("data-color",r),HZ.viewSpace.colorPicker.imgContainer.addClass("move")}))}function q(a){HZ.viewSpace.colorPicker.imgContainer.unbind("touchmove mousemove"),HZ.viewSpace.colorPicker.imgContainer.removeClass("move");var b=$(a.target);if(b.hasClass("colorLocator")){a.preventDefault();var d=(b.css("backgroundColor"),b.attr("id").split("_")[1]);if(HZ.viewSpace.colorPicker.moveCoords&&HZ.viewSpace.colorPicker.moveCoords.x==a.pageX&&HZ.viewSpace.colorPicker.moveCoords.y==a.pageY)return void g(d,!1);var e=b.attr("data-color"),f=x(e),h=f.r,i=f.g,j=f.b;c(d,h,i,j)}}function r(a,b,c,d,e,f){var h=HZ.viewSpace.colorPicker.paletteColors.find("#palette_"+a),i=HZ.viewSpace.colorPicker.locatorContainer.find("#locator_"+a),j=w(d,e,f);HZ.viewSpace.colorPicker.exitBtn.removeClass("hidden"),h.css("backgroundColor",j).attr("data-color",j).attr("data-name",b+" "+c).attr("data-code",c).removeClass("disabled"),i.attr("data-color",j).attr("data-name",b+" "+c).attr("data-code",c),HZ.viewSpace.colorPicker.currentColors[a]={name:b,color:j,code:c,r:d,g:e,b:f},g(a,!1)}function s(a){var b=HZ.viewSpace.colorPicker.currentLocations[a].top,c=HZ.viewSpace.colorPicker.currentLocations[a].left,d=HZ.viewSpace.colorPicker.img.width(),e=HZ.viewSpace.colorPicker.img.naturalWidth(),f=HZ.viewSpace.colorPicker.img.height(),g=HZ.viewSpace.colorPicker.img.naturalHeight(),h=c*d/e,i=b*f/g;return{left:h,top:i}}function t(a,b,c,d){var e=HZ.viewSpace.colorPicker.img.naturalWidth(),f=HZ.viewSpace.colorPicker.img.naturalHeight(),g=Math.ceil(a*e/c),h=Math.ceil(b*f/d);return{left:g,top:h}}function u(a,b){var c=HZ.viewSpace.colorPicker.img.width(),d=HZ.viewSpace.colorPicker.img.naturalWidth(),e=HZ.viewSpace.colorPicker.img.height(),f=HZ.viewSpace.colorPicker.img.naturalHeight(),g=Math.ceil(a*d/c),h=Math.ceil(b*f/e);return{left:g,top:h}}function v(){var a=document.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}function w(a,b,c){return"#"+y(a)+y(b)+y(c)}function x(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}function y(a){return isNaN(a)?"00":z[(a-a%16)/16]+z[a%16]}this.init=function(){this.displayState=!1,this.allowExit=!0,this.dismissState=!1},this.initWithColors=function(a,b,c,d,e){this.initialColorData=d,this.initialImageData=e,this.getInitialColors(a,b,c)},this.showColorPicker=function(a){$(a).removeClass("hide")},this.hideColorPicker=function(a){$(a).addClass("hide")},this.isColorPickerHidden=function(a){return $(a).hasClass("hide")},this.isColorPickerOpened=function(){return this.displayState},this.isExitAllowed=function(){return this.allowExit},this.isColorPickerDismissed=function(){return this.dismissState},this.dismissColorPicker=function(a){HZ.viewSpace.colorPicker.allowExit&&(HZ.viewSpace.colorPicker.displayState===!0?HZ.viewSpace.colorPicker.resetPalette():a&&(HZ.viewSpace.colorPicker.hideColorPicker(a),HZ.viewSpace.colorPicker.dismissState=!0),HZ.viewSpace.colorPicker.removeLocators())},this.triggerDismiss=function(){$(".colorPickerContainer").last().closest(".colorPicker").find(".dismissBtn").trigger("click")},this.setBuyLink=function(a){this.buyLink=a},this.setSecondaryBuyLink=function(a){this.secondaryBuyLink=a},this.getBuyLink=function(){return this.buyLink+"/?_BUY_="},this.getSecondaryBuyLink=function(){return this.secondaryBuyLink+"/?_BUY_="},this.getBuyBehrColorLink=function(a){var b=this.getBuyLink();b+=this.outputCurrentPaletteCodes(),$(a).attr("target","_blank").attr("href",b)},this.getColorSmartLink=function(a){var b="http://www.behr.com/consumer/colors/paint?utm_source=houzz&palette=";b+=this.outputCurrentPaletteCodes(),$(a).attr("target","_blank").attr("href",b)},this.outputCurrentPaletteCodes=function(){for(var a=HZ.viewSpace.colorPicker.getPalette(),b="",c=0;c<a.length;c++)b+=a[c].code+",";return b.slice(0,-1)},this.generatePaletteShareUrl=function(){for(var a=HZ.viewSpace.colorPicker.getPalette(),b=HZ.viewSpace.colorPicker.getLocations(),c=HZ.viewSpace.colorPicker.img.naturalWidth(),d=HZ.viewSpace.colorPicker.img.naturalHeight(),e="/ac=ocp",f=0;f<a.length;f++){{u(b[f].left,b[f].top)}e+="/c"+f+"="+a[f].color.substring(1)+"/x"+f+"="+b[f].left+"/y"+f+"="+b[f].top}return e+="/w="+c+"/h="+d},this.generatePaletteImageUrl=function(){for(var a=HZ.viewSpace.colorPicker.getPalette(),b="",c=0;c<a.length;c++)b+="/c"+c+"="+a[c].color.substring(1);return b},this.getColors=function(b,c,d){return v()?void($(d).hasClass("disabled")||$(d).parent().hasClass("opened")||(this.colorAnalyzer||(this.colorAnalyzer=new ColorAnalyzer),this.objectId=b,this.img=$("."+c),this.imgWidth=this.img.width(),this.imgHeight=this.img.height(),this.imgContainer=this.img.parent(),d&&(this.btn=$(d),$(d).addClass("disabled")),this.colorAnalyzer.getColors(this.img,a),this.allowExit=!1)):void this.showUpgradeDialog()},this.getInitialColors=function(a,c,d){if(!v())return void this.showUpgradeDialog();this.colorAnalyzer||(this.colorAnalyzer=new ColorAnalyzer),this.objectId=a,this.img=$("."+c),this.imgWidth=this.img.width(),this.imgHeight=this.img.height(),this.imgContainer=this.img.parent();var e=$(d);e&&(this.btn=$(e),$(e).addClass("disabled")),this.colorAnalyzer.getColors(this.img,b),this.allowExit=!1},this.showUpgradeDialog=function(){var a="Please update browser",b="You are using an older browser that does not work with the color tool. Please update your browser and try again.",c="OK",d=null;(UIHelper.isIE7||UIHelper.isIE8)&&(c="Upgrade Browser",d="http://windows.microsoft.com/en-US/internet-explorer/download-ie"),HZ.ui.yamdi.Common.confirm(a,b,c,function(){d&&window.open(d),HZ.ui.yamdi.Common.hideAllDialogs()})},this.removeLocators=function(){this.locatorContainer&&this.locatorContainer.length&&this.locatorContainer.find(".colorLocator").remove()},this.repositionLocators=function(){if(this.locatorContainer&&this.locatorContainer.length&&this.img){for(var a=this.locatorContainer.find(".colorLocator"),b=0;b<a.length;b++){var c=$(a[b]),d=s(b);c.css({left:d.left-19,top:d.top-19})}this.locatorContainer.css({width:this.img.width(),height:this.img.height(),top:this.img.css("top"),left:this.img.css("left")}),this.imgWidth=this.img.width(),this.imgHeight=this.img.height()}},this.getPalette=function(){return this.currentColors},this.getLocations=function(){return this.currentLocations},this.resetPalette=function(){this.colorAnalyzer&&this.colorAnalyzer.reset(),$(this.btn).removeClass("disabled").find(".showMeColors").removeClass("hidden").next().addClass("hidden"),$(this.btn).parent().removeClass("opened"),this.paletteColors&&this.paletteColors.html(""),$(".colorPickerContainer").last().addClass("hidden").parent().addClass("hidden").removeClass("opened").next().addClass("hidden"),this.locatorContainer&&(this.locatorContainer.html(""),this.locatorContainer.remove()),this.btn=null,this.img=null,o(),this.imgContainer=null,this.locatorContainer=null,this.paletteColors=null,this.currentColors=null,this.currentLocations=null,this.exitBtn=null,this.displayState=!1,this.allowExit=!0};var z=new Array("0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f")};

window.hzmr.push("colorPicker:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End colorPicker.js  **************/
/************* Start colorAnalyzer.js for locale en-US **************/
try {var ColorAnalyzer=function(){this.imageData,this.imageProxy=new ImageProxy("http://st.houzz.com/static/ImageProxyFrame.html")};if(ColorAnalyzer.prototype.getColors=function(a,b){var c=this,d=new Image;$("#placeholders").append(d),$(d).on("load",function(){var a=c.getSampledImageData(this),d=c.getPaletteKmeans(a,5),e=c.getColorLocations(a,5);b(d,e)}),this.imageProxy.setImageSrc(d,$(a).attr("src"))},ColorAnalyzer.prototype.getImageData=function(a){var b=document.createElement("canvas");$("#placeholders").append(b);var c=b.getContext("2d");b.width=a.width,b.height=a.height,c.drawImage(a,0,0);var d=c.getImageData(0,0,b.width,b.height);return this.imageData=d,c.putImageData(d,0,0),$("#placeholders").empty(),d},ColorAnalyzer.prototype.reset=function(){kmeans.allowProcessing()},ColorAnalyzer.prototype.getSampledImageData=function(a){var b=document.createElement("canvas"),c=1e4;$("#placeholders").append(b);var d=b.getContext("2d");b.width=a.width,b.height=a.height,d.drawImage(a,0,0);var e=d.getImageData(0,0,b.width,b.height);this.imageData=e;for(var f=Math.ceil(Math.sqrt(b.height*b.width/c)),g=Math.max(a.width,a.height),h=Math.ceil(f*a.height/g),i=Math.ceil(f*a.width/g),j=[],k=0,l=0;l<b.height;l+=h)for(var m=0;m<b.width;m+=i){var n=l*b.width+m;j[4*k]=e.data[4*n],j[4*k+1]=e.data[4*n+1],j[4*k+2]=e.data[4*n+2],j[4*k+3]=e.data[4*n+3],k++}var o=FindEdges(e.data,b.width,b.height,{horizontalStep:i,verticalStep:h,dim:9});return $("#placeholders").empty(),{data:j,hstep:h,wstep:i,width:a.width,height:a.height,samplesPerRow:Math.ceil(a.width/i),samplesPerColumn:Math.ceil(a.height/h),edgeMap:o}},ColorAnalyzer.prototype.getPaletteKmeans=function(a,b){"undefined"==typeof b&&(b=9);var c=kmeans.getCentroids(a.data,a.edgeMap,b,a.wstep,a.hstep,a.samplesPerRow,a.samplesPerColumn);return c.map(function(a){return[a.r,a.g,a.b]})},ColorAnalyzer.prototype.getColorLocations=function(a,b){for(var c=kmeans.getPoints(a.data,a.edgeMap,b,a.wstep,a.hstep,a.samplesPerRow,a.samplesPerColumn),d=new Array,e=0;e<c.length;e++)d[e]={x:c[e]%a.samplesPerRow*a.wstep,y:Math.floor(c[e]/a.samplesPerRow)*a.hstep};return d},ColorAnalyzer.prototype.getSampledColors=function(a,b){for(var c=kmeans.getPoints(a.data,a.edgeMap,b,a.samplesPerRow,a.samplesPerColumn),d=[],e=0;e<c.length;e++)d[e]=[a.data[4*c[e]],a.data[4*c[e]+1],a.data[4*c[e]+2]];return d},ColorAnalyzer.prototype.getPalette=function(a,b,c,d){"undefined"==typeof c&&(c=10),"undefined"==typeof d&&(d=10);for(var e,f,g,h,i,j=a,k=[],l=0;b>l;l+=d)e=4*l,f=j[e+0],g=j[e+1],h=j[e+2],i=j[e+3],i>=125&&(f>238&&g>238&&h>238||k.push([f,g,h]));var m=MMCQ.quantize(k,c),n=m.palette();return n},!pv)var pv={map:function(a,b){var c={};return b?a.map(function(a,d){return c.index=d,b.call(c,a)}):a.slice()},naturalOrder:function(a,b){return b>a?-1:a>b?1:0},sum:function(a,b){var c={};return a.reduce(b?function(a,d,e){return c.index=e,a+b.call(c,d)}:function(a,b){return a+b},0)},max:function(a,b){return Math.max.apply(null,b?pv.map(a,b):a)}};var kmeans=function(){function a(a,c,d,e,f,g){function i(a,b,c){var d=216/24389,e=24389/27,f=.964221,g=1,h=.825211,i=a/255,j=b/255,k=c/255;.04045>=i?i/=12:i=Math.pow((i+.055)/1.055,2.4),.04045>=j?j/=12:j=Math.pow((j+.055)/1.055,2.4),.04045>=k?k/=12:k=Math.pow((k+.055)/1.055,2.4);var l,m,n,o=.436052025*i+.385081593*j+.143087414*k,p=.222491598*i+.71688606*j+.060621486*k,q=.013929122*i+.097097002*j+.71418547*k,r=o/f,s=p/g,t=q/h;l=r>d?Math.pow(r,.3333333):(e*r+16)/116,m=s>d?Math.pow(s,.3333333):(e*s+16)/116,n=t>d?Math.pow(t,.3333333):(e*t+16)/116;var u=116*m-16,v=500*(l-m),w=200*(m-n),x=[0,0,0];return x[0]=u+.5,x[1]=v+.5,x[2]=w+.5,x}function j(a,b){var c=a[0]-b[0],d=Math.sqrt(Math.pow(a[1],2)+Math.pow(a[2],2)),e=Math.sqrt(Math.pow(b[1],2)+Math.pow(b[2],2)),f=d-e,g=a[1]-b[1],h=a[2]-b[2],i=Math.abs(g*g+h*h-f*f),j=1+.045*d,k=1+.015*d,f=f/j,i=i/k/k,l=c*c+f*f+i;return l}function k(a,b,c){var d=0,e=0,f=0;if(null==a||null==b||null==c||isNaN(a)||isNaN(b)||isNaN(c))return void alert("Please enter numeric RGB values!");if(0>a||0>b||0>c||a>255||b>255||c>255)return void alert("RGB values must be in the range 0 to 255.");a/=255,b/=255,c/=255;var g=Math.min(a,Math.min(b,c)),h=Math.max(a,Math.max(b,c));if(g==h)return f=g,[0,0,f];var i=a==g?b-c:c==g?a-b:c-a,j=a==g?3:c==g?1:5;return d=60*(j-i/(h-g)),e=(h-g)/h,f=h,[d,e,f]}if(0==h){var l=t[b(a,c,d)];"undefined"==typeof l&&(l=k(a,c,d),t[b(a,c,d)]=l);var m=t[b(e,f,g)];"undefined"==typeof m&&(m=k(e,f,g),t[b(e,f,g)]=m);var n=l[0]-m[0];return n=n>180?n-180:-180>n?n+180:n,Math.pow(n,2)+Math.pow(100*(l[1]-m[1]),2)+Math.pow(50*(l[2]-m[2]),2)}if(1==h){var o=s[b(a,c,d)];"undefined"==typeof o&&(o=i(a,c,d),s[b(a,c,d)]=o);var p=s[b(e,f,g)];return"undefined"==typeof p&&(p=i(e,f,g),s[b(e,f,g)]=p),j(o,p)}return Math.sqrt(Math.pow(a-e,2)+Math.pow(c-f,2)+Math.pow(d-g,2))}function b(a,b,c){return"undefined"==typeof a||"undefined"==typeof b||"undefined"==typeof c?void 0:"clr"+a+"_"+b+"_"+c}function c(b,c,d,e,f,s,t){function u(a){for(var c=0;a>c;c++)K[c]=0;if(1==i){N=ColorAnalyzer.prototype.getPalette(b,b.length,a,j),N.length<a&&(N=ColorAnalyzer.prototype.getPalette(b,b.length,a+2,j)),N=N.slice(0,a);for(var c=0;a>c;c++)N[c]={r:N[c][0],g:N[c][1],b:N[c][2]}}else N=v()}function v(){var c=new Array,e=Math.floor(P/2);c[0]={r:b[4*e],g:b[4*e+1],b:b[4*e+2]};for(var f,g,h,i,j=1;d>j;){f=-1,h=0;for(var k=0;P>k;k++){g=B;for(var l=0;j>l;l++)i=a(b[4*k],b[4*k+1],b[4*k+2],c[l].r,c[l].g,c[l].b),g>i&&(g=i);g>f&&(f=g,h=k)}c[j]={r:b[4*h],g:b[4*h+1],b:b[4*h+2]},j++}return c}function w(a){for(var b,c,d=a.length;0!==d;)c=Math.floor(Math.random()*d),d-=1,b=a[d],a[d]=a[c],a[c]=b}function x(a){for(var b=new Array,c=0;c<a.length;c++)b[c]=[a[c],c];b.sort(function(a,b){return a[0]<b[0]?1:-1});for(var d=new Array,c=0;c<a.length;c++)d[c]=b[c][1];return d}var y,z,A,B=987654321,C=!1,D=!1,E=0,F=0,G=new Array,H=new Array,I=new Array,J=new Array,K=new Array,L=new Array,M=new Array,N=new Array,O=0,P=b.length/4;for(u(d);!C&&g>O;){D=!1;for(var Q=0;d>Q;Q++)L[Q]=B,M[Q]=0;for(var Q=0;P>Q;Q++)if(y=b[4*Q],z=b[4*Q+1],A=b[4*Q+2],p&&(b[4*Q+3]<125||y>238&&z>238&&A>238||5>y&&5>z&&5>A))J[Q]=-1;else{F=B;for(var R=0;R<N.length;R++)E=a(y,z,A,N[R].r,N[R].g,N[R].b),F>E&&(D=!0,F=E,J[Q]=R);F<L[J[Q]]&&(L[J[Q]]=F),F>M[J[Q]]&&(M[J[Q]]=F)}if(!D){C=!0;break}for(var Q=0;Q<N.length;Q++)G[Q]=0,H[Q]=0,I[Q]=0,K[Q]=0;for(var Q=0;P>Q;Q++)J[Q]<0||(G[J[Q]]+=b[4*Q],H[J[Q]]+=b[4*Q+1],I[J[Q]]+=b[4*Q+2],K[J[Q]]++);if(1!=h||g>1)for(var Q=0;Q<N.length;Q++)K[Q]>0&&(N[Q]={r:Math.round(G[Q]/K[Q]),g:Math.round(H[Q]/K[Q]),b:Math.round(I[Q]/K[Q])});O+=1}for(var S=x(K),T=[],U=[],V=[],W=[],Q=0;d>Q;Q++)k[Q]=N[S[Q]],U[S[Q]]=B,V[S[Q]]=B,W[S[Q]]=0,T[S[Q]]=Q;for(var X=Math.max(Math.ceil(60/Math.max(e,f)),5),Q=0;d>Q;Q++)l[Q]="undefined";var Y=[];if(o){for(var Q=0;P>Q;Q++)Y[Q]=Q;w(Y)}else for(var Q=0;P>Q;Q++)Y[Q]=Q%2==0?Q/2:P-Math.ceil(Q/2);for(var Q=0;P>Q;Q++)if(!(Y[Q]%s<X||Y[Q]/s<X||Y[Q]%s>s-X||Y[Q]/s>t-X||J[Y[Q]]<0)){if(q&&W[J[Y[Q]]]>0){var Z=Math.max(b[4*Y[Q]],b[4*Y[Q]+1],b[4*Y[Q]+2]),$=Math.min(b[4*Y[Q]],b[4*Y[Q]+1],b[4*Y[Q]+2]),_=Z==$?0:(Z-$)/Z;Z=Math.max(N[J[Y[Q]]].r,N[J[Y[Q]]].g,N[J[Y[Q]]].b),$=Math.min(N[J[Y[Q]]].r,N[J[Y[Q]]].g,N[J[Y[Q]]].b);var ab=Z==$?0:(Z-$)/Z;if(ab>_)continue}var bb=a(b[4*Y[Q]],b[4*Y[Q]+1],b[4*Y[Q]+2],N[J[Y[Q]]].r,N[J[Y[Q]]].g,N[J[Y[Q]]].b);if(!(bb>(M[J[Y[Q]]]+L[J[Y[Q]]])/2)){if(W[J[Y[Q]]]>0){for(var cb=B,db=0;d>db;db++)if("undefined"!==l[db]){var eb=Y[Q]%s-l[db]%s,fb=Y[Q]/s-l[db]/s;cb>eb*eb+fb*fb&&(cb=eb*eb+fb*fb)}if(4*X*X>cb)continue}r&&Math.abs(c[4*Y[Q]])+Math.abs(c[4*Y[Q]+1])+Math.abs(c[4*Y[Q]+2])>V[J[Y[Q]]]||(l[T[J[Y[Q]]]]=Y[Q],W[J[Y[Q]]]+=1,V[J[Y[Q]]]=Math.abs(c[4*Y[Q]])+Math.abs(c[4*Y[Q]+1])+Math.abs(c[4*Y[Q]+2]))}}if(n)for(var Q=0;d>Q;Q++)k[Q]={r:b[4*l[Q]],g:b[4*l[Q]+1],b:b[4*l[Q]+2]};m=!0}function d(a,b,d,e,f,g,h){return m||c(a,b,d,e,f,g,h),k}function e(a,b,d,e,f,g,h){return m||c(a,b,d,e,f,g,h),l}function f(){m=!1}var g=8,h=1,i=1,j=8,k=new Array,l=new Array,m=!1,n=!0,o=!1,p=!0,q=!0,r=!0,s={},t={};return{getCentroids:d,getPoints:e,allowProcessing:f}}(),MMCQ=function(){function a(a,b,c){return(a<<2*i)+(b<<i)+c}function b(a){function b(){c.sort(a),d=!0}var c=[],d=!1;return{push:function(a){c.push(a),d=!1},peek:function(a){return d||b(),void 0===a&&(a=c.length-1),c[a]},pop:function(){return d||b(),c.pop()},size:function(){return c.length},map:function(a){return c.map(a)},debug:function(){return d||b(),c}}}function c(a,b,c,d,e,f,g){var h=this;h.r1=a,h.r2=b,h.g1=c,h.g2=d,h.b1=e,h.b2=f,h.histo=g}function d(){this.vboxes=new b(function(a,b){return pv.naturalOrder(a.vbox.count()*a.vbox.volume(),b.vbox.count()*b.vbox.volume())})}function e(b){var c,d,e,f,g=1<<3*i,h=new Array(g);return b.forEach(function(b){d=b[0]>>j,e=b[1]>>j,f=b[2]>>j,c=a(d,e,f),h[c]=(h[c]||0)+1}),h}function f(a,b){var d,e,f,g=1e6,h=0,i=1e6,k=0,l=1e6,m=0;return a.forEach(function(a){d=a[0]>>j,e=a[1]>>j,f=a[2]>>j,g>d?g=d:d>h&&(h=d),i>e?i=e:e>k&&(k=e),l>f?l=f:f>m&&(m=f)}),new c(g,h,i,k,l,m,b)}function g(b,c){function d(a){var b,d,e,f,g,h=a+"1",j=a+"2",k=0;for(i=c[h];i<=c[j];i++)if(o[i]>n/2){for(e=c.copy(),f=c.copy(),b=i-c[h],d=c[j]-i,g=d>=b?Math.min(c[j]-1,~~(i+d/2)):Math.max(c[h],~~(i-1-b/2));!o[g];)g++;for(k=p[g];!k&&o[g-1];)k=p[--g];return e[j]=g,f[h]=e[j]+1,[e,f]}}if(c.count()){var e=c.r2-c.r1+1,f=c.g2-c.g1+1,g=c.b2-c.b1+1,h=pv.max([e,f,g]);if(1==c.count())return[c.copy()];var i,j,k,l,m,n=0,o=[],p=[];if(h==e)for(i=c.r1;i<=c.r2;i++){for(l=0,j=c.g1;j<=c.g2;j++)for(k=c.b1;k<=c.b2;k++)m=a(i,j,k),l+=b[m]||0;n+=l,o[i]=n}else if(h==f)for(i=c.g1;i<=c.g2;i++){for(l=0,j=c.r1;j<=c.r2;j++)for(k=c.b1;k<=c.b2;k++)m=a(j,i,k),l+=b[m]||0;n+=l,o[i]=n}else for(i=c.b1;i<=c.b2;i++){for(l=0,j=c.r1;j<=c.r2;j++)for(k=c.g1;k<=c.g2;k++)m=a(j,k,i),l+=b[m]||0;n+=l,o[i]=n}return o.forEach(function(a,b){p[b]=n-a}),d(h==e?"r":h==f?"g":"b")}}function h(a,c){function h(a,b){for(var c,d=1,e=0;k>e;)if(c=a.pop(),c.count()){var f=g(i,c),h=f[0],j=f[1];if(!h)return;if(a.push(h),j&&(a.push(j),d++),d>=b)return;if(e++>k)return}else a.push(c),e++}if(!a.length||2>c||c>256)return!1;var i=e(a),j=0;i.forEach(function(){j++});var m=f(a,i),n=new b(function(a,b){return pv.naturalOrder(a.count(),b.count())});n.push(m),h(n,l*c);for(var o=new b(function(a,b){return pv.naturalOrder(a.count()*a.volume(),b.count()*b.volume())});n.size();)o.push(n.pop());h(o,c-o.size());for(var p=new d;o.size();)p.push(o.pop());return p}var i=5,j=8-i,k=1e3,l=.75;return c.prototype={volume:function(a){var b=this;return(!b._volume||a)&&(b._volume=(b.r2-b.r1+1)*(b.g2-b.g1+1)*(b.b2-b.b1+1)),b._volume},count:function(b){var c=this,d=c.histo;if(!c._count_set||b){var e,f,g,h=0;for(e=c.r1;e<=c.r2;e++)for(f=c.g1;f<=c.g2;f++)for(g=c.b1;g<=c.b2;g++)index=a(e,f,g),h+=d[index]||0;c._count=h,c._count_set=!0}return c._count},copy:function(){var a=this;return new c(a.r1,a.r2,a.g1,a.g2,a.b1,a.b2,a.histo)},avg:function(b){var c=this,d=c.histo;if(!c._avg||b){var e,f,g,h,j,k=0,l=1<<8-i,m=0,n=0,o=0;for(f=c.r1;f<=c.r2;f++)for(g=c.g1;g<=c.g2;g++)for(h=c.b1;h<=c.b2;h++)j=a(f,g,h),e=d[j]||0,k+=e,m+=e*(f+.5)*l,n+=e*(g+.5)*l,o+=e*(h+.5)*l;c._avg=k?[~~(m/k),~~(n/k),~~(o/k)]:[~~(l*(c.r1+c.r2+1)/2),~~(l*(c.g1+c.g2+1)/2),~~(l*(c.b1+c.b2+1)/2)]}return c._avg},contains:function(a){var b=this,c=a[0]>>j;return gval=a[1]>>j,bval=a[2]>>j,c>=b.r1&&c<=b.r2&&gval>=b.g1&&gval<=b.g2&&bval>=b.b1&&bval<=b.b2}},d.prototype={push:function(a){this.vboxes.push({vbox:a,color:a.avg()})},palette:function(){return this.vboxes.map(function(a){return a.color})},size:function(){return this.vboxes.size()},map:function(a){for(var b=this.vboxes,c=0;c<b.size();c++)if(b.peek(c).vbox.contains(a))return b.peek(c).color;return this.nearest(a)},nearest:function(a){for(var b,c,d,e=this.vboxes,f=0;f<e.size();f++)c=Math.sqrt(Math.pow(a[0]-e.peek(f).color[0],2)+Math.pow(a[1]-e.peek(f).color[1],2)+Math.pow(a[2]-e.peek(f).color[2],2)),(b>c||void 0===b)&&(b=c,d=e.peek(f).color);return d},forcebw:function(){var a=this.vboxes;a.sort(function(a,b){return pv.naturalOrder(pv.sum(a.color),pv.sum(b.color))});var b=a[0].color;b[0]<5&&b[1]<5&&b[2]<5&&(a[0].color=[0,0,0]);var c=a.length-1,d=a[c].color;d[0]>251&&d[1]>251&&d[2]>251&&(a[c].color=[255,255,255])}},{quantize:h}}();ImageProxy=function(a){this.iframe=document.createElement("iframe"),this.iframe.id="colorAnalyzer",this.iframe.src=a,this.iframe.style.width="1px",this.iframe.style.height="1px",this.iframe.style.bottom="0px",this.iframe.style.left="0px",this.iframe.style.position="absolute",this.iframe.frameBorder=0,document.body.appendChild(this.iframe),window.addEventListener("message",this.onMessage.bind(this))},ImageProxy.constructor=ImageProxy,ImageProxy.prototype.setImageSrc=function(a,b){this.image=a,this.src=b,this.target&&this.iframe.contentWindow.postMessage(this.src,"*")},ImageProxy.prototype.onMessage=function(a){"loaded"==a.data?(this.target=a.source,this.src&&this.target.postMessage(this.src,"*")):"http://st.houzz.com"==a.origin&&(this.image.src=a.data)},FindEdges=function(a,b,c,d){function e(a,b,c,d,e,f,g,h,i){var j,k,l,m,n,o,p,q,r,s,t=[],u=[],v=[];for(p=0;d>p;p+=i){for(q=Math.floor(f/2),t[q]=p*c*4,s=0;q>s;s++)t[q-s-1]=t[q]>=4*c*(s+1)?t[q]-4*c*(s+1):t[q-s],t[q+s+1]=t[q]+4*c*(s+1)<d*c*4?t[q]+4*c*(s+1):t[q+s];for(o=0;c>o;o+=h){for(j=4*(p*c+o),u[q]=4*o,s=0;q>s;s++)u[q-s-1]=u[q]>=4*(s+1)?u[q]-4*(s+1):u[q-s],u[q+s+1]=u[q]+4*(s+1)<4*c?u[q]+4*(s+1):u[q+s];for(r=0;f>r;r++)for(v[r]=[],s=0;f>s;s++)v[r][s]=t[r]+u[s];for(k=l=m=n=0,r=0;f>r;r++)for(s=0;f>s;s++)k+=a[v[r][s]]*e[r][s],l+=a[v[r][s]+1]*e[r][s],m+=a[v[r][s]+2]*e[r][s],g&&(n+=a[v[r][s]+3]*e[r][s]);g||(n=a[j+3]),j=4*(Math.ceil(p/i)*Math.ceil(c/h)+Math.ceil(o/h)),b[j]=k,b[j+1]=l,b[j+2]=m,b[j+3]=n}}}var f=[[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,24,-1,-1],[-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1]],g=[[-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,48,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1]],h=[[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,80,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1],[-1,-1,-1,-1,-1,-1,-1,-1,-1]],i=[],j=1,k=1,l=5;switch("undefined"!=typeof d.horizontalStep&&(j=parseInt(d.horizontalStep)),"undefined"!=typeof d.verticalStep&&(k=parseInt(d.verticalStep)),"undefined"!=typeof d.dim&&(l=parseInt(d.dim),l%2==0&&(l+=1)),l){case 5:e(a,i,b,c,f,l,!1,j,k);break;case 7:e(a,i,b,c,g,l,!1,j,k);break;case 9:e(a,i,b,c,h,l,!1,j,k)}return i};

window.hzmr.push("colorAnalyzer:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End colorAnalyzer.js  **************/
/************* Start newPostSignup.js for locale en-US **************/
try {HZ.ns("HZ.signup"),HZ.signup.newPostSignup=new function(){this.init=function(a,b){var c=$("<div/>",{id:"signup-success","class":"dialog",scopeId:"signup-success"}),d="<div id='header'><h1 class='normal-header'>"+_hgt("Which describes you best?")+"</h1></div><div id='body'><div class='row-fluid'><div id='homeowner' class='span-sm-6' compId='homeowner'><div class='wrapper'><div class='icon'></div><div class='title medium-text'>"+_hgt("Homeowner")+"</div><div class='description'>"+_hgt("I am a homeowner or interested in home design.")+"</div></div></div><div id='pro' class='span-sm-6' compId='pro'><div class='wrapper'><div class='icon'></div><div class='title medium-text'>"+_hgt("Professional")+"</div><div class='description'>"+_hgt("I offer home improvement services or sell home products.")+"</div></div></div></div></div>";return c.html(d),c.find("#homeowner").on("click",function(){a()}),c.find("#pro").on("click",function(){b()}),c}};

window.hzmr.push("newPostSignup:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End newPostSignup.js  **************/
/************* Start hoverCard.js for locale en-US **************/
try {HZ.ns("HZ.utils"),HZ.utils.HoverCard=new function(){function a(a){var b=HZ.utils.Html.escapeHtmlEntities(a);return b.replace(/'/g,"&apos;")}var b,c,d={},e={useWiderFollowCell:0,cardContentWidth:414,statCardWidth:86,reviewCardWidth:86,isTouchDev:0},f="<div class='hzHoverCard'>\n		<div class='hzHoverCardContent'>\n			<div class='upper'>\n				<a target='_blank' href='%PROFILELINK%' %REL% id='%ID%' class='user-thumb-link' onmousedown='%MOUSEDOWN%'><img class='hzHoverCardUserThumb hz-user-image' src='%USERTHUMB%'/></a>\n				<div class='basic-info'>\n					<div class='hzHoverCardUserName'>\n						<a target='_blank' class='nameLink hz-username' href='%PROFILELINK%' %REL% id='%ID%' onmousedown='%MOUSEDOWN%'>%USERNAME%</a>\n					</div>\n					%REVIEW_STARS%\n					%PRODESC%\n				</div>\n			</div>\n			%FOLLOW%\n			%FOLLOWERS%\n			%PROCARD%\n			%IDEABOOK%\n			%PROJECT%\n			%COMMENT%\n			<div class='hzHCClearFix'></div>\n		</div>\n		</div>",g="<div class='hzHoverCard'>\n		<div class='hzHoverCardContent'>\n			<div class='upper'>\n				<a target='_blank' href='%PROFILELINK%' %REL% id='%ID%' class='user-thumb-link' onmousedown='%MOUSEDOWN%'><img class='hzHoverCardUserThumb hz-user-image' src='%USERTHUMB%'/></a>\n				<div class='basic-info'>\n					<div class='hzHoverCardUserName'>\n						<a target='_blank' class='nameLink hz-username' href='%PROFILELINK%' %REL% id='%ID%' onmousedown='%MOUSEDOWN%'>%USERNAME%</a>\n					</div>\n				</div>			</div>\n			%FOLLOW%\n			%FOLLOWERS%\n			%IDEABOOK%\n			%PROJECT%\n			%COMMENT%\n			%NO_PUBLIC_GALLERY%\n			<div class='hzHCClearFix'></div>\n		</div>\n		</div>",h=function(a,b,c){var e,f={},g=$(this);c&&"true"==c.success&&(e=c.userDetail,f[a]={},f[a][b]=e,d=$.extend(!0,d,f),k(e,g,a,b))},i=function(d,e,h,i){var j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C="",D="profLink",E="",F="u",G="",H="",I="",J="",K="",L="",M="",N="",O="",P="",Q="",R=!0,S=!0,T="",U="",V="",W="";if(j=d.isPro,k=d.uname,l=d.name,m=d.pic,n=d.link,o=d.loc,p=d.allowFollow,q=d.isFollower,r=d.galCount,s=d.projCount,t=d.cmtCount,v=d.reviewRating,w=d.numReview,x=d.reviewLink,B=d.proType,y=d.galLink,z=d.prjLink,R=d.publicGallery,S=d.publicProject,c=b.cardContentWidth,i.pTrk&&i.pTrkParam&&(n="#",C="rel='nofollow'",E=i.pTrk,D=i.pTrkParam),i.gTrk&&i.gTrkParam&&(y="#",T="onmousedown='"+i.gTrk+"' id='"+i.gTrkParam+"'"),i.prjTrk&&i.prjTrkParam&&(z="#",U="onmousedown='"+i.prjTrk+"' id='"+i.prjTrkParam+"'"),1==p){if(b.useWiderFollowCell&&(c+=30,W="wider-card"),1==q)var X="hzBtn followBtn following",Y=_hgt("Following");else if(0==q)var X="hzBtn followBtn",Y=_hgt("Follow");if(HZ.data.CurrentSessionUser)var Z="HZ.actions.Follow.updateFollow(this,{"+F+': "'+k+'"}); HZ.utils.HoverCard.toggleFollowStatus("'+e+'", "'+h+'"); return false;';else if(HZ.auth)var Z="HZ.auth.Manager.signup(10, null, window.location.href); return false;";else var Z='window.location.href="'+b.followRedirectLink+'"; return false;';H="<input id='followButton_"+k+"' type='button' class='"+X+"' value='"+a(Y)+"' onclick='"+Z+"'/>",I="<div class='hzFollowBtnWrapper'>"+H+"</div>",u=d.followersCount,A=d.followersLink,u>0&&(J="<div class='statCard'><a target='_blank' href='"+A+"'><div class='counter'>"+u+"</div><div class='itemName'>"+_hgtp("Followers","Follower","Followers",u)+"</div></a></div>")}""==J&&(c-=b.statCardWidth),I="<div class='statCard followStatCard "+W+"'>"+I+"</div>",N="<div class='statCard'></div>",R&&(K="<div class='statCard'><a target='_blank' href='"+y+"' "+T+"><div class='counter'>"+r+"</div><div class='itemName'>"+_hgtp("Ideabooks","Ideabook","Ideabooks",r)+"</div></a></div>"),s>0&&S?L="<div class='statCard'><a target='_blank' href='"+z+"' "+U+"><div class='counter'>"+s+"</div><div class='itemName'>"+_hgtp("Projects","Project","Projects",s)+"</div></a></div>":c-=b.statCardWidth,M="<div class='statCard'><div class='counter'>"+t+"</div><div class='itemName'>"+_hgtp("Comments","Comment","Comments",t)+"</div></div>",1==j?(B&&"Not specified"!=B&&(G=B),o&&(G.length>0&&(G+=" | "),G+=o),G&&(G="<div class='hzHoverCardLoc'>"+a(G)+"</div>"),P="<div class='counter'>"+w+"</div><div class='itemName'>"+_hgtp("Reviews","Review","Reviews",w)+"</div>",i.rTrk&&i.rTrkParam&&(x="#",V="onmousedown='"+i.rTrk+"' id='"+i.rTrkParam+"'"),P="<div class='statCard reviewCard'><a target='_blank' href='"+x+"' "+V+">"+P+"</a></div>",w>0&&(O="<div class='classification counter'><div class='cover'></div><div class='progress' style='width: "+2*v+"%'></div></div>"),Q=HZ.utils.Html.template(f,{USERNAME:l,PROFILELINK:n,REL:C,MOUSEDOWN:E,ID:D,USERTHUMB:m,PRODESC:G,REVIEW_STARS:O,FOLLOW:I,FOLLOWERS:J,PROJECT:L,COMMENT:M,PROCARD:P})):(o&&(G+=o),G&&(G="<div class='hzHoverCardLoc'>"+G+"</div>"),Q=HZ.utils.Html.template(g,{USERNAME:l,PROFILELINK:n,USERTHUMB:m,USERDESC:G,FOLLOW:I,FOLLOWERS:J,IDEABOOK:K,PROJECT:L,COMMENT:M,NO_PUBLIC_GALLERY:"%NO_PUBLIC_GALLERY%"}),Q=HZ.utils.Html.template(Q,{NO_PUBLIC_GALLERY:R?"":N}));var _=$(Q);return _.find(".statCard").last().addClass("lastCard"),_},j=function(a){return{pTrk:a.attr("ptrk"),pTrkParam:a.attr("ptrk-param"),gTrk:a.attr("gtrk"),gTrkParam:a.attr("gtrk-param"),prjTrk:a.attr("prjtrk"),prjTrkParam:a.attr("prjtrk-param"),rTrk:a.attr("rtrk"),rTrkParam:a.attr("rtrk-param")}},k=function(a,b,d,e){var f,g,h,k,l,m=i(a,d,e,j(b)),n=110,o=$(".houzz-header"),p=$(".houzz-header-secondary"),q=80;(o.length||p.length)&&(q=o.height()+p.height()),k=b.offset().top-$(document).scrollTop(),h=$(window).height()-k-b.height(),l=$(window).width()-(b.offset().left-$(document).scrollLeft()),f=k>n+q||k>=h?"south":"north",c>l&&(f+=" right"),g=$(m),g.css("width",c),g.data("srcElement",b),b.closest("body").length>0&&b.tipBubble({content:g,borderColor:"#CCC",point:f,attachTo:"body",id:"hzHoverCardContainer",showCloseBtn:!1,width:c,fadeDuration:1})},l=function(){$("#hzHoverCardContainer:visible").hide()},m=function(a){var b,c=this,e=$(c),f=300,g=300;"mouseenter"==a.type?(b=setTimeout(function(){var a=e.attr("data-type"),b=e.attr("data-id");a&&b&&(d&&d[a]&&d[a][b]?k(d[a][b],e,a,b):HZ.ajaz.Services.getHoverCardData(a,b,$.proxy(h,e,a,b)))},f),$("#hzHoverCardContainer").data("ajazTimer",b)):"mouseleave"==a.type&&(clearTimeout($("#hzHoverCardContainer").data("ajazTimer")),$("#hzHoverCardContainer").data("dropDownTimer",setTimeout(function(){l()},g)))},n=function(a){if(a.stopPropagation(),HZ.data.CurrentSessionUser||!$(a.target).is("a")&&0==$(a.target).parents("a").length){a.preventDefault();var b=this,c=$(b);$("#hzHoverCardContainer").is(":visible")&&l();var e=c.attr("data-type"),f=c.attr("data-id");e&&f&&(d&&d[e]&&d[e][f]?k(d[e][f],c,e,f):HZ.ajaz.Services.getHoverCardData(e,f,$.proxy(h,c,e,f)))}};this.toggleFollowStatus=function(a,b){d&&d[a]&&d[a][b]&&(d[a][b].isFollower=1-d[a][b].isFollower)},this.init=function(a){b=$.extend({},e,a||{}),b.isTouchDev||!HZ.data.CurrentSessionUser?(b.isTouchDev&&$("body").css("cursor","pointer"),$("body").on("click",".hzHouzzer",n),$("body").on("click",".hzHoverCard",function(a){a.stopPropagation()}),$("body").on("click",l)):($("body").on("mouseenter mouseleave",".hzHouzzer",m),$("body").on("mouseenter","#hzHoverCardContainer",function(){clearTimeout($("#hzHoverCardContainer").data("dropDownTimer"))}).on("mouseleave","#hzHoverCardContainer",function(){l()})),$("#lbImage, #lbInfoScroller").on("mousewheel DOMMouseScroll",function(){clearTimeout($("#hzHoverCardContainer").data("ajazTimer")),clearTimeout($("#hzHoverCardContainer").data("dropDownTimer")),l()})}};

window.hzmr.push("hoverCard:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End hoverCard.js  **************/
/************* Start followButton.js for locale en-US **************/
try {// <script>
	
HZ.ns('HZ.actions.Follow');
HZ.actions.Follow = new (function(){
	var operationFollow = "f";
	var operationUnfollow = "u";
	var self = this;
	
	var showFollowButton = function(target, buttonText) {
		var iconEle = target.find("i");
		buttonText = $.trim(buttonText);
		if (buttonText == _hgt('Follow')) {
			// Show FOLLOW button
			target.removeClass("following unfollow");
			iconEle.removeClass("hzi-Following hzi-Unfollow").addClass("hzi-Follow");
		} else if (buttonText == _hgt('Unfollow')) {
			// Show UNFOLLOW button
			target.removeClass("following").addClass("unfollow");
			iconEle.removeClass("hzi-Follow hzi-Following").addClass("hzi-Unfollow");
		} else if (buttonText == _hgt('Following')) {
			// Show FOLLOWING button
			target.removeClass("unfollow").addClass("following");
			iconEle.removeClass("hzi-Follow hzi-Unfollow").addClass("hzi-Following");
		} else {
			// non supported type. NOOP
			return;
		}
		if(target.is("input")) {
			target.attr("value", buttonText);
		} else {
			target.contents().last().replaceWith(buttonText);
			target.attr("title", buttonText);
		}
	}
	
		
	var followObjectAjaxHandler = function(resultObj, op, target)
	{
		if (resultObj.success == "true") {
			if (op == operationFollow) {
				// show FOLLOWING button
				showFollowButton(target, _hgt('Following'));
			} else {
				// show FOLLOW button
				showFollowButton(target, _hgt('Follow'));
			}
		} else {
			if (resultObj.error == '2') {
				HZ.auth.Manager.signup(10);
			} else {
				var errorMessage = _hgt("Follow operation failed.");
				if (resultObj.error == '1')
				{
					errorMessage = _hgt("The user you are trying to follow has disabled this feature.");
				}
				if (resultObj.error == '4')
				{
					errorMessage = _hgt("To follow other people, you need to allow others to follow you. You can update your privacy settings on Edit Profile page.");
				}
				alert(errorMessage);
			}
		}				
	}
	//public
	this.updateFollow = function(target, params){
		var target = $(target);
		if(params) {
			var operation = (target.hasClass("following") || target.hasClass("unfollow")) ? operationUnfollow : operationFollow;
			if (params.u) {
				var username = params.u;
			}
		}
		if (operation && username) {
			HZ.ajaz.Services.updateFollow(operation, username, function(resp) {
				followObjectAjaxHandler(resp, operation, target);
			});
		}
	}
	
	this.updateFollowBtn = function(button, focus){
		if (button.hasClass("following") || button.hasClass("unfollow")) {
			if (focus) {
				showFollowButton(button, _hgt('Unfollow'));
			}
			else {
				showFollowButton(button, _hgt('Following'));
			}
		}
	}
	
	$("body").on("mouseenter", ".followBtn", function() {
		self.updateFollowBtn($(this), true);
	}).on("mouseleave", ".followBtn", function() {
		self.updateFollowBtn($(this), false);
	});
})();

window.hzmr.push("followButton:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End followButton.js  **************/
/************* Start contactDialog.js for locale en-US **************/
try {HZ.ns("HZ.email"),HZ.email.ContactDialog=function(){var a,b,c,d,e,f,g;this.attachUploadInitialized=!1,this.applySettings=function(a){g=a},this.getSettings=function(){return g},this.getToFld=function(){return a},this.getSubjectFld=function(){return b},this.getMessageFld=function(){return c},this.getEmailFld=function(){return d},this.getSendBtn=function(){return f},this.getCancelBtn=function(){return e};var h=function(){HZ.ui.AjaxThrobber.setInCall(!1),HZ.ui.Yamdi.hide(this)},i=function(){if(g.allowShare){if(HZ.ui.AjaxThrobber.setInCall(!0),HZ.ui.InputButtonUtils.disableButton(f),this.getForm().trigger("beforeSubmit.email"),k.call(this)){var c=a.val(),e=b.val(),h=this.getMessageBody(),i=g.event?g.event:"",l=HZ.utils.Config.baseUrl+"/generateColorPaletteImage"+HZ.viewSpace.colorPicker.generatePaletteImageUrl();return shareLink=HZ.utils.Config.baseUrl+"/"+HZ.utils.Config.spaceCommand+"/"+g.referenceId+HZ.viewSpace.colorPicker.generatePaletteShareUrl(),HZ.ajaz.Services.sendShareEmail(c,e,h,g.type,g.referenceId,i,l,shareLink,$.proxy(j,this)),!1}}else if(d.length){if(HZ.ui.AjaxThrobber.setInCall(!0),HZ.ui.InputButtonUtils.disableButton(f),this.getForm().trigger("beforeSubmit.email"),k.call(this)){var m=a.val(),n=d.val(),e=b.val(),h=this.getMessageBody(),i=g.event?g.event:"",o="undefined"!=typeof Recaptcha?Recaptcha.get_challenge():"",p="undefined"!=typeof Recaptcha?Recaptcha.get_response():"";return HZ.ajaz.Services.sendGuestEmail(n,m,e,h,g.type,g.referenceId,g.replyToId,i,o,p,$.proxy(j,this)),!1}}else if(HZ.ui.AjaxThrobber.setInCall(!0),HZ.ui.InputButtonUtils.disableButton(f),this.getForm().trigger("beforeSubmit.email"),k.call(this)){var m=a.val(),e=b.val(),h=this.getMessageBody(),i=g.event?g.event:"",q=g.maxAttachmentFiles?this.getForm():null;return HZ.ajaz.Services.sendEmail(m,e,h,g.type,g.referenceId,g.replyToId,i,q,$.proxy(j,this)),!1}},j=function(a){var b="";if(HZ.ui.AjaxThrobber.setInCall(!1),"true"==a.success)this.onSubmitSuccess&&"function"==typeof this.onSubmitSuccess&&this.onSubmitSuccess.call(this),b=g.type==HZ.sendEmail.types.PRO||g.type==HZ.sendEmail.types.PRO_REPLY||g.type==HZ.sendEmail.types.MP||g.type==HZ.sendEmail.types.MP_SELLER||g.type==HZ.sendEmail.types.MP_BUYER||g.type==HZ.sendEmail.types.USER||g.type==HZ.sendEmail.types.USER_REPLY?HZ.sendEmail.texts.CONFIRM_MESSAGE_SENT:HZ.sendEmail.texts.CONFIRM_EMAIL_SENT,HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert("",b);else{if(a.error==HZ.ajaz.Services.sendEmail.ERROR_RECOVERABLE)return"undefined"!=typeof Recaptcha&&Recaptcha.reload(),void this.showError(a.errorMessage);HZ.ui.yamdi.Common.hideAllDialogs(),HZ.ui.yamdi.Common.alert("Send message error!",a.errorMessage)}},k=function(){var c=a.val(),d=b.val(),e=this.getMessageBody();return""==$.trim(c)?(this.showError(HZ.sendEmail.texts.ERROR_EMAIL_ADDRESSES_EMPTY),!1):""==$.trim(d)?(this.showError(HZ.sendEmail.texts.ERROR_SUBJECT_EMPTY),!1):""==$.trim(e)?(this.showError(HZ.sendEmail.texts.ERROR_MESSAGE_EMPTY),!1):this.validateMore&&"function"==typeof this.validateMore&&!this.validateMore.call(this)?!1:!0};this.showError=function(a){this.showStatus(a),HZ.ui.AjaxThrobber.setInCall(!1),HZ.ui.InputButtonUtils.enableButton(f)},function(){var g="contactDialog";this.DIALOG_CLASSNAME&&(g=this.DIALOG_CLASSNAME);var j=_hgt("Send a Message");this.DIALOG_TITLE&&(j=this.DIALOG_TITLE);var k=$(this.FORM_TEMPLATE);e=HZ.ui.InputButtonUtils.createSecondaryInputButton(_hgt("Cancel"),"hzContactDlgCancelBtn",$.proxy(h,this)),f=HZ.ui.InputButtonUtils.createPrimaryInputButton(_hgt("Send"),"hzContactDlgSendBtn",null,!0);var l={title:j,body:k,controls:[HZ.ui.AjaxThrobber.getThrobber(),e,f],dialogClassName:g,onViewLoaded:$.proxy(this.onViewLoaded,this),onViewUnloaded:$.proxy(this.onViewUnloaded,this)};HZ.email.ContactDialog.superclass.constructor.call(this),this.init(l);var m=this.getForm();a=m.find(".hz-toFld"),b=m.find(".hz-subjectFld"),c=m.find(".hz-messageFld"),d=m.find(".hz-emailFld"),m.find("[placeholder]").initPlaceHolders({saveEvent:"beforeSubmit.email"}),m.bind("submit",$.proxy(i,this))}.call(this)},HZ.extend(HZ.email.ContactDialog,HZ.ui.yamdi.Dialog),$.extend(!0,HZ.email.ContactDialog.prototype,{DEFAULT_OPTIONS:{type:null,referenceId:null,toUserName:"",subject:"",message:"",replyToId:null,event:null,maxAttachmentFiles:0},ATTACH_BUTTON_TEMPLATE:'<a class="hzBtn noFrameButton addImageButton" href="javascript:;" title="%buttonTitle%"><span class="button-icon buttonIconAttach"></span><span class="small-text label colorLink">%buttonTitle%</span></a>',ATTACH_TEMPLATE:'<div class="hz-attach"><input type="file" name="attach1" accept="image/*" class="span-sm-6"/><input type="file" name="attach2" accept="image/*" class="span-sm-6"/><input type="file" name="attach3" accept="image/*" class="span-sm-6"/><input type="file" name="attach4" accept="image/*" class="span-sm-6"/></div>',FORM_TEMPLATE:'<fieldset class="row-fluid"><label>'+_hgt("To (enter recipient emails, separated by commas)")+'</label><textarea type="text" class="hz-toFld span-xs-12" rows="2"/><label>'+_hgt("Subject")+'</label><input type="text" class="hz-subjectFld span-xs-12" value="" placeholder="'+_hgt("Enter subject")+'"/><label>'+_hgt("Message")+'</label><textarea rows="5" class="hz-messageFld span-xs-12" placeholder="'+_hgt("Enter your message here")+'"/></fieldset>',validateMore:function(){return!0},getMessageBody:function(){return this.getMessageFld().val()},onSubmitSuccess:null,prepare:function(a){var b,c=this;if(this.applySettings($.extend(!0,{},this.DEFAULT_OPTIONS,a)),b=this.getSettings(),this.getToFld().val(b.toUserName),this.getSubjectFld().val(b.subject),this.getMessageFld().val(b.message),b.maxAttachmentFiles)if(this.attachUploadInitialized){if(!this.getForm().find(".addImageButton").length){var d=$(HZ.utils.Html.template(this.ATTACH_BUTTON_TEMPLATE,{buttonTitle:_hgt("Attach Images")}));d.insertAfter(this.getMessageFld()),c.enableAttachment()}}else{var d=$(HZ.utils.Html.template(this.ATTACH_BUTTON_TEMPLATE,{buttonTitle:_hgt("Attach Images")}));d.insertAfter(this.getMessageFld()),HZ.utils.ResourceLoader.requireResources([{type:HZ.utils.ResourceLoader.JS,file:"jquery.form.min"}],function(){c.enableAttachment()})}else c.disableAttachment()},enableAttachment:function(){var a=this.getForm().find(".hz-attach"),b=this;if(0===a.length){var c=this.getForm().find(".addImageButton");a=$(this.ATTACH_TEMPLATE).insertAfter(c),c.on("click",function(){a.is(":visible")||(a.show(),UIHelper.isMSIE||a.find("input:first").click(),b.recenter())})}this.attachUploadInitialized=!0},disableAttachment:function(){var a=this.getForm().find(".addImageButton, .hz-attach");a.length&&a.remove()},onViewLoaded:function(){HZ.ui.InputButtonUtils.enableButton(this.getSendBtn()),this.getForm().find("[placeholder]").initPlaceHolders("refresh")},onViewUnloaded:function(){this.resetForm(),this.getForm().find(".hz-attach").hide(),this.hideStatus()}}),HZ.email.ContactProDialog=function(){var a={type:HZ.sendEmail.types.PRO};this.DEFAULT_OPTIONS={toUserName:"",toUserDisplayName:"",subject:"",message:""},this.FORM_TEMPLATE='<fieldset class="row-fluid"><div class="control-group fromDisplayEmailGrp"><label class="control-label">'+_hgt("From")+'</label><div class="controls"></div></div><div class="control-group"><label class="control-label">'+_hgt("To")+'</label><div class="controls toDisplayName"></div><input type="hidden" class="hz-toFld" value=""/></div><div class="control-group"><label class="control-label">'+_hgt("Subject")+'</label><div class="controls"><input type="text" class="hz-subjectFld span-xs-12" value="" placeholder="'+_hgt("Enter subject")+'"/></div></div><div class="control-group phoneFldGrp"><label class="control-label">'+_hgt("Phone Number")+'</label><div class="controls"><input type="text" class="span-xs-12" value="" placeholder="'+_hgt("Enter your contact phone number")+'"/></div></div><div class="control-group locationFldGrp"><label class="control-label">'+_hgt("Location")+'</label><div class="controls"><input type="text" class="span-xs-12" value="" placeholder="'+_hgt("Enter your city, state")+'"/></div></div><div class="control-group"><label class="control-label">'+_hgt("Message")+'</label><div class="controls"><textarea class="hz-messageFld span-xs-12" rows="4" value="" placeholder="'+_hgt("Enter your message here")+'"/></div></div><div class="proMessageDisclaimer"><label class="checkbox"><input type="checkbox" class="confirmProMessage"/>'+_hgt("I confirm this is a personal project inquiry and not a promotional message or solicitation.")+"</label></div></fieldset>",this.prepare=function(b){var c=$.extend(!0,{},a,this.DEFAULT_OPTIONS,b),d=this.getForm();HZ.email.ContactProDialog.superclass.prepare.call(this,c),d.find(".toDisplayName").html(c.toUserDisplayName);var e="";HZ.data.CurrentSessionUser&&c.type!=HZ.sendEmail.types.MP&&c.type!=HZ.sendEmail.types.USER&&c.type!=HZ.sendEmail.types.USER_REPLY?(d.find(".fromDisplayEmailGrp").show(),e=HZ.data.CurrentSessionUser.getEmailAddress(),e?d.find(".fromDisplayEmailGrp").find(".controls").html(e):HZ.ajaz.Services.User.getCurrentSessionUserEmail(function(a){"true"==a.success&&a.userEmail&&(HZ.data.CurrentSessionUser.setEmailAddress(a.userEmail),d.find(".fromDisplayEmailGrp").find(".controls").html(a.userEmail))})):d.find(".fromDisplayEmailGrp").hide(),c.type==HZ.sendEmail.types.PRO_REPLY||c.type==HZ.sendEmail.types.MP||c.type==HZ.sendEmail.types.USER||c.type==HZ.sendEmail.types.USER_REPLY?(d.find(".proMessageDisclaimer").hide(),d.find(".phoneFldGrp").hide(),d.find(".locationFldGrp").hide()):(d.find(".proMessageDisclaimer").show(),d.find(".phoneFldGrp").show(),d.find(".locationFldGrp").show())},this.validateMore=function(){var a=this.getForm(),b=a.find(".confirmProMessage");return""==$.trim(this.getMessageFld().val())?(this.showError(HZ.sendEmail.texts.ERROR_MESSAGE_EMPTY),!1):b.is(":visible")&&b.is(":not(:checked)")?(this.showError(HZ.sendEmail.texts.ERROR_PRO_CONFIRM_INQUIRY_NOT_AGREE),!1):!0},this.getMessageBody=function(){var a=this.getForm(),b="";if(a.find(".phoneFldGrp").is(":visible")){var c=a.find(".phoneFldGrp .controls input").val(),d=a.find(".locationFldGrp .controls input").val();""!=$.trim(c)&&(b=_hgt("Contact Phone Number: {phoneNumber}",{phoneNumber:c})+"\n"),""!=$.trim(d)&&(b=b+_hgt("Project Location: {location}",{location:d})+"\n"),""!=$.trim(b)&&(b+="\n")}return b+=this.getMessageFld().val()},this.onSubmitSuccess=function(){_gaq.push(["_trackEvent","ContactProDialog","contactSuccess"])},function(){HZ.email.ContactProDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.ContactProDialog,HZ.email.ContactDialog),HZ.email.GuestContactProDialog=function(){function a(){Recaptcha.create(HZ.utils.Config.recaptchaPublicKey,"contactCaptcha",{theme:"white"})}var b={type:HZ.sendEmail.types.PRO};this.DEFAULT_OPTIONS={toUserName:"",toUserDisplayName:"",subject:"",message:""},this.FORM_TEMPLATE='<fieldset class="row-fluid condensed-layout"><input type="hidden" class="hz-toFld" value=""/><input type="hidden" class="hz-subjectFld" value="" placeholder="'+_hgt("Enter subject")+'"/><div class="control-group"><label class="control-label">'+_hgt("Email{contextEmailNoun}",{contextEmailNoun:""})+'</label><div class="controls"><input type="text" class="hz-emailFld span-xs-12" value="" placeholder="'+_hgt("Enter your email")+'"/></div><div style="clear:both;"></div></div><div class="control-group phoneFldGrp"><label class="control-label">'+_hgt("Phone #")+'</label><div class="controls"><input type="text" class="span-xs-12" value="" placeholder="'+_hgt("Enter your contact phone number")+'"/></div><div style="clear:both;"></div></div><div class="control-group locationFldGrp"><label class="control-label">'+_hgt("Location")+'</label><div class="controls"><input class="span-xs-12" type="text" value="" placeholder="'+_hgt("Enter your city, state")+'"/></div><div style="clear:both;"></div></div><div class="control-group"><label class="control-label">'+_hgt("Message")+'</label><div class="controls"><textarea rows="4" value="" class="hz-messageFld span-xs-12" placeholder="'+_hgt("Enter your message here")+'"/></div><div style="clear:both;"></div></div><div id="contactCaptcha"></div><div class="proMessageDisclaimer control-group"><div class="controls"><label class="checkbox"><input type="checkbox" class="confirmProMessage"/>'+_hgt("I confirm this is a personal project inquiry and not a promotional message or solicitation.")+"</label></div></div></fieldset>",this.prepare=function(a){var c=$.extend(!0,{},b,this.DEFAULT_OPTIONS,a),d=this.getForm();HZ.email.GuestContactProDialog.superclass.prepare.call(this,c),d.find(".toDisplayName").html(c.toUserDisplayName),c.type==HZ.sendEmail.types.PRO_REPLY||c.type==HZ.sendEmail.types.MP?d.find(".proMessageDisclaimer").hide():d.find(".proMessageDisclaimer").show()},this.onViewLoaded=function(){"undefined"==typeof Recaptcha?$.getScript("http://www.google.com/recaptcha/api/js/recaptcha_ajax.js",function(){a()}):a()},this.onViewUnloaded=function(){"undefined"!=typeof Recaptcha&&Recaptcha.destroy()},this.validateMore=function(){var a=this.getForm(),b=a.find(".confirmProMessage"),c=a.find(".hz-emailFld").val();if(""==$.trim(this.getMessageFld().val()))return this.showError(HZ.sendEmail.texts.ERROR_MESSAGE_EMPTY),!1;if(b.is(":visible")&&b.is(":not(:checked)"))return this.showError(HZ.sendEmail.texts.ERROR_PRO_CONFIRM_INQUIRY_NOT_AGREE),!1;if(!UIHelper.validateEmail(c,!0))return this.showError(HZ.sendEmail.texts.ERROR_INVALID_FROM_EMAIL_ADDRESS),!1;var d=this.getSettings();return this.getSubjectFld().val(d.subject+" from "+c),this.getSubjectFld().val(_hgt("{emailSubject} from {senderEmailAddress}",{emailSubject:d.subject,senderEmailAddress:c})),!0},this.getMessageBody=function(){var a=this.getForm(),b=a.find(".phoneFldGrp .controls input").val(),c=a.find(".locationFld .controls input").val(),d="";return""!=$.trim(b)&&(d=_hgt("Contact Phone Number: {phoneNumber}",{phoneNumber:b})+"\n"),""!=$.trim(c)&&(d=d+_hgt("Project Location: {location}",{location:c})+"\n"),""!=$.trim(d)&&(d+="\n"),d+=this.getMessageFld().val()},this.onSubmitSuccess=function(){_gaq.push(["_trackEvent","GuestContactProDialog","contactSuccess"])},function(){HZ.email.GuestContactProDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.GuestContactProDialog,HZ.email.ContactDialog),HZ.email.EmailDialog=function(){function a(){if(!e){e=new HZ.ui.yamdi.Dialog;var a={dialogClassName:"contactsLoadingDlg",controls:[]};e.init(a);var b="",c='<div class="hzLoadingDlgThrobber"></div><div class="hzLoadingDlgMessage">'+_hgt("Loading...")+"</div>";e.setTitle(b),e.setBody(c)}}function b(b){a(),HZ.ui.Yamdi.switchDialog(e),HZ.utils.ResourceLoader.requireAddressBookResources(function(){HZ.addressBook.Contacts.load(b,function(){f=!0;var a=HZ.dialogs.EmailDialog;HZ.addressBook.Contacts.isUpsellRequired()&&(a=HZ.addressBook.Dialogs.getUpsellDialog(function(a){a?d():HZ.ui.Yamdi.switchDialog(HZ.dialogs.EmailDialog)})),HZ.ui.Yamdi.switchDialog(a)})})}function c(a){g||(a?($("#upsellTip").hover(function(){var a=_hgt(h?"Update your Gmail contact list to lookup your recently emailed friends by name.  Houzz will not use your contact list to send any messages other than those directed by you.":"By importing your Gmail contact list, you can look up your friends by name and auto-complete their email addresses when you send them messages.  Houzz will not use your contact list to send any messages other than those directed by you.");$("#upsellTip").tipBubble({content:a,point:"north",width:200,position:"absolute",showCloseBtn:!1})},function(){$("#upsellTip").tipBubble("hide")}),$("#upsellLine a:first").click(function(){d()})):$("#upsellLine").css("display","none"),g=!0)}function d(){HZ.google.api.requestGoogleAuth(HZ.ajaz.Contacts.GOOGLE_CONTACTS_SCOPE,function(){b(!0)})}var e=null,f=!1,g=!1,h=!1,i=!1;this.DEFAULT_OPTIONS={type:null,referenceId:null,subject:"",message:"",event:HZ.sendEmail.events.BTN,useAddressBook:!0};var j={tag:"a",attr:{href:"javascript:;","class":"colorLink"}},k={tag:"a",attr:{id:"upsellTip",href:"javascript:;","class":"colorLink"}};this.FORM_TEMPLATE='<fieldset class="row-fluid"><label>'+_hgt("To (enter recipient emails, separated by commas):")+'</label><div id="emailDialogAddressBook"></div><textarea type="text" class="hz-toFld span-xs-12" rows="2" id="emailDialogEmailInput" /><div id="upsellLine">'+_hgt("<t1>Import my Gmail contact list</t1>&nbsp;(<t2>why?</t2>)",{t1:j,t2:k})+"</div><label>"+_hgt("Subject")+'</label><input type="text" class="hz-subjectFld span-xs-12" value="" placeholder="'+_hgt("Enter subject")+'"/><label>'+_hgt("Message")+'</label><textarea rows="5" class="hz-messageFld span-xs-12" placeholder="'+_hgt("Enter your message here")+'"/></fieldset>',this.validateMore=function(){var a=this.getForm().find(".hz-toFld").val();return UIHelper.validateEmail(a,!0)?!0:(this.showError(HZ.sendEmail.texts.ERROR_INVALID_TO_EMAIL_ADDRESSES),!1)},this.prepare=function(a){HZ.email.EmailDialog.superclass.prepare.call(this,a);var b=this.getSettings();b.useAddressBook=b.useAddressBook&&HZ.utils.Config.emailShareAbImportEnabled,this.applySettings(b)},this.onViewUnloaded=function(){var a=this.getSettings();a.useAddressBook&&f&&i&&$("#emailDialogAddressBook").clearAddressBookInput(),$("#emailDialogEmailInput").val("")},this.onViewLoaded=function(){var a=this.getSettings();if(c(a.useAddressBook),a.useAddressBook&&!f)return void b(!1);if(HZ.email.EmailDialog.superclass.onViewLoaded.call(this),a.useAddressBook){var d=HZ.addressBook.Contacts.getContacts();h=d&&d.length>0,this.getSubjectFld().val(a.subject),this.getMessageFld().val(a.message),!i&&h?($("#emailDialogEmailInput").height("64px"),$("#emailDialogAddressBook").addressBook({input:$("#emailDialogEmailInput"),showAddressBook:!1}),i=!0,$("#emailDialogEmailInput_tag").focus()):this.getToFld().focus(),$("#upsellLine a:first").text(_hgt(h?"Update my Gmail contact list":"Import my Gmail contact list"))}else this.getToFld().focus()},function(){HZ.email.EmailDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.EmailDialog,HZ.email.ContactDialog),HZ.ns("HZ.dialogs"),HZ.dialogs.EmailDialog=new HZ.email.EmailDialog,HZ.email.ShareColorPaletteDialog=function(){this.DEFAULT_OPTIONS={type:null,referenceId:null,subject:"",message:"",event:HZ.sendEmail.events.SHARECP,scopeId:"",allowShare:!0},this.DIALOG_CLASSNAME="shareColorPaletteDialog",this.DIALOG_TITLE=_hgt("Share color palette"),this.FORM_TEMPLATE="<div id='shareColorPaletteDialog' class='trackMe'><div class='behrDisclaimer'><i>"+_hgt("The colors displayed on-screen may not match BEHR color standards")+"</i></div><div class='socialShareBtnsContainer'><a href='javascript:;' compid='fbShare' class='fb-share' onclick='HZ.dialogs.ShareColorPaletteDialog.generateFbShareEvent();'><div class='socialShareBtn facebook'></div></a><a href='javascript:;' compid='twShare' class='tw-share' onclick='HZ.dialogs.ShareColorPaletteDialog.generateTwShareEvent();'><div class='socialShareBtn twitter'></div></a><a href='javascript:;' compid='gShare' class='g-share' onclick='HZ.dialogs.ShareColorPaletteDialog.generateGShareEvent();'><div class='socialShareBtn plusone'></div></a></div><div class='sectionDivider bold-text'><span><i>"+_hgt("or email this to a friend")+"</i></span></div><form id='emailColorPaletteForm' name='emailColorPaletteForm' action='javascript:;'><textarea type='text' rows='1' class='hz-toFld' id='emailDialogEmailInput' placeholder='"+_hgt("To (enter recipient emails, separated by commas)")+"'></textarea><label>Subject</label><input type='text' class='hz-subjectFld' id='emailDialogSubjectInput'><label>Message</label><textarea class='hz-messageFld' id='emailDialogMessageInput' rows='5'></textarea></form></div>",this.validateMore=function(){var a=this.getForm().find("#emailDialogEmailInput").val();return UIHelper.validateEmail(a,!0)?!0:(this.showError(HZ.sendEmail.texts.ERROR_INVALID_TO_EMAIL_ADDRESSES),!1)},this.prepare=function(a){HZ.email.ShareColorPaletteDialog.superclass.prepare.call(this,a);var b=this.getSettings();this.applySettings(b)},this.onViewUnloaded=function(){this.getSettings()},this.onViewLoaded=function(){var a=this.getSettings();$("#shareColorPaletteDialog").attr("objid",a.referenceId).attr("scopeid",a.scopeId),HZ.email.ShareColorPaletteDialog.superclass.onViewLoaded.call(this),this.getToFld().focus()},this.generateFbShareEvent=function(){var a=this.getSettings(),b=611,c=368,d=HZ.viewSpace.colorPicker.generatePaletteShareUrl(),e=encodeURIComponent(HZ.utils.Config.baseUrl+"/"+HZ.utils.Config.spaceCommand+"/"+a.referenceId+d),f="https://www.facebook.com/sharer/sharer.php?u="+e,g=HZ.ui.Utils.getCenteredPopupPosition(b,c);window.open(f,"fbwindow","width="+b+", height="+c+", left="+g.left+", top="+g.top+", toolbar=0, location=0, menubar=0, scrollbars=0")},this.generateTwShareEvent=function(){var a=this.getSettings(),b=550,c=380,d=HZ.viewSpace.colorPicker.generatePaletteShareUrl(),e=encodeURIComponent("I love this @BehrPaint color palette! Create your own @Houzz"),f=encodeURIComponent(HZ.utils.Config.baseUrl+"/"+HZ.utils.Config.spaceCommand+"/"+a.referenceId+d),g="https://twitter.com/share?url="+f+"&text="+e,h=HZ.ui.Utils.getCenteredPopupPosition(b,c);window.open(g,"fbwindow","width="+b+", height="+c+", left="+h.left+", top="+h.top+", toolbar=0, location=0, menubar=0, scrollbars=0")},this.generateGShareEvent=function(){var a=this.getSettings(),b=600,c=600,d=HZ.viewSpace.colorPicker.generatePaletteShareUrl(),e=encodeURIComponent(HZ.utils.Config.baseUrl+"/"+HZ.utils.Config.spaceCommand+"/"+a.referenceId+d),f="https://plus.google.com/share?url="+e,g=HZ.ui.Utils.getCenteredPopupPosition(b,c);window.open(f,"fbwindow","width="+b+", height="+c+", left="+g.left+", top="+g.top+", toolbar=0, location=0, menubar=0, scrollbars=1, resizeable=1")},function(){HZ.email.ShareColorPaletteDialog.superclass.constructor.call(this)}.call(this)},HZ.extend(HZ.email.ShareColorPaletteDialog,HZ.email.ContactDialog),HZ.ns("HZ.dialogs"),HZ.dialogs.ShareColorPaletteDialog=new HZ.email.ShareColorPaletteDialog;

window.hzmr.push("contactDialog:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End contactDialog.js  **************/
/************* Start browsePhotos.js for locale en-US **************/
try {HZ.ns("HZ.modules.BrowsePhotos"),HZ.modules.BrowsePhotos=new function(){this.SOURCE_LINK_SPACEACTIONS_EMAIL=11,this.init=function(a){function b(b,c){if(b&&c)if(a.signedIn)"ideabook"===c||"hover"===c?showAddToMyGalleryForm(b):"email"===c&&HZ.modules.BrowsePhotos.showSendSpaceEmailDialog(b);else{var d=HZ.data.Spaces.get(b),e=null;d&&d.iids&&d.iids[0]&&(e=d.iids[0]);var f=JSON.stringify({houseId:b,redirectUrl:a.redirectUrl,imageId:e,buttonType:c});HZ.ajaz.Services.setVisitorProperty("postSignupHouseId",f,function(){"ideabook"===c||"hover"===c?HZ.auth.Manager.signup(a.addToIdeabookSignupSource,13,a.redirectUrl):"email"===c&&HZ.auth.Manager.signup(HZ.modules.BrowsePhotos.SOURCE_LINK_SPACEACTIONS_EMAIL,17,a.redirectUrl)})}}function c(){$(".whiteCard.portrait").each(function(){$(this).find(".hzPeek").remove();var a=$(this),b=$(".photoInfo",a),c=$(".photoDetails",a),d=$(".photo",a);if(b.length>0){var e=b.parent(),f=parseInt(d.height()-(b.offset().top-e.offset().top)-c.height()-20);0>f&&(f=50),b.height("auto"),b.height()>f&&(f-=17),b.height(f)}})}function d(){for(f=0,h=$(a.selector),g=0,i=a.numImages;g++<=h.size()/i;){var b=h.slice(f,f+i);b.each(function(){this.removeAttribute("style")}),b.equalizeHeights(),f+=i}}if($(".browseListBody").on("click touchstart",".promote, .touch-promote, .hoverButtonPromote, .emailButton, .reco-text, .progressBar",function(){var c=$(this).closest(".whiteCard");if(c){var d=$(c).attr("objid"),e=$(this).data("type");a.isCobrand?window.location=a.cobrandRedirectUrl:b(d,e)}}),a.signedIn||$(".browseListBody").on("mouseenter",".imageArea",function(b){var c=$(this);if("ontouchstart"in document.documentElement||!(c.children("#signup_overlay").length>0)){var d=c.closest(".whiteCard");if(d&&!d.hasClass("m")&&!d.hasClass("s")){var e=c.height(),f=d.hasClass("l")?.8:.6,g=Math.floor(a.signedIn?f*e:.5*e);if("ontouchstart"in document.documentElement){$(".touch-promote").hide();var h=c.siblings(".touch-promote");h&&0!=h.length||(h=$("<div class='touch-promote' data-type='hover'><span class='likeIt icon-wrap'>Save Photo <span class='more-icon'></span></span><br/></div>"),c.after(h)),$(h).show();var i=g-$(h).outerHeight()-8;return void $(h).css("top",i+"px")}if(b&&b.relatedTarget){var j=b.relatedTarget.className;if(j.indexOf("promote")>-1||j.indexOf("likeIt")>-1||j.indexOf("icon-wrap")>-1||j.indexOf("more-icon")>-1)return}var k=HZ.spaceActions.PhotoOverlay.assembleOverlayElements(),l=k.length;if(l>0)for(var m=l;m>=0;m--){c.after(k[m]);var i=g-$(k[m]).outerHeight()-8;$(k[m]).css("top",i+"px"),g=i}}}}),a.numImages<2){if($(".whiteCard").each(function(){{var a=$(this),b=$(".photoInfo",a),c=$(".photoDetails",a),d=$(".photo",a);$(".uploader",a)}if(b.length>0){var e=b.parent(),f=parseInt(d.height()-(b.offset().top-e.offset().top)-c.height()-20);0>f&&(f=50),b.height()>f&&(f-=17),b.height(f)}}),$(".whiteCard.portrait")<50){var e;$(window).resize(function(){clearTimeout(e),e=setTimeout(c,1e3)})}}else{var f=0,g=0,h=$(a.selector),i=a.numImages,j=$(".whiteCard").hasClass("l"),k=$(".whiteCard").hasClass("m");if(j||k)for(;g++<=h.size()/i;)h.slice(f,f+i).equalizeHeights(),f+=i;var l=null;if($(".whiteCard .photoMeta").mouseenter(function(a){l=setTimeout(function(){$(a.target).closest(".whiteCard").find(".photo").addClass("hover")},100)}).mouseleave(function(a){clearTimeout(l),$(a.target).closest(".whiteCard").find(".photo").removeClass("hover")}),j){var m;$(window).resize(function(){clearTimeout(m),m=setTimeout(d,1e3)})}}},this.showSendSpaceEmailDialog=function(a,b){if(HZ.data.CurrentSessionUser){if(HZ.data&&HZ.data.Spaces){var c=HZ.data.Spaces.get(a);c&&(HZ.dialogs.EmailDialog.prepare({type:HZ.sendEmail.types.SPACE,referenceId:c.id,subject:c.t,message:c.prod?HZ.sendEmail.texts.DEFAULT_MESSAGE_PRODUCT:HZ.sendEmail.texts.DEFAULT_MESSAGE_SPACE,event:b}),HZ.ui.Yamdi.show(HZ.dialogs.EmailDialog))}}else HZ.auth.Manager.signup(this.SOURCE_LINK_SPACEACTIONS_EMAIL)}};

window.hzmr.push("browsePhotos:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End browsePhotos.js  **************/
/************* Start like.js for locale en-US **************/
try {HZ.ns("HZ.like"),HZ.like.LikeDialog=function(){HZ.like.LikeDialog.superclass.constructor.call(this);var a,b=this;this.prepare=function(){var d=$('<div id="hzlikeListContainer"><ul></ul></div>');a=d.find("ul");var e={title:_hgt("People who like this"),body:d,onViewLoaded:c};b.init(e)},this.appendToLikeList=function(b){a.append(b)};var c=function(){a.empty()}},HZ.extend(HZ.like.LikeDialog,HZ.ui.yamdi.Dialog),HZ.like.Like=new function(){function a(a,d){var e=$(d),f=e.attr("data-object-type"),g=e.attr("data-object-id");f&&g||(f=e.parents(".hzBtn").attr("loty"),g=e.parents(".hzBtn").attr("loid"));parseInt(e.attr("data-self"),10);a==c.showlikeAction&&HZ.ui.Yamdi.show(b),HZ.ajaz.Like.like(a,g,f,function(d){var h=e.parents(".likeContainer");if(d&&"true"==d.success){var i=d.numberOfLikes,j=h.find(".hz-showlike"),k=h.find(".hz-likes"),l="",m=d.userList;if(a==c.likeAction)l=_hgtp("You like this.","You and 1 person like this.","You and {countOfOtherLikes} people like this.",i-1,{countOfOtherLikes:i-1}),e.addClass("unlike").removeClass("like").attr("title",_hgt("Unlike")).find(".hz-likeAction").remove(),e.find(".hz-like").addClass("hz-liked hzi-Liked").removeClass("hz-like hzi-Like"),k.text(_hgtp("0 Likes","1 Like","{numOfLikes} Likes",i,{numOfLikes:i})),0==j.length?k.wrap('<a class="hz-showlike" data-object-type="'+f+'" data-object-id="'+g+'" title="'+l+'" href="#"></a>'):j.attr("title",l);else if(a==c.unlikeAction)e.addClass("like").removeClass("unlike").attr("title",_hgt("Like")),e.find(".hz-liked").addClass("hz-like hzi-Like").removeClass("hz-liked hzi-Liked"),k.html(_hgtp("0 Likes","1 Like","{numOfLikes} Likes",i,{numOfLikes:i})),(i=0)?k.unwrap():(l=_hgtp("","1 person likes this.","{countOfLikes} people like this.",i,{countOfLikes:i}),j.attr("title",l));else if(a==c.showlikeAction)for(var n,o,p,q,r,s=m.length,t=0;s>t;t++){var u=$("<li></li>"),v=m[t];n=v.link,o=v.userName,p=v.userImage,q=$("<a class='likeUserImg hz-user-image' href='"+n+"'><img width='40' height='40' src='"+p+"'/></a>"),r=$("<div class='likeUserTextInfo'><a class='colorLink' href='"+n+"'>"+o+"</a></div><div style='clear:both'></div>"),u.append(q).append(r),t==s-1&&u.addClass("last-like"),b.appendToLikeList(u),HZ.ui.Yamdi.center()}}else if(a==c.showlikeAction){HZ.ui.Yamdi.hide(b);var w=_hgt("Cannot get the list of people who like this.<br/>{error}<br/>Please try it later.",{error:d.error});HZ.ui.yamdi.Common.alert(_hgt("Internal Error"),w)}})}var b,c,d,e=this;d={typeQuestion:5,typeIbk:1,typeAnswer:6,typeComment:9,typeReview:20,likeAction:"like",unlikeAction:"unlike",showlikeAction:"showlikes",likeButtonLabel:_hgt("Like"),likeButtonIngLabel:_hgt("Liked"),likeIconClass:"hzi-Like-Button",unlikeIconClass:"hzi-CloseX",likeIconIngClass:"hzi-Like-Button button-icon-liked"};var f=function(a){switch(parseInt(a,10)){case c.typeQuestion:return _hgt("Like this discussion");case c.typeIbk:return _hgt("Like this ideabook");case c.typeAnswer:case c.typeComment:return _hgt("Like this comment");case c.typeReview:return _hgt("Like this review");default:return _hgt("Like this item")}},g=function(a){switch(parseInt(a,10)){case c.typeQuestion:return _hgt("Stop liking this discussion");case c.typeIbk:return _hgt("Stop liking this ideabook");case c.typeAnswer:case c.typeComment:return _hgt("Stop liking this comment");case c.typeReview:return _hgt("Stop liking this review");default:return _hgt("Stop liking this item")}};this.init=function(f){f&&(c=$.extend({},d,f)),HZ.data.CurrentSessionUser?($(document).on("click","a.like",function(b){var d=this;a(c.likeAction,d),b.preventDefault()}),$(document).on("click","a.unlike",function(b){var d=this;a(c.unlikeAction,d),b.preventDefault()})):$(document).on("click","a.like,a.unlike",function(a){HZ.auth?HZ.auth.Manager.signup(HZ.ajaz.Like.SOURCE_LINK_LIKE,null,window.location.href):window.location.href=c.likeRedirectLink,a.preventDefault()}),b=new HZ.like.LikeDialog,b.prepare();var g=$("#likeBtn");$(document).on("click","a.hz-showlike",function(b){var d=this;b.preventDefault(),a(c.showlikeAction,d)}),g.length&&($(document).on("click","#likeBtn .counter-bubble",function(b){b.stopImmediatePropagation(),b.preventDefault();var d=this;a(c.showlikeAction,d)}),$(document).on("click","#likeBtn",function(a){HZ.data.CurrentSessionUser?e.updateLikes("#likeBtn"):(HZ.auth?HZ.auth.Manager.signup(HZ.ajaz.Like.SOURCE_LINK_LIKE,null,window.location.href):window.location.href=c.likeRedirectLink,a.preventDefault())}),g.bind("mouseover",function(){"unlike"==$("#likeBtn").attr("lop")&&HZ.like.Like.updateLikeBtn(g,!0)}).bind("mouseout",function(){"unlike"==$("#likeBtn").attr("lop")&&e.updateLikeBtn(g,!1)}),g.on("mouseover",".counter-bubble",function(a){"unlike"==g.attr("lop")&&(e.updateLikeBtn(g,!1),a.stopImmediatePropagation())}).on("mouseout",".counter-bubble",function(){"unlike"==g.attr("lop")&&e.updateLikeBtn(g,!0)}))},this.updateLikes=function(a){var b=$(a),d=b.attr("id"),e=b.attr("lop"),h=b.attr("loty"),i=b.attr("loid");HZ.ajaz.Like.like(e,i,h,function(a){if(a&&"true"==a.success){var i=b.find("#"+d+"_icon__"),j=b.find("#"+d+"_label__"),k=b.find(".counter-bubble");if(e==c.likeAction){if(j.text(c.likeButtonIngLabel),b.attr("title",g(h)),b.attr("lop",c.unlikeAction),k.length>0){k[0].innerHTML=a.formattedLikeCount?a.formattedLikeCount:parseInt(k[0].innerHTML,10)+1;var l=_hgtp("","You and 1 person like this.","You and {countOfOtherLikes} people like this.",a.numberOfLikes-1,{countOfOtherLikes:a.numberOfLikes-1});k.attr("title",l)}else k=$('<span title="'+_hgt("You like this.")+'" class="counter-bubble">1</span>'),b.append(k);i.removeClass(c.likeIconClass).addClass(c.likeIconIngClass)}else if(e==c.unlikeAction){if(j.text(c.likeButtonLabel),b.attr("title",f(h)),b.attr("lop",c.likeAction),k.length>0){var m=a.formattedLikeCount?a.formattedLikeCount:parseInt(k[0].innerHTML,10)-1;if(1>m)k.remove();else{k[0].innerHTML=m;var l=_hgtp("","1 person likes this.","{countOfLikes} people like this.",a.numberOfLikes,{countOfLikes:a.numberOfLikes});k.attr("title",l)}}i.removeClass(c.likeIconIngClass).removeClass(c.unlikeIconClass).addClass(c.likeIconClass)}}})},this.updateLikeBtn=function(a,b){{var d=$(a),e=d.attr("id"),f=d.find("#"+e+"_icon__");d.find("#"+e+"_label__")}b?f.removeClass(c.likeIconIngClass).addClass(c.unlikeIconClass):f.removeClass(c.unlikeIconClass).addClass(c.likeIconIngClass)}};

window.hzmr.push("like:2086");
} catch (err) {HZ.utils.Logger.sendJsExceptionStackTrace(err)}

/*************  End like.js  **************/
